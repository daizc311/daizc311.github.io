{"meta":{"version":1,"warehouse":"3.0.1"},"models":{"Asset":[{"_id":"themes/nexmoe/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/nexmoe/source/js/app.js","path":"js/app.js","modified":0,"renderable":1}],"Cache":[{"_id":"themes/nexmoe/.gitignore","hash":"f6a42031a09ea2740831c7eb84e3431f331df957","modified":1577779393769},{"_id":"themes/nexmoe/CODE_OF_CONDUCT.md","hash":"71e211684f8840845f3d6491922e43778da8b829","modified":1577779393769},{"_id":"themes/nexmoe/LICENSE","hash":"b314c7ebb7d599944981908b7f3ed33a30e78f3a","modified":1577779393770},{"_id":"themes/nexmoe/README.md","hash":"7e6a22852e8b060bd31addccad7423b361e3331c","modified":1578286584846},{"_id":"themes/nexmoe/_config.example.yml","hash":"b0172cb32523d0536b98929673727b21fa377406","modified":1578286584853},{"_id":"themes/nexmoe/_config.yml","hash":"093cf3818bc42d7fe8c9e6cde44ff5f0e099ede1","modified":1578286584853},{"_id":"themes/nexmoe/font.php","hash":"3e2674934094417aa94beac3ddca37e14a8a4e65","modified":1577779393862},{"_id":"source/_posts/Hexo部署GitMent评论.md","hash":"def1e73fa75398c6818ae898d36b8670df8c318e","modified":1578289437570},{"_id":"source/_posts/SpringBoot中的redis密码问题.md","hash":"263c3fed910f1c6365e7b404811632962b525aca","modified":1559394240929},{"_id":"source/_posts/[Centos]yum仓库配置及常用操作.md","hash":"924dc35f4d4721c6d1f02570f8f09041564d033d","modified":1578289404105},{"_id":"source/_posts/[WSL2]子系统ubuntu安装jdk8.md","hash":"a36e841e18be93deb3dea1ee59bb1e0891750efa","modified":1578289437628},{"_id":"source/_posts/[Zookeeper学习-第一章]zk环境搭建[单机+控制台].md","hash":"882312d49f7197ce4060033f60032ebace211f16","modified":1578289437601},{"_id":"source/_posts/[Zookeeper学习-第二章]用作SpringCloud的注册中心.md","hash":"824a2c1f8b962260254f386e4fb9fae729f5062b","modified":1578289437651},{"_id":"source/_posts/hello-world.md","hash":"62498dddf0120731718a866f458a50f44e3b437e","modified":1578289122447},{"_id":"source/_posts/java8函数设计[1]-在filter中根据Key去重的函数.md","hash":"57d9fa88f535531e0f7f4050d4ff698ee29786f5","modified":1576755925731},{"_id":"source/_posts/好用常用人人都要会的最基本的Maven插件收集.md","hash":"422574f8cf45ce98a7981420f4336fe2b5784a33","modified":1556255322717},{"_id":"source/_posts/泛型上下界.md","hash":"7f27d072d782c55d268b3c469eb012b45f9962cd","modified":1556255306159},{"_id":"source/_posts/计划任务的Spring实现与手动实现.md","hash":"89e7862e0df99d066d581e5ca21bff49d65bb94a","modified":1559620219716},{"_id":"themes/nexmoe/README/english.md","hash":"44cb225c9abf00c41ffc229ff9407fe3643de351","modified":1577779393771},{"_id":"themes/nexmoe/WIKI/README.md","hash":"82ea9afaa0d1a61eefb4fd9a742a8f1f5f18a49d","modified":1577779393775},{"_id":"themes/nexmoe/WIKI/deploy.sh","hash":"e2cfc08a394c9c6cce5ece4f140f8c1477895774","modified":1578286584848},{"_id":"themes/nexmoe/WIKI/package.json","hash":"12e2e1fcf88928935445c6c65664b58f9b3865e2","modified":1577779393856},{"_id":"themes/nexmoe/font/QQ.svg","hash":"195665f0d13e71bbbea8ecbe2e46c0e4e67341fe","modified":1577779393863},{"_id":"themes/nexmoe/font/appstore-fill.svg","hash":"6ecc527b424afb79bca7d26191c53ebc08091454","modified":1577779393863},{"_id":"themes/nexmoe/font/areachart.svg","hash":"71e8bef524be4ba17ac9918d8598a606b2bb26c9","modified":1577779393864},{"_id":"themes/nexmoe/font/battlenet.svg","hash":"961c2592ed5ea31319bd476e481549d69e8d075d","modified":1577779393864},{"_id":"themes/nexmoe/font/bilibili.svg","hash":"0f9d92835db855bf581b9858a8fc1e3380be8808","modified":1577779393864},{"_id":"themes/nexmoe/font/calendar-fill.svg","hash":"05e5b979cf8d150731c0eab66a4394df9498f1d6","modified":1577779393865},{"_id":"themes/nexmoe/font/container.svg","hash":"851225195cff6589a5247cb383194057190dd842","modified":1577779393885},{"_id":"themes/nexmoe/font/dribbble.svg","hash":"0785c0b322c849b0b4736b88fc5d4fed7fbaf07d","modified":1577779393885},{"_id":"themes/nexmoe/font/ellipsis.svg","hash":"c4074867e95f14d55c3e44145ef6388f60684c5e","modified":1577779393886},{"_id":"themes/nexmoe/font/eye-fill.svg","hash":"158b8b01f5c43219b599799273a0f8d553e91723","modified":1577779393887},{"_id":"themes/nexmoe/font/github.svg","hash":"b10f18d0644d120624c25b8ad5a2bc1ef5cff3a0","modified":1577779393888},{"_id":"themes/nexmoe/font/home.svg","hash":"97ab890dc43804b584ce3bb407bdbbb32030391b","modified":1577779393888},{"_id":"themes/nexmoe/font/info-circle.svg","hash":"016e0515fccbd158cd1094376910725f7325acd8","modified":1577779393889},{"_id":"themes/nexmoe/font/left.svg","hash":"3fa57b536daade473b90cd496a39962c90de12ab","modified":1577779393889},{"_id":"themes/nexmoe/font/mail-fill.svg","hash":"88ef0ea02f5449d7d24ce3f957847219e5205fa0","modified":1577779393890},{"_id":"themes/nexmoe/font/menu.svg","hash":"93c34d0e2156caa8dca37007da3647a6af0fa352","modified":1577779393890},{"_id":"themes/nexmoe/font/right.svg","hash":"640b5fad35d5b1b1052c2f44bb58b1db5446a296","modified":1577779393891},{"_id":"themes/nexmoe/font/steam.svg","hash":"cf35facf841e5be58ac7c35945ae4a576d460b7c","modified":1577779393891},{"_id":"themes/nexmoe/font/tag-fill.svg","hash":"f4a7d7cb92e40295a6b4c37b8d06385cf024eb9d","modified":1577779393892},{"_id":"themes/nexmoe/font/tags-fill.svg","hash":"87f59d1b14a5160e726ec3edc6e06fbe953f40f4","modified":1577779393892},{"_id":"themes/nexmoe/font/telegram.svg","hash":"51d8f5b3fffb40696f5830608ce2abfcebf36e2c","modified":1577779393892},{"_id":"themes/nexmoe/font/time-circle-fill.svg","hash":"ecdacea2e496c505a7d07770e54c503420ef9290","modified":1577779393893},{"_id":"themes/nexmoe/font/twitter.svg","hash":"bfad6767a6cc6058f0e4798225dc8f5898a228ca","modified":1577779393893},{"_id":"themes/nexmoe/font/unorderedlist.svg","hash":"46722843f0674341bffd8ad7f2da1deabde2ba82","modified":1577779393894},{"_id":"themes/nexmoe/font/wechat-fill.svg","hash":"fdb6fa45343307af0d6ebb70a75688afbc4444b3","modified":1577779393894},{"_id":"themes/nexmoe/font/weibo.svg","hash":"277d4076a9d17b8762e66fe81cbf0ec9f99a59cd","modified":1577779393894},{"_id":"themes/nexmoe/font/youtube.svg","hash":"fe59b1fb78e5661feae8775bdafe855f28092f0c","modified":1577779393895},{"_id":"themes/nexmoe/font/zhihu.svg","hash":"78e11c8e8f9ba84ebb2043a8fdbc484b56db3a95","modified":1577779393896},{"_id":"themes/nexmoe/languages/default.yml","hash":"6200b6a693923e87f20fd11f8cc7cd6bf89143fe","modified":1577779393896},{"_id":"themes/nexmoe/languages/en.yml","hash":"d20f48f9a0fcf516a37822946dae0fae9c6a0150","modified":1577779393897},{"_id":"themes/nexmoe/languages/zh-CN.yml","hash":"548c593aee91b91c94f59b62675cedcc3d806e30","modified":1577779393897},{"_id":"themes/nexmoe/languages/zh-HK.yml","hash":"b43c7fd5f8d2de0fe1e9e39b8398d8d0f98a5fff","modified":1577779393897},{"_id":"themes/nexmoe/languages/zh-TW.yml","hash":"b43c7fd5f8d2de0fe1e9e39b8398d8d0f98a5fff","modified":1577779393898},{"_id":"themes/nexmoe/layout/archives.ejs","hash":"738dfd4af95cc4fefe2560ac30a7926a378d19fd","modified":1577779394008},{"_id":"themes/nexmoe/layout/index.ejs","hash":"2ef7da450eecde90404843830d5b817b6e42b11d","modified":1577779394008},{"_id":"themes/nexmoe/layout/layout.ejs","hash":"147297402a11975f58901cf1352b19ed696307a9","modified":1577779394009},{"_id":"themes/nexmoe/layout/post.ejs","hash":"97c2db6dd930f4db333d0ec5f8bdf13a1b200288","modified":1577779394009},{"_id":"themes/nexmoe/layout/py.ejs","hash":"437b4daa9c660ceb872525fc41491ca828ea73a2","modified":1578286584855},{"_id":"themes/nexmoe/WIKI/.vuepress/enhanceApp.js","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1577779393773},{"_id":"themes/nexmoe/.github/ISSUE_TEMPLATE/bug_report_en.md","hash":"557484415c610222b16b58df470c2a768782c4fc","modified":1577779393763},{"_id":"themes/nexmoe/.github/ISSUE_TEMPLATE/bug_report_zh.md","hash":"d6c77dbb2a3d638d748280fb37dd29375aebe98c","modified":1577779393764},{"_id":"themes/nexmoe/.github/ISSUE_TEMPLATE/feature_request_en.md","hash":"803f6736473a122ed78867e64681defcd2edd954","modified":1577779393764},{"_id":"themes/nexmoe/.github/ISSUE_TEMPLATE/feature_request_zh.md","hash":"843abf5e1d7b06cb1feddd75f7025150d46a91c2","modified":1577779393768},{"_id":"themes/nexmoe/WIKI/.vuepress/config.js","hash":"1f53e2e1de5ecf4d9d510e50102f3c296390e460","modified":1578286584847},{"_id":"themes/nexmoe/WIKI/en/README.md","hash":"1e13b8bdc8328ac5c149e44189bb5e989ecd97ab","modified":1577779393848},{"_id":"themes/nexmoe/WIKI/hexo/README.md","hash":"16423e9ffa2021d1be97f9678b73c240fd5bf910","modified":1578286584850},{"_id":"themes/nexmoe/WIKI/hexo/comment.md","hash":"abbf1e86e20d9092df83aec687326bd36f67082a","modified":1578286584850},{"_id":"themes/nexmoe/WIKI/hexo/math.md","hash":"315b9a01801f202334b4149e9701fcfbc933d5f7","modified":1578286584851},{"_id":"themes/nexmoe/WIKI/hexo/notice.md","hash":"b38e3e64f21dad7fa6ffef75e1a4711ef2679b8a","modified":1577779393851},{"_id":"themes/nexmoe/WIKI/hexo/statistics.md","hash":"6cf6ae2060569d813573c00a060ef45cf153b635","modified":1577779393852},{"_id":"themes/nexmoe/WIKI/hexo/use.md","hash":"b26dbeff0f9eba56d74c2a3ea21373f4c8f22e13","modified":1577779393852},{"_id":"themes/nexmoe/layout/_partial/after-footer.ejs","hash":"d5d0ce85a4aa18efd5cb0c5169be4d72f6ccced8","modified":1578286584854},{"_id":"themes/nexmoe/layout/_partial/analytics.ejs","hash":"e53883f2bb9921cb08437f433d5d4d5cf52ab297","modified":1577779393970},{"_id":"themes/nexmoe/layout/_partial/comment.ejs","hash":"6e48ae4a79ad9e14d00244c15cd6e9ad04b99eb4","modified":1577779393971},{"_id":"themes/nexmoe/layout/_partial/copyright.ejs","hash":"3df97e05990b73c8d3a73959e2eb3e38da77386e","modified":1577779393971},{"_id":"themes/nexmoe/layout/_partial/header.ejs","hash":"7d9fd0587d667400295e506ba564609ee178bc38","modified":1577779394004},{"_id":"themes/nexmoe/layout/_partial/paginator.ejs","hash":"6b2ff80338679f04e91f324d1231760e038a309d","modified":1577779394004},{"_id":"themes/nexmoe/layout/_partial/sidebar.ejs","hash":"58c53d620cc0695b68c1e18a9f0d97fc888357cc","modified":1577779394005},{"_id":"themes/nexmoe/layout/_partial/site-verification.ejs","hash":"600319729da09e366c05e104fe68a821b087c027","modified":1577779394005},{"_id":"themes/nexmoe/layout/_widget/archive.ejs","hash":"eb9890c7bf2441722af87a9593b82708bdef62db","modified":1577779394006},{"_id":"themes/nexmoe/layout/_widget/category.ejs","hash":"99113b9f2cb4ffefdda3e3a343647ac6a5083091","modified":1577779394006},{"_id":"themes/nexmoe/layout/_widget/recent_posts.ejs","hash":"7d9eaf8228eda803aa4956e55432f78e056d6a01","modified":1577779394006},{"_id":"themes/nexmoe/layout/_widget/social.ejs","hash":"3ad3fc3cb32cd24adf00e959e4afd26aa55c8522","modified":1577779394007},{"_id":"themes/nexmoe/layout/_widget/tag.ejs","hash":"be2cbf60fe1be5591a53312a36558723816d605b","modified":1577779394007},{"_id":"themes/nexmoe/layout/_widget/tagcloud.ejs","hash":"a7a83acd837276573eacb10e41028e19c355c179","modified":1577779394008},{"_id":"themes/nexmoe/scripts/helper/css_auto_version.js","hash":"1df4e02d36ae52e64f4f4e709e488d6e413d9d0c","modified":1577779394044},{"_id":"themes/nexmoe/scripts/helper/js_auto_version.js","hash":"912dfbe49c51614ef886c967349d3cb054de6f2d","modified":1577779394045},{"_id":"themes/nexmoe/source/css/style.styl","hash":"549325198684111c41a4919d3a2e945b76ed5ea5","modified":1578286584856},{"_id":"themes/nexmoe/source/js/app.js","hash":"5bdec1ae262cd8f062386cd42b32e19fcdc58859","modified":1578286584902},{"_id":"themes/nexmoe/WIKI/.vuepress/public/manifest.json","hash":"be8f17b689ddfab04d39b08f9b295a6f144a6bf5","modified":1577779393774},{"_id":"themes/nexmoe/WIKI/.vuepress/styles/palette.styl","hash":"678603df862e062eee3e229839ec0dab3e6b316c","modified":1577779393775},{"_id":"themes/nexmoe/WIKI/component/basic/color.md","hash":"967e5e2a645fc93b028c3da83e601dc026450c8b","modified":1577779393776},{"_id":"themes/nexmoe/WIKI/component/basic/icon.md","hash":"ba90c85053ce4c7f8e35964810fd6bf173ae2adb","modified":1577779393776},{"_id":"themes/nexmoe/WIKI/en/Hexo/README.md","hash":"55e0dfdc52fa4cb133f8182cf29f5edd16dca34d","modified":1577779393846},{"_id":"themes/nexmoe/WIKI/en/Hexo/comment.md","hash":"445034e0ec92af4c7184f7db65d6c3f7863b4775","modified":1577779393847},{"_id":"themes/nexmoe/WIKI/en/Hexo/notice.md","hash":"9fc526aff1afdcd6d4a74fdd051810101d490f01","modified":1577779393847},{"_id":"themes/nexmoe/WIKI/en/Hexo/use.md","hash":"c3e51cb400d61bf02724a7a4577c239c9a301f25","modified":1577779393847},{"_id":"themes/nexmoe/cover.png","hash":"56de9278ccf3bca1cae7eb7e15bad8aa593f1a55","modified":1577779393862},{"_id":"themes/nexmoe/layout/_partial/_analytics/baidu.ejs","hash":"cc782e1363c8bbb6277c3825bb9eac83762bc26d","modified":1577779393899},{"_id":"themes/nexmoe/layout/_partial/_analytics/cnzz.ejs","hash":"345ed559b76930bed05e1b393c12f09d42c2312e","modified":1577779393899},{"_id":"themes/nexmoe/layout/_partial/_analytics/google.ejs","hash":"97f3a717495c8cc71d5d3c7ab69ddd589a69a038","modified":1577779393900},{"_id":"themes/nexmoe/layout/_partial/_analytics/gtags.ejs","hash":"2c429eef83e712531a08de370b06f1f00ac7398b","modified":1577779393900},{"_id":"themes/nexmoe/layout/_partial/_analytics/gtm-body.ejs","hash":"1471e3a49ad6c93fd33b18545b43805c48695e23","modified":1577779393901},{"_id":"themes/nexmoe/layout/_partial/_analytics/gtm-head.ejs","hash":"5638bed9cfe2e86aeee77adc883b2a3e1ecd76ff","modified":1577779393901},{"_id":"themes/nexmoe/layout/_partial/_analytics/la.ejs","hash":"e08b1f111068c62e625b6790e66d8a5f625246ba","modified":1577779393945},{"_id":"themes/nexmoe/layout/_partial/_analytics/tencent.ejs","hash":"6f7d514f157fbdb505e52dda2dc4f35dcdb2685e","modified":1577779393946},{"_id":"themes/nexmoe/layout/_partial/_comment/DiscussBot.ejs","hash":"92fb25b5204b325eb18eea0c15ddb4f4116e35e2","modified":1577779393946},{"_id":"themes/nexmoe/layout/_partial/_comment/changyan.ejs","hash":"8a520fd9a9704208c23abcb689bae33acd1167db","modified":1577779393947},{"_id":"themes/nexmoe/layout/_partial/_comment/disqus.ejs","hash":"e1e70a619cf3499ef8b054c8fb4b23865a554b6b","modified":1577779393947},{"_id":"themes/nexmoe/layout/_partial/_comment/disqusjs.ejs","hash":"7518e88f2504b9844f71190e079df07f51847472","modified":1577779393948},{"_id":"themes/nexmoe/layout/_partial/_comment/gitalk.ejs","hash":"a3a33112234fee49646a9c11fcbdf2ed1a7777a8","modified":1577779393948},{"_id":"themes/nexmoe/layout/_partial/_comment/gitment.ejs","hash":"d4a99db9f2daf7bcdbcf637f478d925d5d840fe4","modified":1577779393948},{"_id":"themes/nexmoe/layout/_partial/_comment/livere.ejs","hash":"e96e1510ba2a8ccb1edebc378c566fadaed09e50","modified":1577779393969},{"_id":"themes/nexmoe/layout/_partial/_comment/valine.ejs","hash":"97a699da23500cd6b16c857a60d123064d1653f9","modified":1577779393969},{"_id":"themes/nexmoe/WIKI/yarn.lock","hash":"a80010dc99f0f27af7c90c0aaa4e81f332b77d26","modified":1577779393859},{"_id":"themes/nexmoe/WIKI/en/component/basic/color.md","hash":"7d7c6a408b7d38a5f7cd608d0e852e4d0ac0bca4","modified":1577779393849},{"_id":"themes/nexmoe/WIKI/en/component/basic/icon.md","hash":"3101ced9978917c9869fd99693a4eb73a29a25b2","modified":1577779393849},{"_id":"themes/nexmoe/WIKI/package-lock.json","hash":"1997109d6b824afbdb21bed498a60417aa3e0356","modified":1577779393856},{"_id":"public/2020/01/06/hello-world/index.html","hash":"66a16af58fed305d17db163b81dfdc34332601ac","modified":1578289440232},{"_id":"public/2020/01/06/泛型上下界/index.html","hash":"42d1e3c4403d77e3fa6be0c1eaca4f63d57ea458","modified":1578289440232},{"_id":"public/2018/12/23/Hexo部署GitMent评论/index.html","hash":"8595f08ee93ee44bc9827fa87c88c0713cfff245","modified":1578289440232},{"_id":"public/categories/Study/index.html","hash":"3143e6f8936ce3e0aca47e4e8611e4e0bc7181fb","modified":1578289440232},{"_id":"public/categories/Study/HEXO/index.html","hash":"8f86d0c79ede0cdc071062e267c98812e65c3a7e","modified":1578289440232},{"_id":"public/archives/2018/index.html","hash":"4df05e55e0f03ddd4c0814ff53804081c590ccde","modified":1578289440232},{"_id":"public/archives/2018/12/index.html","hash":"2db49d70686ebf4644a8fa2e1792256f7c82710c","modified":1578289440232},{"_id":"public/tags/blog/index.html","hash":"494c87c0e4b91aa6a3bf462cee0cd2b203264915","modified":1578289440232},{"_id":"public/2020/01/06/SpringBoot中的redis密码问题/index.html","hash":"04dc5f90ab032135f22f8faf87de4e36daaa3df8","modified":1578289440232},{"_id":"public/2020/01/06/好用常用人人都要会的最基本的Maven插件收集/index.html","hash":"03d33859746412c2d24d4a296c2d862d2d985709","modified":1578289440232},{"_id":"public/2020/01/06/java8函数设计[1]-在filter中根据Key去重的函数/index.html","hash":"ab49eed8707ee6aa27d02fb83aa1c003fc98b80f","modified":1578289440232},{"_id":"public/2020/01/06/计划任务的Spring实现与手动实现/index.html","hash":"c58cf434580650470b4c8d5f952943b28d6d1963","modified":1578289440232},{"_id":"public/archives/index.html","hash":"0042ddd654b795b75d628c4d065bfd2891d61cb3","modified":1578289440232},{"_id":"public/archives/2020/index.html","hash":"53c556e1d648845e71f577c61a4174c6fe55d917","modified":1578289440232},{"_id":"public/archives/2020/01/index.html","hash":"bbc86effe13950a0ab6ecafd82a1d106b5a6790e","modified":1578289440232},{"_id":"public/index.html","hash":"7176cf29e81144a5f608212ccd27ba6797af785d","modified":1578289440232},{"_id":"public/js/app.js","hash":"3c98510a7521ecf122d290c6a7ecf0f7927c7052","modified":1578289179243},{"_id":"public/css/style.css","hash":"33856bef840bc7a9298fd62fd3f1c4befb33fdf9","modified":1578289179243},{"_id":"public/2019/01/02/[Centos]yum仓库配置及常用操作/index.html","hash":"7203101d99b6fd8d60ab4046355df078c7ba55c2","modified":1578289440232},{"_id":"public/archives/2019/index.html","hash":"afb24eca7ea8d9e68f297b1402745cb48ed6b399","modified":1578289440232},{"_id":"public/archives/2019/01/index.html","hash":"03afd740a9ad2a386d0088d2a7e2ad3eea245953","modified":1578289440232},{"_id":"public/categories/Study/OperationAndMaintenance/index.html","hash":"852cd7b1ad785f709d138da193073ae4242dc65a","modified":1578289440232},{"_id":"public/tags/linux/index.html","hash":"c971f7ec027f26d14a37625cc9c3eb35715e0b20","modified":1578289440232},{"_id":"public/2019/07/01/[Zookeeper学习-第二章]用作SpringCloud的注册中心/index.html","hash":"3c3b43df37fc68b00fbb88e874d1631fa3f570d7","modified":1578289440232},{"_id":"public/archives/page/2/index.html","hash":"90f5d38360954c64fcbe12bb1a2ed030f0054300","modified":1578289440232},{"_id":"public/page/2/index.html","hash":"4e8153e08f9d96c7b8a34ce9d69471fec83a70fa","modified":1578289440232},{"_id":"public/2019/07/01/[Zookeeper学习-第一章]zk环境搭建[单机+控制台]/index.html","hash":"032876250c6ddc0528becd1aa8fe6d3084f85c9b","modified":1578289440232},{"_id":"public/2019/01/04/[WSL2]子系统ubuntu安装jdk8/index.html","hash":"51f64219958cc1514bfc4881d88e64a4a3b28f90","modified":1578289440232},{"_id":"public/archives/2019/07/index.html","hash":"43217aa569efb9da4339b2b1de51fdc19b44a461","modified":1578289440232},{"_id":"public/categories/Study/Java/index.html","hash":"fd446624fcfd5138d042ea612f71dbe8949ec93f","modified":1578289440232},{"_id":"public/tags/java/index.html","hash":"cc542fc32c5f1506dfc1dae762a046458dde78b3","modified":1578289440232},{"_id":"public/tags/zookeeper/index.html","hash":"b92e1695604e325a1bd078ee5c973698bf894eac","modified":1578289440232}],"Category":[{"name":"Study","_id":"ck520ml9600049cov5jzt22s8"},{"name":"HEXO","parent":"ck520ml9600049cov5jzt22s8","_id":"ck520ml9b00099covdesicbea"},{"name":"OperationAndMaintenance","parent":"ck520ml9600049cov5jzt22s8","_id":"ck520rgjc0002tsov9gller4u"},{"name":"Java","parent":"ck520ml9600049cov5jzt22s8","_id":"ck520s6p700054wov91uiaeoi"}],"Data":[],"Page":[],"Post":[{"title":"Hexo部署GitMent评论","date":"2018-12-23T03:02:53.000Z","updated":"2020-01-06T05:31:00.000Z","comments":1,"_content":"\n\n# GitMent简介 #\n  Gitment是一个基于GitHub Issues的评论系统，他使用一个Github Repository的Issues区作为评论的存储区。支持在前端直接引入，不需要任何后端代码。可以在页面进行登录、查看、评论、点赞等操作，同时有完整的 Markdown / GFM 和代码高亮支持。尤为适合各种基于 GitHub Pages 的静态博客或项目页面。<!-- more -->\n\n### Initialize Comments 时提示 Error: Validation Failed ### \n\n\n###### 出现问题 ###### \n\n  部署完成后点击初始化按钮后alert:\"Error: Validation Failed\" \n![图1.Error: Validation Failed](https://www.dreamccc.club/hexo/images/pasted-3.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图1.Error: Validation Failed</span></center>\n\n###### 查询资料 ######\n\n  首先查阅了一下资料,找到了 [GitMent的issues](https://github.com/imsun/gitment/issues/118) ：\n &gt; 地址 https://github.com/imsun/gitment/issues/118\n\n###### 原因分析 ######\n\n  GitHub Issues中新建label时LabelName长度不能超过50，但是在GitMent中是以页面url(window.location.pathname)作为唯一标识来创建Label的，当我们以中文作为文章标题时，中文将被转义，转义后的url超过了50字符长度的限制，引起报错。\n\n![图2.LabelName长度过长](https://www.dreamccc.club/hexo/images/pasted-7.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图2.LabelName长度过长</span></center>\n\n解决方式：\n 1. 缩短标题长度，并尽量少用中文标题\n 2. 寻找较短的具有唯一性的参数作为Issues的LabelName\n \n \n![图3.参数替换前后对比](https://www.dreamccc.club/hexo/images/pasted-4.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图3.参数替换前后对比</span></center>\n \n很明显只能寻找其他参数来代替URL作为ID了，在这里我们使用网页标题（document.title）作为ID。\n\n\n###### 错误修正&nbsp;#######\n\n** hexo-theme-yilia主题 ** <br/>\n  该主题的gitment配置文件位于${hexo_root}/themes/hexo-theme-yilia/layout/_partial/post下\n\n修改gitment.ejs:\n![图4.gitment.ejs](https://www.dreamccc.club/hexo/images/pasted-9.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图4.gitment.ejs</span></center>\n\n** hexo-theme-next主题 ** <br/>\n  该主题的gitment配置文件位于${hexo_root}/themes/hexo-theme-next/layout/_third-party/comments下\n\n修改gitment.swig:\n![图5.gitment.swig](https://www.dreamccc.club/hexo/images/pasted-8.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图5.gitment.swig</span></center>\n\n###### 效果一览 ######\n\n  修改后成功初始化，Issus中出现了对应文章的记录，blog中可以正常的发布评论了。\n\n![图6.GitMent效果](https://www.dreamccc.club/hexo/images/pasted-10.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图6.GitMent效果</span></center>\n\n\n![图7.GitHub效果](https://www.dreamccc.club/hexo/images/pasted-11.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图7.GitHub效果</span></center></pre></en-note>\n","source":"_posts/Hexo部署GitMent评论.md","raw":"---\ntitle: 'Hexo部署GitMent评论'\ndate: 2018/12/23 11:02:53\nupdated: 2020/1/6 13:31\ncomments: true\ntags: \n    - blog\ncategories: \n    - [Study, HEXO]\n---\n\n\n# GitMent简介 #\n  Gitment是一个基于GitHub Issues的评论系统，他使用一个Github Repository的Issues区作为评论的存储区。支持在前端直接引入，不需要任何后端代码。可以在页面进行登录、查看、评论、点赞等操作，同时有完整的 Markdown / GFM 和代码高亮支持。尤为适合各种基于 GitHub Pages 的静态博客或项目页面。<!-- more -->\n\n### Initialize Comments 时提示 Error: Validation Failed ### \n\n\n###### 出现问题 ###### \n\n  部署完成后点击初始化按钮后alert:\"Error: Validation Failed\" \n![图1.Error: Validation Failed](https://www.dreamccc.club/hexo/images/pasted-3.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图1.Error: Validation Failed</span></center>\n\n###### 查询资料 ######\n\n  首先查阅了一下资料,找到了 [GitMent的issues](https://github.com/imsun/gitment/issues/118) ：\n &gt; 地址 https://github.com/imsun/gitment/issues/118\n\n###### 原因分析 ######\n\n  GitHub Issues中新建label时LabelName长度不能超过50，但是在GitMent中是以页面url(window.location.pathname)作为唯一标识来创建Label的，当我们以中文作为文章标题时，中文将被转义，转义后的url超过了50字符长度的限制，引起报错。\n\n![图2.LabelName长度过长](https://www.dreamccc.club/hexo/images/pasted-7.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图2.LabelName长度过长</span></center>\n\n解决方式：\n 1. 缩短标题长度，并尽量少用中文标题\n 2. 寻找较短的具有唯一性的参数作为Issues的LabelName\n \n \n![图3.参数替换前后对比](https://www.dreamccc.club/hexo/images/pasted-4.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图3.参数替换前后对比</span></center>\n \n很明显只能寻找其他参数来代替URL作为ID了，在这里我们使用网页标题（document.title）作为ID。\n\n\n###### 错误修正&nbsp;#######\n\n** hexo-theme-yilia主题 ** <br/>\n  该主题的gitment配置文件位于${hexo_root}/themes/hexo-theme-yilia/layout/_partial/post下\n\n修改gitment.ejs:\n![图4.gitment.ejs](https://www.dreamccc.club/hexo/images/pasted-9.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图4.gitment.ejs</span></center>\n\n** hexo-theme-next主题 ** <br/>\n  该主题的gitment配置文件位于${hexo_root}/themes/hexo-theme-next/layout/_third-party/comments下\n\n修改gitment.swig:\n![图5.gitment.swig](https://www.dreamccc.club/hexo/images/pasted-8.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图5.gitment.swig</span></center>\n\n###### 效果一览 ######\n\n  修改后成功初始化，Issus中出现了对应文章的记录，blog中可以正常的发布评论了。\n\n![图6.GitMent效果](https://www.dreamccc.club/hexo/images/pasted-10.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图6.GitMent效果</span></center>\n\n\n![图7.GitHub效果](https://www.dreamccc.club/hexo/images/pasted-11.png)\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图7.GitHub效果</span></center></pre></en-note>\n","slug":"Hexo部署GitMent评论","published":1,"_id":"ck520ml8j00009cov9idcfmg6","layout":"post","photos":[],"link":"","content":"<h1 id=\"GitMent简介\"><a href=\"#GitMent简介\" class=\"headerlink\" title=\"GitMent简介\"></a>GitMent简介</h1><p>  Gitment是一个基于GitHub Issues的评论系统，他使用一个Github Repository的Issues区作为评论的存储区。支持在前端直接引入，不需要任何后端代码。可以在页面进行登录、查看、评论、点赞等操作，同时有完整的 Markdown / GFM 和代码高亮支持。尤为适合各种基于 GitHub Pages 的静态博客或项目页面。<a id=\"more\"></a></p>\n<h3 id=\"Initialize-Comments-时提示-Error-Validation-Failed\"><a href=\"#Initialize-Comments-时提示-Error-Validation-Failed\" class=\"headerlink\" title=\"Initialize Comments 时提示 Error: Validation Failed\"></a>Initialize Comments 时提示 Error: Validation Failed</h3><h6 id=\"出现问题\"><a href=\"#出现问题\" class=\"headerlink\" title=\"出现问题\"></a>出现问题</h6><p>  部署完成后点击初始化按钮后alert:”Error: Validation Failed”<br><img src=\"https://www.dreamccc.club/hexo/images/pasted-3.png\" alt=\"图1.Error: Validation Failed\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图1.Error: Validation Failed</span></center>\n\n<h6 id=\"查询资料\"><a href=\"#查询资料\" class=\"headerlink\" title=\"查询资料\"></a>查询资料</h6><p>  首先查阅了一下资料,找到了 <a href=\"https://github.com/imsun/gitment/issues/118\" target=\"_blank\" rel=\"noopener\">GitMent的issues</a> ：<br> &gt; 地址 <a href=\"https://github.com/imsun/gitment/issues/118\" target=\"_blank\" rel=\"noopener\">https://github.com/imsun/gitment/issues/118</a></p>\n<h6 id=\"原因分析\"><a href=\"#原因分析\" class=\"headerlink\" title=\"原因分析\"></a>原因分析</h6><p>  GitHub Issues中新建label时LabelName长度不能超过50，但是在GitMent中是以页面url(window.location.pathname)作为唯一标识来创建Label的，当我们以中文作为文章标题时，中文将被转义，转义后的url超过了50字符长度的限制，引起报错。</p>\n<p><img src=\"https://www.dreamccc.club/hexo/images/pasted-7.png\" alt=\"图2.LabelName长度过长\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图2.LabelName长度过长</span></center>\n\n<p>解决方式：</p>\n<ol>\n<li>缩短标题长度，并尽量少用中文标题</li>\n<li>寻找较短的具有唯一性的参数作为Issues的LabelName</li>\n</ol>\n<p><img src=\"https://www.dreamccc.club/hexo/images/pasted-4.png\" alt=\"图3.参数替换前后对比\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图3.参数替换前后对比</span></center>\n\n<p>很明显只能寻找其他参数来代替URL作为ID了，在这里我们使用网页标题（document.title）作为ID。</p>\n<h6 id=\"错误修正-nbsp\"><a href=\"#错误修正-nbsp\" class=\"headerlink\" title=\"错误修正&nbsp;#######\"></a>错误修正&nbsp;#######</h6><p>** hexo-theme-yilia主题 ** <br/><br>  该主题的gitment配置文件位于${hexo_root}/themes/hexo-theme-yilia/layout/_partial/post下</p>\n<p>修改gitment.ejs:<br><img src=\"https://www.dreamccc.club/hexo/images/pasted-9.png\" alt=\"图4.gitment.ejs\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图4.gitment.ejs</span></center>\n\n<p>** hexo-theme-next主题 ** <br/><br>  该主题的gitment配置文件位于${hexo_root}/themes/hexo-theme-next/layout/_third-party/comments下</p>\n<p>修改gitment.swig:<br><img src=\"https://www.dreamccc.club/hexo/images/pasted-8.png\" alt=\"图5.gitment.swig\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图5.gitment.swig</span></center>\n\n<h6 id=\"效果一览\"><a href=\"#效果一览\" class=\"headerlink\" title=\"效果一览\"></a>效果一览</h6><p>  修改后成功初始化，Issus中出现了对应文章的记录，blog中可以正常的发布评论了。</p>\n<p><img src=\"https://www.dreamccc.club/hexo/images/pasted-10.png\" alt=\"图6.GitMent效果\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图6.GitMent效果</span></center>\n\n\n<p><img src=\"https://www.dreamccc.club/hexo/images/pasted-11.png\" alt=\"图7.GitHub效果\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图7.GitHub效果</span></center></pre></en-note>\n","site":{"data":{}},"excerpt":"<h1 id=\"GitMent简介\"><a href=\"#GitMent简介\" class=\"headerlink\" title=\"GitMent简介\"></a>GitMent简介</h1><p>  Gitment是一个基于GitHub Issues的评论系统，他使用一个Github Repository的Issues区作为评论的存储区。支持在前端直接引入，不需要任何后端代码。可以在页面进行登录、查看、评论、点赞等操作，同时有完整的 Markdown / GFM 和代码高亮支持。尤为适合各种基于 GitHub Pages 的静态博客或项目页面。","more":"</p>\n<h3 id=\"Initialize-Comments-时提示-Error-Validation-Failed\"><a href=\"#Initialize-Comments-时提示-Error-Validation-Failed\" class=\"headerlink\" title=\"Initialize Comments 时提示 Error: Validation Failed\"></a>Initialize Comments 时提示 Error: Validation Failed</h3><h6 id=\"出现问题\"><a href=\"#出现问题\" class=\"headerlink\" title=\"出现问题\"></a>出现问题</h6><p>  部署完成后点击初始化按钮后alert:”Error: Validation Failed”<br><img src=\"https://www.dreamccc.club/hexo/images/pasted-3.png\" alt=\"图1.Error: Validation Failed\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图1.Error: Validation Failed</span></center>\n\n<h6 id=\"查询资料\"><a href=\"#查询资料\" class=\"headerlink\" title=\"查询资料\"></a>查询资料</h6><p>  首先查阅了一下资料,找到了 <a href=\"https://github.com/imsun/gitment/issues/118\" target=\"_blank\" rel=\"noopener\">GitMent的issues</a> ：<br> &gt; 地址 <a href=\"https://github.com/imsun/gitment/issues/118\" target=\"_blank\" rel=\"noopener\">https://github.com/imsun/gitment/issues/118</a></p>\n<h6 id=\"原因分析\"><a href=\"#原因分析\" class=\"headerlink\" title=\"原因分析\"></a>原因分析</h6><p>  GitHub Issues中新建label时LabelName长度不能超过50，但是在GitMent中是以页面url(window.location.pathname)作为唯一标识来创建Label的，当我们以中文作为文章标题时，中文将被转义，转义后的url超过了50字符长度的限制，引起报错。</p>\n<p><img src=\"https://www.dreamccc.club/hexo/images/pasted-7.png\" alt=\"图2.LabelName长度过长\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图2.LabelName长度过长</span></center>\n\n<p>解决方式：</p>\n<ol>\n<li>缩短标题长度，并尽量少用中文标题</li>\n<li>寻找较短的具有唯一性的参数作为Issues的LabelName</li>\n</ol>\n<p><img src=\"https://www.dreamccc.club/hexo/images/pasted-4.png\" alt=\"图3.参数替换前后对比\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图3.参数替换前后对比</span></center>\n\n<p>很明显只能寻找其他参数来代替URL作为ID了，在这里我们使用网页标题（document.title）作为ID。</p>\n<h6 id=\"错误修正-nbsp\"><a href=\"#错误修正-nbsp\" class=\"headerlink\" title=\"错误修正&nbsp;#######\"></a>错误修正&nbsp;#######</h6><p>** hexo-theme-yilia主题 ** <br/><br>  该主题的gitment配置文件位于${hexo_root}/themes/hexo-theme-yilia/layout/_partial/post下</p>\n<p>修改gitment.ejs:<br><img src=\"https://www.dreamccc.club/hexo/images/pasted-9.png\" alt=\"图4.gitment.ejs\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图4.gitment.ejs</span></center>\n\n<p>** hexo-theme-next主题 ** <br/><br>  该主题的gitment配置文件位于${hexo_root}/themes/hexo-theme-next/layout/_third-party/comments下</p>\n<p>修改gitment.swig:<br><img src=\"https://www.dreamccc.club/hexo/images/pasted-8.png\" alt=\"图5.gitment.swig\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图5.gitment.swig</span></center>\n\n<h6 id=\"效果一览\"><a href=\"#效果一览\" class=\"headerlink\" title=\"效果一览\"></a>效果一览</h6><p>  修改后成功初始化，Issus中出现了对应文章的记录，blog中可以正常的发布评论了。</p>\n<p><img src=\"https://www.dreamccc.club/hexo/images/pasted-10.png\" alt=\"图6.GitMent效果\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图6.GitMent效果</span></center>\n\n\n<p><img src=\"https://www.dreamccc.club/hexo/images/pasted-11.png\" alt=\"图7.GitHub效果\"></p>\n<center><span style=\"border-bottom: 1px solid #d9d9d9;color: #aaa;\">图7.GitHub效果</span></center></pre></en-note>"},{"title":"Hello World","_content":"\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n``` \n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\n\ntitle: Hello World\n\n---\n\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n``` \n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2020-01-06T05:38:42.447Z","updated":"2020-01-06T05:38:42.447Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck520ml9000019cov9r76hotb","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br><span class=\"line\">``` </span><br><span class=\"line\"></span><br><span class=\"line\">More info: [Server](https://hexo.io/docs/server.html)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### Generate static files</span></span><br><span class=\"line\"></span><br><span class=\"line\">``` bash</span><br><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br><span class=\"line\">``` </span><br><span class=\"line\"></span><br><span class=\"line\">More info: [Server](https://hexo.io/docs/server.html)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">### Generate static files</span></span><br><span class=\"line\"></span><br><span class=\"line\">``` bash</span><br><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"_content":"# java8函数设计\n## 在filter中根据Key去重的函数 StreamUtil.distinctByKey()\n\n\n### 具体使用方法\n\n- 该函数用于在filter中根据传入参数的某一属性进行过滤，以保证在收集为map的情况下不会出现重复主键\n\n```java\nList<entry<string, string=\"\">&gt; simpleList = baseProjects.stream()\n                .filter(StreamUtil.distinctByKey(BaseProject::getTypeDic))\n                .map(StreamUtil.entry(BaseProject::getTypeDic, BaseProject::getTypeStr))\n                .collect(Collectors.toList());\n``` \n\n\n### 接口设计\n```java\n    /**\n     * <h3>distinctByKey</h3>\n     * <p>可用于在filter中根据属性过滤</p>\n     *\n     * @param function 接受一个 接受 类型A 返回 类型B 的函数式接口\n     * @return Predicate 返回一个 接受 类型A 返回 Boolean型 的函数式接口\n     */\n    public static <t> Predicate<t> distinctByKey(Function<!--? super T, ?--> function) {\n        Map filterMap = Maps.newConcurrentMap();\n\n        return t -&gt; filterMap.putIfAbsent(function.apply(t), Boolean.TRUE) == null;\n    }\n```\n\n### 设计思路\n\n1. 观察Stream.filter()接口\n2. 对接Stream.filter()接口\n3. 实现去重功能\n4. 参数优化\n\n### 开始编写\n\n####  观察Stream.filter()接口 &amp;&amp; 对接Stream.filter()接口\n\n Stream.filter()接口:`Stream<t> filter(Predicate<!--? super T--> predicate)`\n\n\n 首先可以看到filter接口需要接收一个类型为`Predicate<!--? super T-->`的函数,这个函数接受一个参数返回一个boolean类型。\n\n根据以上信息先写一个函数出来\n```java\npublic static <e> Predicate<e> distinctByKey2() {\n        return new Predicate<e>() {\n            @Override\n            public boolean test(E e) {\n                return false;\n            }\n        };\n    }\n\n```\n\n这个函数虽然可以被filter正常接收，但是由于没有形参，因此无法传递参数\n```java\n public static void main(String[] args) {\n        Lists.newArrayList()\n                .stream()\n                .filter(StreamUtil.distinctByKey2())\n                .collect(Collectors.toList());\n    }\n```\n\n现在与预期的效果比对一下\n| 对比  | 函数 |\n| :-- | - |\n| 目前效果 | `.filter(StreamUtil.distinctByKey2())` |\n| 预期的效果 | `.filter(StreamUtil.distinctByKey2(Xxxxx:getId))` |\n有点不对？！这个函数虽然可以被filter正常接收，但是去无法传入参数。因此要给`distinctByKey2()`方法加上传入的参数。\n通过观察预期效果，是需要传入的参数应该是一个函数的，这个函数接收一个`T类型`参数，返回一个`不知道什么类型`的参数。\n`Function<t, r=\"\">`函数接收一个T类型，返回一个R类型，可以满足这个需求。\n继续观察预期效果，这个`不知道什么类型的参数`实际上就是`distinctByKey2方法中new出来Predicate<e>#test(E e)`中的那个e，说人话就是`Function<t,r>`中的R在此处就是`Predicate<e>`中的E。\n那么补上我们的形参\n```java\npublic static <e,r> Predicate<e> distinctByKey2(Function<e,r> function) {\n        return new Predicate<e>() {\n            @Override\n            public boolean test(E t) {\n\n                return false;\n            }\n        };\n    }\n```\n\n#### 实现去重功能\n现在与预期效果一致了，需要实现去重功能 去重功能可以用Set或者ConcurrentMap实现\n使用ConcurrentMap存储function返回值的状态\n根据`ConcurrentMap.putIfAbsent(xxx)`的特性 如果map中已经有同样的key和value就返回null，根据返回值是否为null来判断是否需要被过滤\n\n```java\n   public static <e,r> Predicate<e> distinctByKey2(Function<e,r> function) {\n\n        Map filterMap = Maps.newConcurrentMap();\n\n        return new Predicate<e>() {\n            @Override\n            public boolean test(E t) {\n                // 调用方传入函数的结果\n                R apply = function.apply(t);\n                // putIfAbsent 在首次关联K,V时返回null 非首次的时候不执行put()方法 直接返回之前的值\n                Boolean isNullIsDuplicate = filterMap.putIfAbsent(apply, Boolean.TRUE);\n                // isNullIsDuplicate==null时 K就没重复 函数返回true\n                return isNullIsDuplicate == null;\n            }\n        };\n    }\n```\n\n\n#### 参数优化\n\n把匿名内部类使用lambda替换掉，在把冗余代码inline，最后调整一下泛型参数\n    \n    在上面的例子中`Function<e,r>`中\n    R是调用者函数的返回值类型，仅仅被当做key使用，本身是什么类型不重要，因此可以直接去掉这个R泛型，由?代替\n    E是调用者函数的形参类型，函数调用方在函数中可能会显式声明参数类型`[注1]`，以达到强转形参类型的目的，因此将E修改为 <!--? super E-->\n    \n```java\n public static <e> Predicate<e> distinctByKey2(Function<!--? super E, ?--> function) {\n        Map filterMap = Maps.newConcurrentMap();\n\n        return e -&gt; filterMap.putIfAbsent(function.apply(e), Boolean.TRUE) == null;\n    }\n    \n //[注1] \n public static void main(String[] args) {\n        List collect = Lists.newArrayList()\n                .stream()\n                // 显式强转形参类型\n                .filter(StreamUtil.distinctByKey2(baseEntity -&gt; baseEntity))\n                .collect(Collectors.toList());\n    }\n```\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/java8函数设计[1]-在filter中根据Key去重的函数.md","raw":"# java8函数设计\n## 在filter中根据Key去重的函数 StreamUtil.distinctByKey()\n\n\n### 具体使用方法\n\n- 该函数用于在filter中根据传入参数的某一属性进行过滤，以保证在收集为map的情况下不会出现重复主键\n\n```java\nList<entry<string, string=\"\">&gt; simpleList = baseProjects.stream()\n                .filter(StreamUtil.distinctByKey(BaseProject::getTypeDic))\n                .map(StreamUtil.entry(BaseProject::getTypeDic, BaseProject::getTypeStr))\n                .collect(Collectors.toList());\n``` \n\n\n### 接口设计\n```java\n    /**\n     * <h3>distinctByKey</h3>\n     * <p>可用于在filter中根据属性过滤</p>\n     *\n     * @param function 接受一个 接受 类型A 返回 类型B 的函数式接口\n     * @return Predicate 返回一个 接受 类型A 返回 Boolean型 的函数式接口\n     */\n    public static <t> Predicate<t> distinctByKey(Function<!--? super T, ?--> function) {\n        Map filterMap = Maps.newConcurrentMap();\n\n        return t -&gt; filterMap.putIfAbsent(function.apply(t), Boolean.TRUE) == null;\n    }\n```\n\n### 设计思路\n\n1. 观察Stream.filter()接口\n2. 对接Stream.filter()接口\n3. 实现去重功能\n4. 参数优化\n\n### 开始编写\n\n####  观察Stream.filter()接口 &amp;&amp; 对接Stream.filter()接口\n\n Stream.filter()接口:`Stream<t> filter(Predicate<!--? super T--> predicate)`\n\n\n 首先可以看到filter接口需要接收一个类型为`Predicate<!--? super T-->`的函数,这个函数接受一个参数返回一个boolean类型。\n\n根据以上信息先写一个函数出来\n```java\npublic static <e> Predicate<e> distinctByKey2() {\n        return new Predicate<e>() {\n            @Override\n            public boolean test(E e) {\n                return false;\n            }\n        };\n    }\n\n```\n\n这个函数虽然可以被filter正常接收，但是由于没有形参，因此无法传递参数\n```java\n public static void main(String[] args) {\n        Lists.newArrayList()\n                .stream()\n                .filter(StreamUtil.distinctByKey2())\n                .collect(Collectors.toList());\n    }\n```\n\n现在与预期的效果比对一下\n| 对比  | 函数 |\n| :-- | - |\n| 目前效果 | `.filter(StreamUtil.distinctByKey2())` |\n| 预期的效果 | `.filter(StreamUtil.distinctByKey2(Xxxxx:getId))` |\n有点不对？！这个函数虽然可以被filter正常接收，但是去无法传入参数。因此要给`distinctByKey2()`方法加上传入的参数。\n通过观察预期效果，是需要传入的参数应该是一个函数的，这个函数接收一个`T类型`参数，返回一个`不知道什么类型`的参数。\n`Function<t, r=\"\">`函数接收一个T类型，返回一个R类型，可以满足这个需求。\n继续观察预期效果，这个`不知道什么类型的参数`实际上就是`distinctByKey2方法中new出来Predicate<e>#test(E e)`中的那个e，说人话就是`Function<t,r>`中的R在此处就是`Predicate<e>`中的E。\n那么补上我们的形参\n```java\npublic static <e,r> Predicate<e> distinctByKey2(Function<e,r> function) {\n        return new Predicate<e>() {\n            @Override\n            public boolean test(E t) {\n\n                return false;\n            }\n        };\n    }\n```\n\n#### 实现去重功能\n现在与预期效果一致了，需要实现去重功能 去重功能可以用Set或者ConcurrentMap实现\n使用ConcurrentMap存储function返回值的状态\n根据`ConcurrentMap.putIfAbsent(xxx)`的特性 如果map中已经有同样的key和value就返回null，根据返回值是否为null来判断是否需要被过滤\n\n```java\n   public static <e,r> Predicate<e> distinctByKey2(Function<e,r> function) {\n\n        Map filterMap = Maps.newConcurrentMap();\n\n        return new Predicate<e>() {\n            @Override\n            public boolean test(E t) {\n                // 调用方传入函数的结果\n                R apply = function.apply(t);\n                // putIfAbsent 在首次关联K,V时返回null 非首次的时候不执行put()方法 直接返回之前的值\n                Boolean isNullIsDuplicate = filterMap.putIfAbsent(apply, Boolean.TRUE);\n                // isNullIsDuplicate==null时 K就没重复 函数返回true\n                return isNullIsDuplicate == null;\n            }\n        };\n    }\n```\n\n\n#### 参数优化\n\n把匿名内部类使用lambda替换掉，在把冗余代码inline，最后调整一下泛型参数\n    \n    在上面的例子中`Function<e,r>`中\n    R是调用者函数的返回值类型，仅仅被当做key使用，本身是什么类型不重要，因此可以直接去掉这个R泛型，由?代替\n    E是调用者函数的形参类型，函数调用方在函数中可能会显式声明参数类型`[注1]`，以达到强转形参类型的目的，因此将E修改为 <!--? super E-->\n    \n```java\n public static <e> Predicate<e> distinctByKey2(Function<!--? super E, ?--> function) {\n        Map filterMap = Maps.newConcurrentMap();\n\n        return e -&gt; filterMap.putIfAbsent(function.apply(e), Boolean.TRUE) == null;\n    }\n    \n //[注1] \n public static void main(String[] args) {\n        List collect = Lists.newArrayList()\n                .stream()\n                // 显式强转形参类型\n                .filter(StreamUtil.distinctByKey2(baseEntity -&gt; baseEntity))\n                .collect(Collectors.toList());\n    }\n```\n\n\n\n\n\n\n\n\n\n\n","slug":"java8函数设计[1]-在filter中根据Key去重的函数","published":1,"date":"2020-01-06T05:07:36.996Z","updated":"2019-12-19T11:45:25.731Z","title":"java8函数设计[1]-在filter中根据Key去重的函数","comments":1,"layout":"post","photos":[],"link":"","_id":"ck520ml9500039covczfubi1p","content":"<h1 id=\"java8函数设计\"><a href=\"#java8函数设计\" class=\"headerlink\" title=\"java8函数设计\"></a>java8函数设计</h1><h2 id=\"在filter中根据Key去重的函数-StreamUtil-distinctByKey\"><a href=\"#在filter中根据Key去重的函数-StreamUtil-distinctByKey\" class=\"headerlink\" title=\"在filter中根据Key去重的函数 StreamUtil.distinctByKey()\"></a>在filter中根据Key去重的函数 StreamUtil.distinctByKey()</h2><h3 id=\"具体使用方法\"><a href=\"#具体使用方法\" class=\"headerlink\" title=\"具体使用方法\"></a>具体使用方法</h3><ul>\n<li>该函数用于在filter中根据传入参数的某一属性进行过滤，以保证在收集为map的情况下不会出现重复主键</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;entry&lt;string, string=<span class=\"string\">\"\"</span>&gt;&amp;gt; simpleList = baseProjects.stream()</span><br><span class=\"line\">                .filter(StreamUtil.distinctByKey(BaseProject::getTypeDic))</span><br><span class=\"line\">                .map(StreamUtil.entry(BaseProject::getTypeDic, BaseProject::getTypeStr))</span><br><span class=\"line\">                .collect(Collectors.toList());</span><br><span class=\"line\">``` </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">### 接口设计</span><br><span class=\"line\">```java</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;h3&gt;distinctByKey&lt;/h3&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;可用于在filter中根据属性过滤&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> function 接受一个 接受 类型A 返回 类型B 的函数式接口</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Predicate 返回一个 接受 类型A 返回 Boolean型 的函数式接口</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;t&gt; <span class=\"function\">Predicate&lt;t&gt; <span class=\"title\">distinctByKey</span><span class=\"params\">(Function&lt;!--? <span class=\"keyword\">super</span> T, ?--&gt; function)</span> </span>&#123;</span><br><span class=\"line\">        Map filterMap = Maps.newConcurrentMap();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> t -&amp;gt; filterMap.putIfAbsent(function.apply(t), Boolean.TRUE) == <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"设计思路\"><a href=\"#设计思路\" class=\"headerlink\" title=\"设计思路\"></a>设计思路</h3><ol>\n<li>观察Stream.filter()接口</li>\n<li>对接Stream.filter()接口</li>\n<li>实现去重功能</li>\n<li>参数优化</li>\n</ol>\n<h3 id=\"开始编写\"><a href=\"#开始编写\" class=\"headerlink\" title=\"开始编写\"></a>开始编写</h3><h4 id=\"观察Stream-filter-接口-amp-amp-对接Stream-filter-接口\"><a href=\"#观察Stream-filter-接口-amp-amp-对接Stream-filter-接口\" class=\"headerlink\" title=\"观察Stream.filter()接口 &amp;&amp; 对接Stream.filter()接口\"></a>观察Stream.filter()接口 &amp;&amp; 对接Stream.filter()接口</h4><p> Stream.filter()接口:<code>Stream&lt;t&gt; filter(Predicate&lt;!--? super T--&gt; predicate)</code></p>\n<p> 首先可以看到filter接口需要接收一个类型为<code>Predicate&lt;!--? super T--&gt;</code>的函数,这个函数接受一个参数返回一个boolean类型。</p>\n<p>根据以上信息先写一个函数出来</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;e&gt; <span class=\"function\">Predicate&lt;e&gt; <span class=\"title\">distinctByKey2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Predicate&lt;e&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(E e)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>这个函数虽然可以被filter正常接收，但是由于没有形参，因此无法传递参数</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">       Lists.newArrayList()</span><br><span class=\"line\">               .stream()</span><br><span class=\"line\">               .filter(StreamUtil.distinctByKey2())</span><br><span class=\"line\">               .collect(Collectors.toList());</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p>现在与预期的效果比对一下<br>| 对比  | 函数 |<br>| :– | - |<br>| 目前效果 | <code>.filter(StreamUtil.distinctByKey2())</code> |<br>| 预期的效果 | <code>.filter(StreamUtil.distinctByKey2(Xxxxx:getId))</code> |<br>有点不对？！这个函数虽然可以被filter正常接收，但是去无法传入参数。因此要给<code>distinctByKey2()</code>方法加上传入的参数。<br>通过观察预期效果，是需要传入的参数应该是一个函数的，这个函数接收一个<code>T类型</code>参数，返回一个<code>不知道什么类型</code>的参数。<br><code>Function&lt;t, r=&quot;&quot;&gt;</code>函数接收一个T类型，返回一个R类型，可以满足这个需求。<br>继续观察预期效果，这个<code>不知道什么类型的参数</code>实际上就是<code>distinctByKey2方法中new出来Predicate&lt;e&gt;#test(E e)</code>中的那个e，说人话就是<code>Function&lt;t,r&gt;</code>中的R在此处就是<code>Predicate&lt;e&gt;</code>中的E。<br>那么补上我们的形参</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;e,r&gt; <span class=\"function\">Predicate&lt;e&gt; <span class=\"title\">distinctByKey2</span><span class=\"params\">(Function&lt;e,r&gt; function)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Predicate&lt;e&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(E t)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"实现去重功能\"><a href=\"#实现去重功能\" class=\"headerlink\" title=\"实现去重功能\"></a>实现去重功能</h4><p>现在与预期效果一致了，需要实现去重功能 去重功能可以用Set或者ConcurrentMap实现<br>使用ConcurrentMap存储function返回值的状态<br>根据<code>ConcurrentMap.putIfAbsent(xxx)</code>的特性 如果map中已经有同样的key和value就返回null，根据返回值是否为null来判断是否需要被过滤</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;e,r&gt; <span class=\"function\">Predicate&lt;e&gt; <span class=\"title\">distinctByKey2</span><span class=\"params\">(Function&lt;e,r&gt; function)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">     Map filterMap = Maps.newConcurrentMap();</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Predicate&lt;e&gt;() &#123;</span><br><span class=\"line\">         <span class=\"meta\">@Override</span></span><br><span class=\"line\">         <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(E t)</span> </span>&#123;</span><br><span class=\"line\">             <span class=\"comment\">// 调用方传入函数的结果</span></span><br><span class=\"line\">             R apply = function.apply(t);</span><br><span class=\"line\">             <span class=\"comment\">// putIfAbsent 在首次关联K,V时返回null 非首次的时候不执行put()方法 直接返回之前的值</span></span><br><span class=\"line\">             Boolean isNullIsDuplicate = filterMap.putIfAbsent(apply, Boolean.TRUE);</span><br><span class=\"line\">             <span class=\"comment\">// isNullIsDuplicate==null时 K就没重复 函数返回true</span></span><br><span class=\"line\">             <span class=\"keyword\">return</span> isNullIsDuplicate == <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"参数优化\"><a href=\"#参数优化\" class=\"headerlink\" title=\"参数优化\"></a>参数优化</h4><p>把匿名内部类使用lambda替换掉，在把冗余代码inline，最后调整一下泛型参数</p>\n<pre><code>在上面的例子中`Function&lt;e,r&gt;`中\nR是调用者函数的返回值类型，仅仅被当做key使用，本身是什么类型不重要，因此可以直接去掉这个R泛型，由?代替\nE是调用者函数的形参类型，函数调用方在函数中可能会显式声明参数类型`[注1]`，以达到强转形参类型的目的，因此将E修改为 &lt;!--? super E--&gt;</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;e&gt; <span class=\"function\">Predicate&lt;e&gt; <span class=\"title\">distinctByKey2</span><span class=\"params\">(Function&lt;!--? <span class=\"keyword\">super</span> E, ?--&gt; function)</span> </span>&#123;</span><br><span class=\"line\">       Map filterMap = Maps.newConcurrentMap();</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">return</span> e -&amp;gt; filterMap.putIfAbsent(function.apply(e), Boolean.TRUE) == <span class=\"keyword\">null</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\"><span class=\"comment\">//[注1] </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">       List collect = Lists.newArrayList()</span><br><span class=\"line\">               .stream()</span><br><span class=\"line\">               <span class=\"comment\">// 显式强转形参类型</span></span><br><span class=\"line\">               .filter(StreamUtil.distinctByKey2(baseEntity -&amp;gt; baseEntity))</span><br><span class=\"line\">               .collect(Collectors.toList());</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"java8函数设计\"><a href=\"#java8函数设计\" class=\"headerlink\" title=\"java8函数设计\"></a>java8函数设计</h1><h2 id=\"在filter中根据Key去重的函数-StreamUtil-distinctByKey\"><a href=\"#在filter中根据Key去重的函数-StreamUtil-distinctByKey\" class=\"headerlink\" title=\"在filter中根据Key去重的函数 StreamUtil.distinctByKey()\"></a>在filter中根据Key去重的函数 StreamUtil.distinctByKey()</h2><h3 id=\"具体使用方法\"><a href=\"#具体使用方法\" class=\"headerlink\" title=\"具体使用方法\"></a>具体使用方法</h3><ul>\n<li>该函数用于在filter中根据传入参数的某一属性进行过滤，以保证在收集为map的情况下不会出现重复主键</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">List&lt;entry&lt;string, string=<span class=\"string\">\"\"</span>&gt;&amp;gt; simpleList = baseProjects.stream()</span><br><span class=\"line\">                .filter(StreamUtil.distinctByKey(BaseProject::getTypeDic))</span><br><span class=\"line\">                .map(StreamUtil.entry(BaseProject::getTypeDic, BaseProject::getTypeStr))</span><br><span class=\"line\">                .collect(Collectors.toList());</span><br><span class=\"line\">``` </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">### 接口设计</span><br><span class=\"line\">```java</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;h3&gt;distinctByKey&lt;/h3&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     * &lt;p&gt;可用于在filter中根据属性过滤&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> function 接受一个 接受 类型A 返回 类型B 的函数式接口</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> Predicate 返回一个 接受 类型A 返回 Boolean型 的函数式接口</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;t&gt; <span class=\"function\">Predicate&lt;t&gt; <span class=\"title\">distinctByKey</span><span class=\"params\">(Function&lt;!--? <span class=\"keyword\">super</span> T, ?--&gt; function)</span> </span>&#123;</span><br><span class=\"line\">        Map filterMap = Maps.newConcurrentMap();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> t -&amp;gt; filterMap.putIfAbsent(function.apply(t), Boolean.TRUE) == <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"设计思路\"><a href=\"#设计思路\" class=\"headerlink\" title=\"设计思路\"></a>设计思路</h3><ol>\n<li>观察Stream.filter()接口</li>\n<li>对接Stream.filter()接口</li>\n<li>实现去重功能</li>\n<li>参数优化</li>\n</ol>\n<h3 id=\"开始编写\"><a href=\"#开始编写\" class=\"headerlink\" title=\"开始编写\"></a>开始编写</h3><h4 id=\"观察Stream-filter-接口-amp-amp-对接Stream-filter-接口\"><a href=\"#观察Stream-filter-接口-amp-amp-对接Stream-filter-接口\" class=\"headerlink\" title=\"观察Stream.filter()接口 &amp;&amp; 对接Stream.filter()接口\"></a>观察Stream.filter()接口 &amp;&amp; 对接Stream.filter()接口</h4><p> Stream.filter()接口:<code>Stream&lt;t&gt; filter(Predicate&lt;!--? super T--&gt; predicate)</code></p>\n<p> 首先可以看到filter接口需要接收一个类型为<code>Predicate&lt;!--? super T--&gt;</code>的函数,这个函数接受一个参数返回一个boolean类型。</p>\n<p>根据以上信息先写一个函数出来</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;e&gt; <span class=\"function\">Predicate&lt;e&gt; <span class=\"title\">distinctByKey2</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Predicate&lt;e&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(E e)</span> </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>这个函数虽然可以被filter正常接收，但是由于没有形参，因此无法传递参数</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">       Lists.newArrayList()</span><br><span class=\"line\">               .stream()</span><br><span class=\"line\">               .filter(StreamUtil.distinctByKey2())</span><br><span class=\"line\">               .collect(Collectors.toList());</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n<p>现在与预期的效果比对一下<br>| 对比  | 函数 |<br>| :– | - |<br>| 目前效果 | <code>.filter(StreamUtil.distinctByKey2())</code> |<br>| 预期的效果 | <code>.filter(StreamUtil.distinctByKey2(Xxxxx:getId))</code> |<br>有点不对？！这个函数虽然可以被filter正常接收，但是去无法传入参数。因此要给<code>distinctByKey2()</code>方法加上传入的参数。<br>通过观察预期效果，是需要传入的参数应该是一个函数的，这个函数接收一个<code>T类型</code>参数，返回一个<code>不知道什么类型</code>的参数。<br><code>Function&lt;t, r=&quot;&quot;&gt;</code>函数接收一个T类型，返回一个R类型，可以满足这个需求。<br>继续观察预期效果，这个<code>不知道什么类型的参数</code>实际上就是<code>distinctByKey2方法中new出来Predicate&lt;e&gt;#test(E e)</code>中的那个e，说人话就是<code>Function&lt;t,r&gt;</code>中的R在此处就是<code>Predicate&lt;e&gt;</code>中的E。<br>那么补上我们的形参</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;e,r&gt; <span class=\"function\">Predicate&lt;e&gt; <span class=\"title\">distinctByKey2</span><span class=\"params\">(Function&lt;e,r&gt; function)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Predicate&lt;e&gt;() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(E t)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"实现去重功能\"><a href=\"#实现去重功能\" class=\"headerlink\" title=\"实现去重功能\"></a>实现去重功能</h4><p>现在与预期效果一致了，需要实现去重功能 去重功能可以用Set或者ConcurrentMap实现<br>使用ConcurrentMap存储function返回值的状态<br>根据<code>ConcurrentMap.putIfAbsent(xxx)</code>的特性 如果map中已经有同样的key和value就返回null，根据返回值是否为null来判断是否需要被过滤</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;e,r&gt; <span class=\"function\">Predicate&lt;e&gt; <span class=\"title\">distinctByKey2</span><span class=\"params\">(Function&lt;e,r&gt; function)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">     Map filterMap = Maps.newConcurrentMap();</span><br><span class=\"line\"></span><br><span class=\"line\">     <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Predicate&lt;e&gt;() &#123;</span><br><span class=\"line\">         <span class=\"meta\">@Override</span></span><br><span class=\"line\">         <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(E t)</span> </span>&#123;</span><br><span class=\"line\">             <span class=\"comment\">// 调用方传入函数的结果</span></span><br><span class=\"line\">             R apply = function.apply(t);</span><br><span class=\"line\">             <span class=\"comment\">// putIfAbsent 在首次关联K,V时返回null 非首次的时候不执行put()方法 直接返回之前的值</span></span><br><span class=\"line\">             Boolean isNullIsDuplicate = filterMap.putIfAbsent(apply, Boolean.TRUE);</span><br><span class=\"line\">             <span class=\"comment\">// isNullIsDuplicate==null时 K就没重复 函数返回true</span></span><br><span class=\"line\">             <span class=\"keyword\">return</span> isNullIsDuplicate == <span class=\"keyword\">null</span>;</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n\n\n<h4 id=\"参数优化\"><a href=\"#参数优化\" class=\"headerlink\" title=\"参数优化\"></a>参数优化</h4><p>把匿名内部类使用lambda替换掉，在把冗余代码inline，最后调整一下泛型参数</p>\n<pre><code>在上面的例子中`Function&lt;e,r&gt;`中\nR是调用者函数的返回值类型，仅仅被当做key使用，本身是什么类型不重要，因此可以直接去掉这个R泛型，由?代替\nE是调用者函数的形参类型，函数调用方在函数中可能会显式声明参数类型`[注1]`，以达到强转形参类型的目的，因此将E修改为 &lt;!--? super E--&gt;</code></pre><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> &lt;e&gt; <span class=\"function\">Predicate&lt;e&gt; <span class=\"title\">distinctByKey2</span><span class=\"params\">(Function&lt;!--? <span class=\"keyword\">super</span> E, ?--&gt; function)</span> </span>&#123;</span><br><span class=\"line\">       Map filterMap = Maps.newConcurrentMap();</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"keyword\">return</span> e -&amp;gt; filterMap.putIfAbsent(function.apply(e), Boolean.TRUE) == <span class=\"keyword\">null</span>;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\"><span class=\"comment\">//[注1] </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">       List collect = Lists.newArrayList()</span><br><span class=\"line\">               .stream()</span><br><span class=\"line\">               <span class=\"comment\">// 显式强转形参类型</span></span><br><span class=\"line\">               .filter(StreamUtil.distinctByKey2(baseEntity -&amp;gt; baseEntity))</span><br><span class=\"line\">               .collect(Collectors.toList());</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n\n\n\n\n\n\n"},{"_content":"# 好用常用人人都要会的最基本的Maven插件收集\n大部分的插件其实都可以从[MAVEN官方的可用插件列表]( https://maven.apache.org/plugins/index.html)中直接找到\n在这里取了比较常用并且实用的几个插件做一点说明\n大多数使用场景无非是：\n- 要自定义打包的名称\n- 要将打包后的jar包自动复制到某处\n- 要将外置lib目录和maven依赖一起打进去\n- 要根据环境复制对应的配置文件\n\n这里选出的插件足以应对大部分情况了 \n## Maven依赖管理插件[maven-dependency-plugin](https://maven.apache.org/plugins/maven-dependency-plugin)\n\n主要用于管理依赖，比如引入某个特殊的jar包，或者从某个jar包中提取文件\n`tree`命令和`display-ancestors`命令在搭建工程时是比较好用的，可以很方便的找出重复依赖项，保证依赖版本一致\n\n### 常用功能\n- list 列出的依赖关系\n- tree 以树型结构列出的依赖关系\n- copy-dependencies 拷贝某个依赖项\n- unpack-dependencies 解包某个依赖项\n- display-ancestors 显示所有父依赖\n\n\n\n## Maven构建小助手 [build-helper-maven-plugin](https://www.mojohaus.org/build-helper-maven-plugin/)\n\n主要用于为POM生成各种属性,比如打包时间、IP地址之类的，功能比较多就不上代码了。\n\n###  常用功能\n- add-source 将更多`source`目录添加到POM\n- add-test-source 将更多`test source`目录添加到POM\n- add-resource 将更多`resource directories`目录添加到POM\n- add-test-resource 将更多`test resource directories`目录添加到POM\n- attach-artifact Attach additional artifacts to be installed and deployed.  不知道???干啥的\n- maven-version 获取Maven核心版本\n- regex-property 使用正则生成某个属性\n- regex-properties使用正则生成属性\n- released-version Resolve the latest released version of this project.\n- parse-version Parse the version into different properties.\n- remove-project-artifact 用于在构建过程中删除某个作为依赖的项目以节省空间\n- reserve-network-port 保留一个未使用的端口号的随机列表\n- local-ip 获取当前主机IP\n- cpu-count 获取当前主机CPU核心数\n- timestamp-property 生成一个事件放入指定属性中 常用于在包名上附加打包时间\n- uptodate-property 检查某个属性根据检查结果设置其他属性\n- uptodate-properties 检查多个属性根据检查结果设置多个其他属性\n- rootlocation 重定义多模块构建的根目录\n\n## 复制并重命名插件 [Copy Rename Maven Plugin](https://coderplus.github.io/copy-rename-maven-plugin/)\n\n功能字如其名,就是用来复制和重命名的，可以用来复制打包好的jar包，也可以在打包过程中复制文件。\n  \n### 常用功能\n- copy 复制\n- rename 重命名\n- 没了\n\n### 一个小栗子\n```xml\n<plugin>\n    <groupid>com.coderplus.maven.plugins</groupid>\n    <artifactid>copy-rename-maven-plugin</artifactid>\n    <version>1.0</version>\n    <executions>\n        <execution>\n            <id>copy-file</id>\n            <phase>package</phase>\n            <goals>\n                <goal>copy</goal>\n            </goals>\n            <configuration>\n                <sourcefile>target/${project.build.finalName}.jar</sourcefile>\n                <destinationfile>/xingyi/${project.build.finalName}.jar</destinationfile>\n            </configuration>\n        </execution>\n    </executions>\n</plugin>\n```\n\n\n## Maven编译插件 [maven-compiler-plugin](https://maven.apache.org/plugins/maven-compiler-plugin/)\n\n主要用于设定编译环境和编译器的属性,是比较基础的插件\n\n```xml\n <plugin>\n    <groupid>org.apache.maven.plugins</groupid>\n    <artifactid>maven-compiler-plugin</artifactid>\n    <version>3.8.0</version>\n    <configuration>\n        <!-- 一般而言，target与source是保持一致的，但是，有时候为了让程序能在其他版本的jdk中运行(对于低版本目标jdk，源代码中不能使用低版本jdk中不支持的语法 )，会存在target不同于source的情况 -->\n        <!-- 源代码使用的JDK版本 -->\n        <source>1.8 \n        <!-- 需要生成的目标class文件的编译版本 -->\n        <target>1.8</target> \n        <!-- 字符集编码 -->\n        <encoding>UTF-8</encoding>\n        <verbose>true</verbose>\n        <showwarnings>true</showwarnings>\n        <!-- 要使compilerVersion标签生效，还需要将fork设为true，用于明确表示编译版本配置的可用 -->\n        <fork>true</fork>\n        <!-- 指定插件将使用的编译器的版本 -->\n        <compilerversion>1.5</compilerversion>\n        <!-- 编译器使用的初始内存 -->\n        <meminitial>128m</meminitial>\n        <!-- 编译器使用的最大内存 -->\n        <maxmem>512m</maxmem>\n        <!--使用指定的javac命令，例如：<executable>${JAVA_1_4_HOME}/bin/javac</executable> -->\n        <executable><!-- path-to-javac --></executable>\n        <!-- 跳过测试 -->\n        <skiptests>true</skiptests>\n        <!-- 这个选项用来传递编译器自身不包含但是却支持的参数选项-->\n        <compilerargument>-verbose -bootclasspath ${java.home}\\lib\\rt.jar</compilerargument>\n    </configuration>\n</plugin>\n```\n\n###  SpringBootMaven插件[spring-boot-maven-plugin](https://www.mojohaus.org/build-helper-maven-plugin/)\n\n\n####  configuration.layout=ZIP 的用处\n\n###### 资料\n- [How to really package and deploy a Spring Boot application](\"http://weyprecht.de/2018/05/02/how-to-really-package-and-deploy-a-spring-boot-application/\")\n\n###### 作用\n将该工程的布局改为ZIP布局，所有的lib将外置到jar包外，在打包时将com.example:demo下的所有依赖放入外置的lib目录\n\n```xml\n    <build>\n      <plugins>\n        <plugin>\n          <groupid>org.springframework.boot</groupid>\n          <artifactid>spring-boot-maven-plugin</artifactid>\n          <configuration>\n            <layout>ZIP</layout>\n          </configuration>\n          <includes>\n            <include>\n           \t\t<groupid>com.example</groupid>\n            \t<artifactid>demo</artifactid>\n            </include>\n          </includes>\n        </plugin>\n      </plugins>\n    </build>\n```\n","source":"_posts/好用常用人人都要会的最基本的Maven插件收集.md","raw":"# 好用常用人人都要会的最基本的Maven插件收集\n大部分的插件其实都可以从[MAVEN官方的可用插件列表]( https://maven.apache.org/plugins/index.html)中直接找到\n在这里取了比较常用并且实用的几个插件做一点说明\n大多数使用场景无非是：\n- 要自定义打包的名称\n- 要将打包后的jar包自动复制到某处\n- 要将外置lib目录和maven依赖一起打进去\n- 要根据环境复制对应的配置文件\n\n这里选出的插件足以应对大部分情况了 \n## Maven依赖管理插件[maven-dependency-plugin](https://maven.apache.org/plugins/maven-dependency-plugin)\n\n主要用于管理依赖，比如引入某个特殊的jar包，或者从某个jar包中提取文件\n`tree`命令和`display-ancestors`命令在搭建工程时是比较好用的，可以很方便的找出重复依赖项，保证依赖版本一致\n\n### 常用功能\n- list 列出的依赖关系\n- tree 以树型结构列出的依赖关系\n- copy-dependencies 拷贝某个依赖项\n- unpack-dependencies 解包某个依赖项\n- display-ancestors 显示所有父依赖\n\n\n\n## Maven构建小助手 [build-helper-maven-plugin](https://www.mojohaus.org/build-helper-maven-plugin/)\n\n主要用于为POM生成各种属性,比如打包时间、IP地址之类的，功能比较多就不上代码了。\n\n###  常用功能\n- add-source 将更多`source`目录添加到POM\n- add-test-source 将更多`test source`目录添加到POM\n- add-resource 将更多`resource directories`目录添加到POM\n- add-test-resource 将更多`test resource directories`目录添加到POM\n- attach-artifact Attach additional artifacts to be installed and deployed.  不知道???干啥的\n- maven-version 获取Maven核心版本\n- regex-property 使用正则生成某个属性\n- regex-properties使用正则生成属性\n- released-version Resolve the latest released version of this project.\n- parse-version Parse the version into different properties.\n- remove-project-artifact 用于在构建过程中删除某个作为依赖的项目以节省空间\n- reserve-network-port 保留一个未使用的端口号的随机列表\n- local-ip 获取当前主机IP\n- cpu-count 获取当前主机CPU核心数\n- timestamp-property 生成一个事件放入指定属性中 常用于在包名上附加打包时间\n- uptodate-property 检查某个属性根据检查结果设置其他属性\n- uptodate-properties 检查多个属性根据检查结果设置多个其他属性\n- rootlocation 重定义多模块构建的根目录\n\n## 复制并重命名插件 [Copy Rename Maven Plugin](https://coderplus.github.io/copy-rename-maven-plugin/)\n\n功能字如其名,就是用来复制和重命名的，可以用来复制打包好的jar包，也可以在打包过程中复制文件。\n  \n### 常用功能\n- copy 复制\n- rename 重命名\n- 没了\n\n### 一个小栗子\n```xml\n<plugin>\n    <groupid>com.coderplus.maven.plugins</groupid>\n    <artifactid>copy-rename-maven-plugin</artifactid>\n    <version>1.0</version>\n    <executions>\n        <execution>\n            <id>copy-file</id>\n            <phase>package</phase>\n            <goals>\n                <goal>copy</goal>\n            </goals>\n            <configuration>\n                <sourcefile>target/${project.build.finalName}.jar</sourcefile>\n                <destinationfile>/xingyi/${project.build.finalName}.jar</destinationfile>\n            </configuration>\n        </execution>\n    </executions>\n</plugin>\n```\n\n\n## Maven编译插件 [maven-compiler-plugin](https://maven.apache.org/plugins/maven-compiler-plugin/)\n\n主要用于设定编译环境和编译器的属性,是比较基础的插件\n\n```xml\n <plugin>\n    <groupid>org.apache.maven.plugins</groupid>\n    <artifactid>maven-compiler-plugin</artifactid>\n    <version>3.8.0</version>\n    <configuration>\n        <!-- 一般而言，target与source是保持一致的，但是，有时候为了让程序能在其他版本的jdk中运行(对于低版本目标jdk，源代码中不能使用低版本jdk中不支持的语法 )，会存在target不同于source的情况 -->\n        <!-- 源代码使用的JDK版本 -->\n        <source>1.8 \n        <!-- 需要生成的目标class文件的编译版本 -->\n        <target>1.8</target> \n        <!-- 字符集编码 -->\n        <encoding>UTF-8</encoding>\n        <verbose>true</verbose>\n        <showwarnings>true</showwarnings>\n        <!-- 要使compilerVersion标签生效，还需要将fork设为true，用于明确表示编译版本配置的可用 -->\n        <fork>true</fork>\n        <!-- 指定插件将使用的编译器的版本 -->\n        <compilerversion>1.5</compilerversion>\n        <!-- 编译器使用的初始内存 -->\n        <meminitial>128m</meminitial>\n        <!-- 编译器使用的最大内存 -->\n        <maxmem>512m</maxmem>\n        <!--使用指定的javac命令，例如：<executable>${JAVA_1_4_HOME}/bin/javac</executable> -->\n        <executable><!-- path-to-javac --></executable>\n        <!-- 跳过测试 -->\n        <skiptests>true</skiptests>\n        <!-- 这个选项用来传递编译器自身不包含但是却支持的参数选项-->\n        <compilerargument>-verbose -bootclasspath ${java.home}\\lib\\rt.jar</compilerargument>\n    </configuration>\n</plugin>\n```\n\n###  SpringBootMaven插件[spring-boot-maven-plugin](https://www.mojohaus.org/build-helper-maven-plugin/)\n\n\n####  configuration.layout=ZIP 的用处\n\n###### 资料\n- [How to really package and deploy a Spring Boot application](\"http://weyprecht.de/2018/05/02/how-to-really-package-and-deploy-a-spring-boot-application/\")\n\n###### 作用\n将该工程的布局改为ZIP布局，所有的lib将外置到jar包外，在打包时将com.example:demo下的所有依赖放入外置的lib目录\n\n```xml\n    <build>\n      <plugins>\n        <plugin>\n          <groupid>org.springframework.boot</groupid>\n          <artifactid>spring-boot-maven-plugin</artifactid>\n          <configuration>\n            <layout>ZIP</layout>\n          </configuration>\n          <includes>\n            <include>\n           \t\t<groupid>com.example</groupid>\n            \t<artifactid>demo</artifactid>\n            </include>\n          </includes>\n        </plugin>\n      </plugins>\n    </build>\n```\n","slug":"好用常用人人都要会的最基本的Maven插件收集","published":1,"date":"2020-01-06T05:10:36.228Z","updated":"2019-04-26T05:08:42.717Z","title":"好用常用人人都要会的最基本的Maven插件收集","comments":1,"layout":"post","photos":[],"link":"","_id":"ck520ml9700059cov191r3pzi","content":"<h1 id=\"好用常用人人都要会的最基本的Maven插件收集\"><a href=\"#好用常用人人都要会的最基本的Maven插件收集\" class=\"headerlink\" title=\"好用常用人人都要会的最基本的Maven插件收集\"></a>好用常用人人都要会的最基本的Maven插件收集</h1><p>大部分的插件其实都可以从<a href=\"https://maven.apache.org/plugins/index.html\" target=\"_blank\" rel=\"noopener\">MAVEN官方的可用插件列表</a>中直接找到<br>在这里取了比较常用并且实用的几个插件做一点说明<br>大多数使用场景无非是：</p>\n<ul>\n<li>要自定义打包的名称</li>\n<li>要将打包后的jar包自动复制到某处</li>\n<li>要将外置lib目录和maven依赖一起打进去</li>\n<li>要根据环境复制对应的配置文件</li>\n</ul>\n<p>这里选出的插件足以应对大部分情况了 </p>\n<h2 id=\"Maven依赖管理插件maven-dependency-plugin\"><a href=\"#Maven依赖管理插件maven-dependency-plugin\" class=\"headerlink\" title=\"Maven依赖管理插件maven-dependency-plugin\"></a>Maven依赖管理插件<a href=\"https://maven.apache.org/plugins/maven-dependency-plugin\" target=\"_blank\" rel=\"noopener\">maven-dependency-plugin</a></h2><p>主要用于管理依赖，比如引入某个特殊的jar包，或者从某个jar包中提取文件<br><code>tree</code>命令和<code>display-ancestors</code>命令在搭建工程时是比较好用的，可以很方便的找出重复依赖项，保证依赖版本一致</p>\n<h3 id=\"常用功能\"><a href=\"#常用功能\" class=\"headerlink\" title=\"常用功能\"></a>常用功能</h3><ul>\n<li>list 列出的依赖关系</li>\n<li>tree 以树型结构列出的依赖关系</li>\n<li>copy-dependencies 拷贝某个依赖项</li>\n<li>unpack-dependencies 解包某个依赖项</li>\n<li>display-ancestors 显示所有父依赖</li>\n</ul>\n<h2 id=\"Maven构建小助手-build-helper-maven-plugin\"><a href=\"#Maven构建小助手-build-helper-maven-plugin\" class=\"headerlink\" title=\"Maven构建小助手 build-helper-maven-plugin\"></a>Maven构建小助手 <a href=\"https://www.mojohaus.org/build-helper-maven-plugin/\" target=\"_blank\" rel=\"noopener\">build-helper-maven-plugin</a></h2><p>主要用于为POM生成各种属性,比如打包时间、IP地址之类的，功能比较多就不上代码了。</p>\n<h3 id=\"常用功能-1\"><a href=\"#常用功能-1\" class=\"headerlink\" title=\"常用功能\"></a>常用功能</h3><ul>\n<li>add-source 将更多<code>source</code>目录添加到POM</li>\n<li>add-test-source 将更多<code>test source</code>目录添加到POM</li>\n<li>add-resource 将更多<code>resource directories</code>目录添加到POM</li>\n<li>add-test-resource 将更多<code>test resource directories</code>目录添加到POM</li>\n<li>attach-artifact Attach additional artifacts to be installed and deployed.  不知道???干啥的</li>\n<li>maven-version 获取Maven核心版本</li>\n<li>regex-property 使用正则生成某个属性</li>\n<li>regex-properties使用正则生成属性</li>\n<li>released-version Resolve the latest released version of this project.</li>\n<li>parse-version Parse the version into different properties.</li>\n<li>remove-project-artifact 用于在构建过程中删除某个作为依赖的项目以节省空间</li>\n<li>reserve-network-port 保留一个未使用的端口号的随机列表</li>\n<li>local-ip 获取当前主机IP</li>\n<li>cpu-count 获取当前主机CPU核心数</li>\n<li>timestamp-property 生成一个事件放入指定属性中 常用于在包名上附加打包时间</li>\n<li>uptodate-property 检查某个属性根据检查结果设置其他属性</li>\n<li>uptodate-properties 检查多个属性根据检查结果设置多个其他属性</li>\n<li>rootlocation 重定义多模块构建的根目录</li>\n</ul>\n<h2 id=\"复制并重命名插件-Copy-Rename-Maven-Plugin\"><a href=\"#复制并重命名插件-Copy-Rename-Maven-Plugin\" class=\"headerlink\" title=\"复制并重命名插件 Copy Rename Maven Plugin\"></a>复制并重命名插件 <a href=\"https://coderplus.github.io/copy-rename-maven-plugin/\" target=\"_blank\" rel=\"noopener\">Copy Rename Maven Plugin</a></h2><p>功能字如其名,就是用来复制和重命名的，可以用来复制打包好的jar包，也可以在打包过程中复制文件。</p>\n<h3 id=\"常用功能-2\"><a href=\"#常用功能-2\" class=\"headerlink\" title=\"常用功能\"></a>常用功能</h3><ul>\n<li>copy 复制</li>\n<li>rename 重命名</li>\n<li>没了</li>\n</ul>\n<h3 id=\"一个小栗子\"><a href=\"#一个小栗子\" class=\"headerlink\" title=\"一个小栗子\"></a>一个小栗子</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupid</span>&gt;</span>com.coderplus.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupid</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactid</span>&gt;</span>copy-rename-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactid</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>copy-file<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>package<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>copy<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">sourcefile</span>&gt;</span>target/$&#123;project.build.finalName&#125;.jar<span class=\"tag\">&lt;/<span class=\"name\">sourcefile</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">destinationfile</span>&gt;</span>/xingyi/$&#123;project.build.finalName&#125;.jar<span class=\"tag\">&lt;/<span class=\"name\">destinationfile</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"Maven编译插件-maven-compiler-plugin\"><a href=\"#Maven编译插件-maven-compiler-plugin\" class=\"headerlink\" title=\"Maven编译插件 maven-compiler-plugin\"></a>Maven编译插件 <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/\" target=\"_blank\" rel=\"noopener\">maven-compiler-plugin</a></h2><p>主要用于设定编译环境和编译器的属性,是比较基础的插件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupid</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupid</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactid</span>&gt;</span>maven-compiler-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactid</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.8.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 一般而言，target与source是保持一致的，但是，有时候为了让程序能在其他版本的jdk中运行(对于低版本目标jdk，源代码中不能使用低版本jdk中不支持的语法 )，会存在target不同于source的情况 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 源代码使用的JDK版本 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">source</span>&gt;</span>1.8 </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 需要生成的目标class文件的编译版本 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">target</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">target</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 字符集编码 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">encoding</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">verbose</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">verbose</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">showwarnings</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">showwarnings</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 要使compilerVersion标签生效，还需要将fork设为true，用于明确表示编译版本配置的可用 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">fork</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">fork</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定插件将使用的编译器的版本 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">compilerversion</span>&gt;</span>1.5<span class=\"tag\">&lt;/<span class=\"name\">compilerversion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 编译器使用的初始内存 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">meminitial</span>&gt;</span>128m<span class=\"tag\">&lt;/<span class=\"name\">meminitial</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 编译器使用的最大内存 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">maxmem</span>&gt;</span>512m<span class=\"tag\">&lt;/<span class=\"name\">maxmem</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--使用指定的javac命令，例如：&lt;executable&gt;$&#123;JAVA_1_4_HOME&#125;/bin/javac&lt;/executable&gt; --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">executable</span>&gt;</span><span class=\"comment\">&lt;!-- path-to-javac --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">executable</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 跳过测试 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">skiptests</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">skiptests</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 这个选项用来传递编译器自身不包含但是却支持的参数选项--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">compilerargument</span>&gt;</span>-verbose -bootclasspath $&#123;java.home&#125;\\lib\\rt.jar<span class=\"tag\">&lt;/<span class=\"name\">compilerargument</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SpringBootMaven插件spring-boot-maven-plugin\"><a href=\"#SpringBootMaven插件spring-boot-maven-plugin\" class=\"headerlink\" title=\"SpringBootMaven插件spring-boot-maven-plugin\"></a>SpringBootMaven插件<a href=\"https://www.mojohaus.org/build-helper-maven-plugin/\" target=\"_blank\" rel=\"noopener\">spring-boot-maven-plugin</a></h3><h4 id=\"configuration-layout-ZIP-的用处\"><a href=\"#configuration-layout-ZIP-的用处\" class=\"headerlink\" title=\"configuration.layout=ZIP 的用处\"></a>configuration.layout=ZIP 的用处</h4><h6 id=\"资料\"><a href=\"#资料\" class=\"headerlink\" title=\"资料\"></a>资料</h6><ul>\n<li><a href=\"\"http://weyprecht.de/2018/05/02/how-to-really-package-and-deploy-a-spring-boot-application/\"\">How to really package and deploy a Spring Boot application</a></li>\n</ul>\n<h6 id=\"作用\"><a href=\"#作用\" class=\"headerlink\" title=\"作用\"></a>作用</h6><p>将该工程的布局改为ZIP布局，所有的lib将外置到jar包外，在打包时将com.example:demo下的所有依赖放入外置的lib目录</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupid</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupid</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactid</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactid</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">layout</span>&gt;</span>ZIP<span class=\"tag\">&lt;/<span class=\"name\">layout</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">includes</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\">       \t\t<span class=\"tag\">&lt;<span class=\"name\">groupid</span>&gt;</span>com.example<span class=\"tag\">&lt;/<span class=\"name\">groupid</span>&gt;</span></span><br><span class=\"line\">        \t<span class=\"tag\">&lt;<span class=\"name\">artifactid</span>&gt;</span>demo<span class=\"tag\">&lt;/<span class=\"name\">artifactid</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">includes</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"好用常用人人都要会的最基本的Maven插件收集\"><a href=\"#好用常用人人都要会的最基本的Maven插件收集\" class=\"headerlink\" title=\"好用常用人人都要会的最基本的Maven插件收集\"></a>好用常用人人都要会的最基本的Maven插件收集</h1><p>大部分的插件其实都可以从<a href=\"https://maven.apache.org/plugins/index.html\" target=\"_blank\" rel=\"noopener\">MAVEN官方的可用插件列表</a>中直接找到<br>在这里取了比较常用并且实用的几个插件做一点说明<br>大多数使用场景无非是：</p>\n<ul>\n<li>要自定义打包的名称</li>\n<li>要将打包后的jar包自动复制到某处</li>\n<li>要将外置lib目录和maven依赖一起打进去</li>\n<li>要根据环境复制对应的配置文件</li>\n</ul>\n<p>这里选出的插件足以应对大部分情况了 </p>\n<h2 id=\"Maven依赖管理插件maven-dependency-plugin\"><a href=\"#Maven依赖管理插件maven-dependency-plugin\" class=\"headerlink\" title=\"Maven依赖管理插件maven-dependency-plugin\"></a>Maven依赖管理插件<a href=\"https://maven.apache.org/plugins/maven-dependency-plugin\" target=\"_blank\" rel=\"noopener\">maven-dependency-plugin</a></h2><p>主要用于管理依赖，比如引入某个特殊的jar包，或者从某个jar包中提取文件<br><code>tree</code>命令和<code>display-ancestors</code>命令在搭建工程时是比较好用的，可以很方便的找出重复依赖项，保证依赖版本一致</p>\n<h3 id=\"常用功能\"><a href=\"#常用功能\" class=\"headerlink\" title=\"常用功能\"></a>常用功能</h3><ul>\n<li>list 列出的依赖关系</li>\n<li>tree 以树型结构列出的依赖关系</li>\n<li>copy-dependencies 拷贝某个依赖项</li>\n<li>unpack-dependencies 解包某个依赖项</li>\n<li>display-ancestors 显示所有父依赖</li>\n</ul>\n<h2 id=\"Maven构建小助手-build-helper-maven-plugin\"><a href=\"#Maven构建小助手-build-helper-maven-plugin\" class=\"headerlink\" title=\"Maven构建小助手 build-helper-maven-plugin\"></a>Maven构建小助手 <a href=\"https://www.mojohaus.org/build-helper-maven-plugin/\" target=\"_blank\" rel=\"noopener\">build-helper-maven-plugin</a></h2><p>主要用于为POM生成各种属性,比如打包时间、IP地址之类的，功能比较多就不上代码了。</p>\n<h3 id=\"常用功能-1\"><a href=\"#常用功能-1\" class=\"headerlink\" title=\"常用功能\"></a>常用功能</h3><ul>\n<li>add-source 将更多<code>source</code>目录添加到POM</li>\n<li>add-test-source 将更多<code>test source</code>目录添加到POM</li>\n<li>add-resource 将更多<code>resource directories</code>目录添加到POM</li>\n<li>add-test-resource 将更多<code>test resource directories</code>目录添加到POM</li>\n<li>attach-artifact Attach additional artifacts to be installed and deployed.  不知道???干啥的</li>\n<li>maven-version 获取Maven核心版本</li>\n<li>regex-property 使用正则生成某个属性</li>\n<li>regex-properties使用正则生成属性</li>\n<li>released-version Resolve the latest released version of this project.</li>\n<li>parse-version Parse the version into different properties.</li>\n<li>remove-project-artifact 用于在构建过程中删除某个作为依赖的项目以节省空间</li>\n<li>reserve-network-port 保留一个未使用的端口号的随机列表</li>\n<li>local-ip 获取当前主机IP</li>\n<li>cpu-count 获取当前主机CPU核心数</li>\n<li>timestamp-property 生成一个事件放入指定属性中 常用于在包名上附加打包时间</li>\n<li>uptodate-property 检查某个属性根据检查结果设置其他属性</li>\n<li>uptodate-properties 检查多个属性根据检查结果设置多个其他属性</li>\n<li>rootlocation 重定义多模块构建的根目录</li>\n</ul>\n<h2 id=\"复制并重命名插件-Copy-Rename-Maven-Plugin\"><a href=\"#复制并重命名插件-Copy-Rename-Maven-Plugin\" class=\"headerlink\" title=\"复制并重命名插件 Copy Rename Maven Plugin\"></a>复制并重命名插件 <a href=\"https://coderplus.github.io/copy-rename-maven-plugin/\" target=\"_blank\" rel=\"noopener\">Copy Rename Maven Plugin</a></h2><p>功能字如其名,就是用来复制和重命名的，可以用来复制打包好的jar包，也可以在打包过程中复制文件。</p>\n<h3 id=\"常用功能-2\"><a href=\"#常用功能-2\" class=\"headerlink\" title=\"常用功能\"></a>常用功能</h3><ul>\n<li>copy 复制</li>\n<li>rename 重命名</li>\n<li>没了</li>\n</ul>\n<h3 id=\"一个小栗子\"><a href=\"#一个小栗子\" class=\"headerlink\" title=\"一个小栗子\"></a>一个小栗子</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupid</span>&gt;</span>com.coderplus.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupid</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactid</span>&gt;</span>copy-rename-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactid</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">id</span>&gt;</span>copy-file<span class=\"tag\">&lt;/<span class=\"name\">id</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">phase</span>&gt;</span>package<span class=\"tag\">&lt;/<span class=\"name\">phase</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">goal</span>&gt;</span>copy<span class=\"tag\">&lt;/<span class=\"name\">goal</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">goals</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">sourcefile</span>&gt;</span>target/$&#123;project.build.finalName&#125;.jar<span class=\"tag\">&lt;/<span class=\"name\">sourcefile</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">destinationfile</span>&gt;</span>/xingyi/$&#123;project.build.finalName&#125;.jar<span class=\"tag\">&lt;/<span class=\"name\">destinationfile</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">execution</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">executions</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n\n<h2 id=\"Maven编译插件-maven-compiler-plugin\"><a href=\"#Maven编译插件-maven-compiler-plugin\" class=\"headerlink\" title=\"Maven编译插件 maven-compiler-plugin\"></a>Maven编译插件 <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/\" target=\"_blank\" rel=\"noopener\">maven-compiler-plugin</a></h2><p>主要用于设定编译环境和编译器的属性,是比较基础的插件</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupid</span>&gt;</span>org.apache.maven.plugins<span class=\"tag\">&lt;/<span class=\"name\">groupid</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactid</span>&gt;</span>maven-compiler-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactid</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.8.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 一般而言，target与source是保持一致的，但是，有时候为了让程序能在其他版本的jdk中运行(对于低版本目标jdk，源代码中不能使用低版本jdk中不支持的语法 )，会存在target不同于source的情况 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 源代码使用的JDK版本 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">source</span>&gt;</span>1.8 </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 需要生成的目标class文件的编译版本 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">target</span>&gt;</span>1.8<span class=\"tag\">&lt;/<span class=\"name\">target</span>&gt;</span> </span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 字符集编码 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">encoding</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">verbose</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">verbose</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">showwarnings</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">showwarnings</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 要使compilerVersion标签生效，还需要将fork设为true，用于明确表示编译版本配置的可用 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">fork</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">fork</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 指定插件将使用的编译器的版本 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">compilerversion</span>&gt;</span>1.5<span class=\"tag\">&lt;/<span class=\"name\">compilerversion</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 编译器使用的初始内存 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">meminitial</span>&gt;</span>128m<span class=\"tag\">&lt;/<span class=\"name\">meminitial</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 编译器使用的最大内存 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">maxmem</span>&gt;</span>512m<span class=\"tag\">&lt;/<span class=\"name\">maxmem</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!--使用指定的javac命令，例如：&lt;executable&gt;$&#123;JAVA_1_4_HOME&#125;/bin/javac&lt;/executable&gt; --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">executable</span>&gt;</span><span class=\"comment\">&lt;!-- path-to-javac --&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">executable</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 跳过测试 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">skiptests</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">skiptests</span>&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- 这个选项用来传递编译器自身不包含但是却支持的参数选项--&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">compilerargument</span>&gt;</span>-verbose -bootclasspath $&#123;java.home&#125;\\lib\\rt.jar<span class=\"tag\">&lt;/<span class=\"name\">compilerargument</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"SpringBootMaven插件spring-boot-maven-plugin\"><a href=\"#SpringBootMaven插件spring-boot-maven-plugin\" class=\"headerlink\" title=\"SpringBootMaven插件spring-boot-maven-plugin\"></a>SpringBootMaven插件<a href=\"https://www.mojohaus.org/build-helper-maven-plugin/\" target=\"_blank\" rel=\"noopener\">spring-boot-maven-plugin</a></h3><h4 id=\"configuration-layout-ZIP-的用处\"><a href=\"#configuration-layout-ZIP-的用处\" class=\"headerlink\" title=\"configuration.layout=ZIP 的用处\"></a>configuration.layout=ZIP 的用处</h4><h6 id=\"资料\"><a href=\"#资料\" class=\"headerlink\" title=\"资料\"></a>资料</h6><ul>\n<li><a href=\"\"http://weyprecht.de/2018/05/02/how-to-really-package-and-deploy-a-spring-boot-application/\"\">How to really package and deploy a Spring Boot application</a></li>\n</ul>\n<h6 id=\"作用\"><a href=\"#作用\" class=\"headerlink\" title=\"作用\"></a>作用</h6><p>将该工程的布局改为ZIP布局，所有的lib将外置到jar包外，在打包时将com.example:demo下的所有依赖放入外置的lib目录</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">build</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">groupid</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupid</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">artifactid</span>&gt;</span>spring-boot-maven-plugin<span class=\"tag\">&lt;/<span class=\"name\">artifactid</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">layout</span>&gt;</span>ZIP<span class=\"tag\">&lt;/<span class=\"name\">layout</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">includes</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\">       \t\t<span class=\"tag\">&lt;<span class=\"name\">groupid</span>&gt;</span>com.example<span class=\"tag\">&lt;/<span class=\"name\">groupid</span>&gt;</span></span><br><span class=\"line\">        \t<span class=\"tag\">&lt;<span class=\"name\">artifactid</span>&gt;</span>demo<span class=\"tag\">&lt;/<span class=\"name\">artifactid</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">include</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">includes</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">plugin</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">plugins</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">build</span>&gt;</span></span><br></pre></td></tr></table></figure>\n"},{"_content":"\n###  super 类型下界通配符  \n\n- List中只能存储一种元素，此处声明的`<!--? super BaseDemoEntity-->`,表明这个List中存放的元素属于 BaseDemoEntity **其中一种** 父类类型\n\n-  BaseDemoEntity的父类可能有复数个，比如 Object，BaseEntity。取出时不知道到底List里到底装的啥，但一定是继承于Object，所以统一强转为Object类型\n\n- 存入时只能放入 BaseDemoEntity 和它的子类，因为声明的`<!--? super BaseDemoEntity-->`，BaseDemoEntity 可以被安全的强转为`<!--? super BaseDemoEntity-->`此处如果传入BaseDemoEntity的父类，那么运行时jvm将传入的类型转为`<!--? super BaseDemoEntity-->`时可能会因为类型不一致报错\n```java\n    @RequestMapping(\"/superBaseDemoEntity\")\n    public void superBaseDemoEntity() {\n\n        List<!--? super BaseDemoEntity--> appList = new ArrayList&lt;&gt;();\n        appList.add(new Music());\n        appList.add(new BaseDemoEntity());\n        Object object1 = appList.get(0);\n\n    }\n```\n\n### extends 类型上界通配符 \n\n- `<!--? extends BaseDemoEntity-->` =&gt; BaseDemoEntity的任意一种子类\n\n-  List中只能存储一种元素，此处声明的`<!--? extends BaseDemoEntity-->`表明这个List中存放的元素可能是继承与 BaseDemoEntity 的 **其中一种** 元素\n\n- 取出时可以被安全的强转为 BaseDemoEntity\n\n- 存入时由于不知道你存入的类型是否跟`<!--? extends BaseDemoEntity-->`类型是一个类型，因此不能存入\n\n```java\n     @RequestMapping(\"/extendsBaseDemoEntity\")\n    public void extendsBaseDemoEntity() {\n\n        List<!--? extends BaseDemoEntity--> appList2 = new ArrayList&lt;&gt;();\n        BaseDemoEntity baseDemoEntity = appList2.get(0);\n    }\n\n```\n","source":"_posts/泛型上下界.md","raw":"\n###  super 类型下界通配符  \n\n- List中只能存储一种元素，此处声明的`<!--? super BaseDemoEntity-->`,表明这个List中存放的元素属于 BaseDemoEntity **其中一种** 父类类型\n\n-  BaseDemoEntity的父类可能有复数个，比如 Object，BaseEntity。取出时不知道到底List里到底装的啥，但一定是继承于Object，所以统一强转为Object类型\n\n- 存入时只能放入 BaseDemoEntity 和它的子类，因为声明的`<!--? super BaseDemoEntity-->`，BaseDemoEntity 可以被安全的强转为`<!--? super BaseDemoEntity-->`此处如果传入BaseDemoEntity的父类，那么运行时jvm将传入的类型转为`<!--? super BaseDemoEntity-->`时可能会因为类型不一致报错\n```java\n    @RequestMapping(\"/superBaseDemoEntity\")\n    public void superBaseDemoEntity() {\n\n        List<!--? super BaseDemoEntity--> appList = new ArrayList&lt;&gt;();\n        appList.add(new Music());\n        appList.add(new BaseDemoEntity());\n        Object object1 = appList.get(0);\n\n    }\n```\n\n### extends 类型上界通配符 \n\n- `<!--? extends BaseDemoEntity-->` =&gt; BaseDemoEntity的任意一种子类\n\n-  List中只能存储一种元素，此处声明的`<!--? extends BaseDemoEntity-->`表明这个List中存放的元素可能是继承与 BaseDemoEntity 的 **其中一种** 元素\n\n- 取出时可以被安全的强转为 BaseDemoEntity\n\n- 存入时由于不知道你存入的类型是否跟`<!--? extends BaseDemoEntity-->`类型是一个类型，因此不能存入\n\n```java\n     @RequestMapping(\"/extendsBaseDemoEntity\")\n    public void extendsBaseDemoEntity() {\n\n        List<!--? extends BaseDemoEntity--> appList2 = new ArrayList&lt;&gt;();\n        BaseDemoEntity baseDemoEntity = appList2.get(0);\n    }\n\n```\n","slug":"泛型上下界","published":1,"date":"2020-01-06T05:11:33.356Z","updated":"2019-04-26T05:08:26.159Z","title":"泛型上下界","comments":1,"layout":"post","photos":[],"link":"","_id":"ck520ml9800069cov1erchw1k","content":"<h3 id=\"super-类型下界通配符\"><a href=\"#super-类型下界通配符\" class=\"headerlink\" title=\"super 类型下界通配符\"></a>super 类型下界通配符</h3><ul>\n<li><p>List中只能存储一种元素，此处声明的<code>&lt;!--? super BaseDemoEntity--&gt;</code>,表明这个List中存放的元素属于 BaseDemoEntity <strong>其中一种</strong> 父类类型</p>\n</li>\n<li><p>BaseDemoEntity的父类可能有复数个，比如 Object，BaseEntity。取出时不知道到底List里到底装的啥，但一定是继承于Object，所以统一强转为Object类型</p>\n</li>\n<li><p>存入时只能放入 BaseDemoEntity 和它的子类，因为声明的<code>&lt;!--? super BaseDemoEntity--&gt;</code>，BaseDemoEntity 可以被安全的强转为<code>&lt;!--? super BaseDemoEntity--&gt;</code>此处如果传入BaseDemoEntity的父类，那么运行时jvm将传入的类型转为<code>&lt;!--? super BaseDemoEntity--&gt;</code>时可能会因为类型不一致报错</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"/superBaseDemoEntity\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">superBaseDemoEntity</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;!--? <span class=\"keyword\">super</span> BaseDemoEntity--&gt; appList = <span class=\"keyword\">new</span> ArrayList&amp;lt;&amp;gt;();</span><br><span class=\"line\">    appList.add(<span class=\"keyword\">new</span> Music());</span><br><span class=\"line\">    appList.add(<span class=\"keyword\">new</span> BaseDemoEntity());</span><br><span class=\"line\">    Object object1 = appList.get(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"extends-类型上界通配符\"><a href=\"#extends-类型上界通配符\" class=\"headerlink\" title=\"extends 类型上界通配符\"></a>extends 类型上界通配符</h3><ul>\n<li><p><code>&lt;!--? extends BaseDemoEntity--&gt;</code> =&gt; BaseDemoEntity的任意一种子类</p>\n</li>\n<li><p>List中只能存储一种元素，此处声明的<code>&lt;!--? extends BaseDemoEntity--&gt;</code>表明这个List中存放的元素可能是继承与 BaseDemoEntity 的 <strong>其中一种</strong> 元素</p>\n</li>\n<li><p>取出时可以被安全的强转为 BaseDemoEntity</p>\n</li>\n<li><p>存入时由于不知道你存入的类型是否跟<code>&lt;!--? extends BaseDemoEntity--&gt;</code>类型是一个类型，因此不能存入</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"/extendsBaseDemoEntity\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">extendsBaseDemoEntity</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;!--? extends BaseDemoEntity--&gt; appList2 = <span class=\"keyword\">new</span> ArrayList&amp;lt;&amp;gt;();</span><br><span class=\"line\">    BaseDemoEntity baseDemoEntity = appList2.get(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"super-类型下界通配符\"><a href=\"#super-类型下界通配符\" class=\"headerlink\" title=\"super 类型下界通配符\"></a>super 类型下界通配符</h3><ul>\n<li><p>List中只能存储一种元素，此处声明的<code>&lt;!--? super BaseDemoEntity--&gt;</code>,表明这个List中存放的元素属于 BaseDemoEntity <strong>其中一种</strong> 父类类型</p>\n</li>\n<li><p>BaseDemoEntity的父类可能有复数个，比如 Object，BaseEntity。取出时不知道到底List里到底装的啥，但一定是继承于Object，所以统一强转为Object类型</p>\n</li>\n<li><p>存入时只能放入 BaseDemoEntity 和它的子类，因为声明的<code>&lt;!--? super BaseDemoEntity--&gt;</code>，BaseDemoEntity 可以被安全的强转为<code>&lt;!--? super BaseDemoEntity--&gt;</code>此处如果传入BaseDemoEntity的父类，那么运行时jvm将传入的类型转为<code>&lt;!--? super BaseDemoEntity--&gt;</code>时可能会因为类型不一致报错</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"/superBaseDemoEntity\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">superBaseDemoEntity</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;!--? <span class=\"keyword\">super</span> BaseDemoEntity--&gt; appList = <span class=\"keyword\">new</span> ArrayList&amp;lt;&amp;gt;();</span><br><span class=\"line\">    appList.add(<span class=\"keyword\">new</span> Music());</span><br><span class=\"line\">    appList.add(<span class=\"keyword\">new</span> BaseDemoEntity());</span><br><span class=\"line\">    Object object1 = appList.get(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<h3 id=\"extends-类型上界通配符\"><a href=\"#extends-类型上界通配符\" class=\"headerlink\" title=\"extends 类型上界通配符\"></a>extends 类型上界通配符</h3><ul>\n<li><p><code>&lt;!--? extends BaseDemoEntity--&gt;</code> =&gt; BaseDemoEntity的任意一种子类</p>\n</li>\n<li><p>List中只能存储一种元素，此处声明的<code>&lt;!--? extends BaseDemoEntity--&gt;</code>表明这个List中存放的元素可能是继承与 BaseDemoEntity 的 <strong>其中一种</strong> 元素</p>\n</li>\n<li><p>取出时可以被安全的强转为 BaseDemoEntity</p>\n</li>\n<li><p>存入时由于不知道你存入的类型是否跟<code>&lt;!--? extends BaseDemoEntity--&gt;</code>类型是一个类型，因此不能存入</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"meta\">@RequestMapping</span>(<span class=\"string\">\"/extendsBaseDemoEntity\"</span>)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">extendsBaseDemoEntity</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;!--? extends BaseDemoEntity--&gt; appList2 = <span class=\"keyword\">new</span> ArrayList&amp;lt;&amp;gt;();</span><br><span class=\"line\">    BaseDemoEntity baseDemoEntity = appList2.get(<span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"_content":"## 使用Spring Scheduled的计划任务 \n\n### 关键方法\n\n- 计算下一次匹配CRON表达式的时间\n- `new CronSequenceGenerator(\"1 1 0 1 * ?\").next(new Date());`\n- 该方法用于计算下一次运行的到现在时间的时间差\n- `org.springframework.scheduling.concurrent.ReschedulingRunnable#schedule();`\n    \n### 实现代码\n\n```java\n/**\n * <h2>ScheduleConfig</h2>\n * <p>定时任务配置</p>\n *\n * @author Daizc\n * @date 2019/12/10\n */\n@Component\n@EnableScheduling\npublic class ScheduleConfig {\n\n    // 每月第一天的0分0秒执行\n    public static final String CRON_EXPRESSION = \"0 0 0 1 * ?\";\n\n    @Scheduled(cron = CRON_EXPRESSION, zone = \"Asia/Shanghai\")\n    public void generateFormJob() {\n        System.out.println(new Date().toString() + \" &gt;&gt;计划任务执行....\");\n    }\n}\n```\n## 自己写的计划任务\n\n### 思路\n\n- 使用一个阻塞队列\n- 使用一个线程去消费队列\n- 使用一个线程在计算`现在到下次执行时间的时间差`并睡到下次执行时间将Runable放入队列中消费\n\n### 实现代码\n\n```java\n\n    /**\n     * 自己写的计划任务\n     */\n    private LinkedBlockingQueue<runnable> queue = new LinkedBlockingQueue&lt;&gt;();\n\n    private Runnable task = () -&gt; {\n        System.out.println(new Date().toString() + \" &gt;&gt;计划任务执行....\");\n    };\n\n    @SuppressWarnings({\"all\", \"AlibabaAvoidManuallyCreateThread\"})\n    public ScheduleConfig() {\n        Thread take = new Thread(() -&gt; {\n            try {\n                while (true) {\n                    Runnable runnable = runnable = queue.take();\n                    runnable.run();\n                }\n            } catch (InterruptedException ignored) {}\n        });\n        take.setDaemon(true);\n        take.setName(\"schedule-take\");\n\n        Thread put = new Thread(() -&gt; {\n            Runnable runnable = null;\n            try {\n                while (true) {\n                    // 计算下次执行时间\n                    Date next = new CronSequenceGenerator(CRON_EXPRESSION).next(new Date());\n                    Thread.sleep(next.getTime() - System.currentTimeMillis());\n                    queue.put(task);\n                }\n            } catch (InterruptedException ignored) {}\n        });\n        put.setDaemon(true);\n        put.setName(\"schedule-put\");\n\n        take.start();\n        put.start();\n    }\n```\n","source":"_posts/计划任务的Spring实现与手动实现.md","raw":"## 使用Spring Scheduled的计划任务 \n\n### 关键方法\n\n- 计算下一次匹配CRON表达式的时间\n- `new CronSequenceGenerator(\"1 1 0 1 * ?\").next(new Date());`\n- 该方法用于计算下一次运行的到现在时间的时间差\n- `org.springframework.scheduling.concurrent.ReschedulingRunnable#schedule();`\n    \n### 实现代码\n\n```java\n/**\n * <h2>ScheduleConfig</h2>\n * <p>定时任务配置</p>\n *\n * @author Daizc\n * @date 2019/12/10\n */\n@Component\n@EnableScheduling\npublic class ScheduleConfig {\n\n    // 每月第一天的0分0秒执行\n    public static final String CRON_EXPRESSION = \"0 0 0 1 * ?\";\n\n    @Scheduled(cron = CRON_EXPRESSION, zone = \"Asia/Shanghai\")\n    public void generateFormJob() {\n        System.out.println(new Date().toString() + \" &gt;&gt;计划任务执行....\");\n    }\n}\n```\n## 自己写的计划任务\n\n### 思路\n\n- 使用一个阻塞队列\n- 使用一个线程去消费队列\n- 使用一个线程在计算`现在到下次执行时间的时间差`并睡到下次执行时间将Runable放入队列中消费\n\n### 实现代码\n\n```java\n\n    /**\n     * 自己写的计划任务\n     */\n    private LinkedBlockingQueue<runnable> queue = new LinkedBlockingQueue&lt;&gt;();\n\n    private Runnable task = () -&gt; {\n        System.out.println(new Date().toString() + \" &gt;&gt;计划任务执行....\");\n    };\n\n    @SuppressWarnings({\"all\", \"AlibabaAvoidManuallyCreateThread\"})\n    public ScheduleConfig() {\n        Thread take = new Thread(() -&gt; {\n            try {\n                while (true) {\n                    Runnable runnable = runnable = queue.take();\n                    runnable.run();\n                }\n            } catch (InterruptedException ignored) {}\n        });\n        take.setDaemon(true);\n        take.setName(\"schedule-take\");\n\n        Thread put = new Thread(() -&gt; {\n            Runnable runnable = null;\n            try {\n                while (true) {\n                    // 计算下次执行时间\n                    Date next = new CronSequenceGenerator(CRON_EXPRESSION).next(new Date());\n                    Thread.sleep(next.getTime() - System.currentTimeMillis());\n                    queue.put(task);\n                }\n            } catch (InterruptedException ignored) {}\n        });\n        put.setDaemon(true);\n        put.setName(\"schedule-put\");\n\n        take.start();\n        put.start();\n    }\n```\n","slug":"计划任务的Spring实现与手动实现","published":1,"date":"2020-01-06T05:02:29.053Z","updated":"2019-06-04T03:50:19.716Z","title":"计划任务的Spring实现与手动实现","comments":1,"layout":"post","photos":[],"link":"","_id":"ck520ml9a00089covffye1nqj","content":"<h2 id=\"使用Spring-Scheduled的计划任务\"><a href=\"#使用Spring-Scheduled的计划任务\" class=\"headerlink\" title=\"使用Spring Scheduled的计划任务\"></a>使用Spring Scheduled的计划任务</h2><h3 id=\"关键方法\"><a href=\"#关键方法\" class=\"headerlink\" title=\"关键方法\"></a>关键方法</h3><ul>\n<li>计算下一次匹配CRON表达式的时间</li>\n<li><code>new CronSequenceGenerator(&quot;1 1 0 1 * ?&quot;).next(new Date());</code></li>\n<li>该方法用于计算下一次运行的到现在时间的时间差</li>\n<li><code>org.springframework.scheduling.concurrent.ReschedulingRunnable#schedule();</code></li>\n</ul>\n<h3 id=\"实现代码\"><a href=\"#实现代码\" class=\"headerlink\" title=\"实现代码\"></a>实现代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;h2&gt;ScheduleConfig&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;定时任务配置&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Daizc</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2019/12/10</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"meta\">@EnableScheduling</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ScheduleConfig</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 每月第一天的0分0秒执行</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CRON_EXPRESSION = <span class=\"string\">\"0 0 0 1 * ?\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Scheduled</span>(cron = CRON_EXPRESSION, zone = <span class=\"string\">\"Asia/Shanghai\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">generateFormJob</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"keyword\">new</span> Date().toString() + <span class=\"string\">\" &amp;gt;&amp;gt;计划任务执行....\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"自己写的计划任务\"><a href=\"#自己写的计划任务\" class=\"headerlink\" title=\"自己写的计划任务\"></a>自己写的计划任务</h2><h3 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h3><ul>\n<li>使用一个阻塞队列</li>\n<li>使用一个线程去消费队列</li>\n<li>使用一个线程在计算<code>现在到下次执行时间的时间差</code>并睡到下次执行时间将Runable放入队列中消费</li>\n</ul>\n<h3 id=\"实现代码-1\"><a href=\"#实现代码-1\" class=\"headerlink\" title=\"实现代码\"></a>实现代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 自己写的计划任务</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> LinkedBlockingQueue&lt;runnable&gt; queue = <span class=\"keyword\">new</span> LinkedBlockingQueue&amp;lt;&amp;gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> Runnable task = () -&amp;gt; &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"keyword\">new</span> Date().toString() + <span class=\"string\">\" &amp;gt;&amp;gt;计划任务执行....\"</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SuppressWarnings</span>(&#123;<span class=\"string\">\"all\"</span>, <span class=\"string\">\"AlibabaAvoidManuallyCreateThread\"</span>&#125;)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ScheduleConfig</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Thread take = <span class=\"keyword\">new</span> Thread(() -&amp;gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Runnable runnable = runnable = queue.take();</span><br><span class=\"line\">                runnable.run();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException ignored) &#123;&#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    take.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    take.setName(<span class=\"string\">\"schedule-take\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    Thread put = <span class=\"keyword\">new</span> Thread(() -&amp;gt; &#123;</span><br><span class=\"line\">        Runnable runnable = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 计算下次执行时间</span></span><br><span class=\"line\">                Date next = <span class=\"keyword\">new</span> CronSequenceGenerator(CRON_EXPRESSION).next(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">                Thread.sleep(next.getTime() - System.currentTimeMillis());</span><br><span class=\"line\">                queue.put(task);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException ignored) &#123;&#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    put.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    put.setName(<span class=\"string\">\"schedule-put\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    take.start();</span><br><span class=\"line\">    put.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"使用Spring-Scheduled的计划任务\"><a href=\"#使用Spring-Scheduled的计划任务\" class=\"headerlink\" title=\"使用Spring Scheduled的计划任务\"></a>使用Spring Scheduled的计划任务</h2><h3 id=\"关键方法\"><a href=\"#关键方法\" class=\"headerlink\" title=\"关键方法\"></a>关键方法</h3><ul>\n<li>计算下一次匹配CRON表达式的时间</li>\n<li><code>new CronSequenceGenerator(&quot;1 1 0 1 * ?&quot;).next(new Date());</code></li>\n<li>该方法用于计算下一次运行的到现在时间的时间差</li>\n<li><code>org.springframework.scheduling.concurrent.ReschedulingRunnable#schedule();</code></li>\n</ul>\n<h3 id=\"实现代码\"><a href=\"#实现代码\" class=\"headerlink\" title=\"实现代码\"></a>实现代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;h2&gt;ScheduleConfig&lt;/h2&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;定时任务配置&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> Daizc</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@date</span> 2019/12/10</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"meta\">@EnableScheduling</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ScheduleConfig</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 每月第一天的0分0秒执行</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String CRON_EXPRESSION = <span class=\"string\">\"0 0 0 1 * ?\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Scheduled</span>(cron = CRON_EXPRESSION, zone = <span class=\"string\">\"Asia/Shanghai\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">generateFormJob</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"keyword\">new</span> Date().toString() + <span class=\"string\">\" &amp;gt;&amp;gt;计划任务执行....\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"自己写的计划任务\"><a href=\"#自己写的计划任务\" class=\"headerlink\" title=\"自己写的计划任务\"></a>自己写的计划任务</h2><h3 id=\"思路\"><a href=\"#思路\" class=\"headerlink\" title=\"思路\"></a>思路</h3><ul>\n<li>使用一个阻塞队列</li>\n<li>使用一个线程去消费队列</li>\n<li>使用一个线程在计算<code>现在到下次执行时间的时间差</code>并睡到下次执行时间将Runable放入队列中消费</li>\n</ul>\n<h3 id=\"实现代码-1\"><a href=\"#实现代码-1\" class=\"headerlink\" title=\"实现代码\"></a>实现代码</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 自己写的计划任务</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> LinkedBlockingQueue&lt;runnable&gt; queue = <span class=\"keyword\">new</span> LinkedBlockingQueue&amp;lt;&amp;gt;();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> Runnable task = () -&amp;gt; &#123;</span><br><span class=\"line\">    System.out.println(<span class=\"keyword\">new</span> Date().toString() + <span class=\"string\">\" &amp;gt;&amp;gt;计划任务执行....\"</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SuppressWarnings</span>(&#123;<span class=\"string\">\"all\"</span>, <span class=\"string\">\"AlibabaAvoidManuallyCreateThread\"</span>&#125;)</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ScheduleConfig</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Thread take = <span class=\"keyword\">new</span> Thread(() -&amp;gt; &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                Runnable runnable = runnable = queue.take();</span><br><span class=\"line\">                runnable.run();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException ignored) &#123;&#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    take.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    take.setName(<span class=\"string\">\"schedule-take\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    Thread put = <span class=\"keyword\">new</span> Thread(() -&amp;gt; &#123;</span><br><span class=\"line\">        Runnable runnable = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// 计算下次执行时间</span></span><br><span class=\"line\">                Date next = <span class=\"keyword\">new</span> CronSequenceGenerator(CRON_EXPRESSION).next(<span class=\"keyword\">new</span> Date());</span><br><span class=\"line\">                Thread.sleep(next.getTime() - System.currentTimeMillis());</span><br><span class=\"line\">                queue.put(task);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (InterruptedException ignored) &#123;&#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    put.setDaemon(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    put.setName(<span class=\"string\">\"schedule-put\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    take.start();</span><br><span class=\"line\">    put.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"_content":"## 出现问题\n \n出问题的配置如下\n\n\n---\n\napplication.yml\n\n```yml\nspring:\n  redis:\n    # REDIS_URL\n    url: redis://192.168.1.233:6379\n    # 如果有密码\n    password: testpassword123\n    # 存储到分区1\n    database: 1\n    # 默认超时2000\n    timeout: 3000\n\n\n```\n\n报错的日志\n\n```log\n[20190827 20:42:53] ERROR 7900 --- [nio-8086-exec-2] c.z.v.d.a.c.mvc.GlobalExceptionHandler   : Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\norg.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1092)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1065)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:865)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:340)\n\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.execute(DefaultRedisCacheWriter.java:238)\n\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.get(DefaultRedisCacheWriter.java:109)\n\tat org.springframework.data.redis.cache.RedisCache.lookup(RedisCache.java:82)\n\tat org.springframework.cache.support.AbstractValueAdaptingCache.get(AbstractValueAdaptingCache.java:58)\n\tat org.springframework.cache.interceptor.AbstractCacheInvoker.doGet(AbstractCacheInvoker.java:73)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.findInCaches(CacheAspectSupport.java:554)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.findCachedItem(CacheAspectSupport.java:519)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:401)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345)\n\tat org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.zunchen.video.dmp.service.impl.onvif.OnvifDeviceCacheServiceImpl$EnhancerBySpringCGLIB$913f47a3.connectOnvifDevice(<generated>)\n\tat com.zunchen.video.dmp.admin.api.ConnectDeviceApiController.connect(ConnectDeviceApiController.java:36)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142)\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:890)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:154)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:122)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:107)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\tat io.lettuce.core.ExceptionFactory.createExecutionException(ExceptionFactory.java:135)\n\tat io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:122)\n\tat io.lettuce.core.AbstractRedisAsyncCommands.select(AbstractRedisAsyncCommands.java:1194)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat io.lettuce.core.FutureSyncInvocationHandler.handleInvocation(FutureSyncInvocationHandler.java:57)\n\tat io.lettuce.core.internal.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:80)\n\tat com.sun.proxy.$Proxy206.select(Unknown Source)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1087)\n\t... 69 common frames omitted\n```\n\n## 查询资料\n\n - [spring boot 配置redis 报错 NOAUTH Authentication required](https://bbs.csdn.net/topics/392009425)\n - [springboot整合redis报错NOAUTH Authentication required.解决方案](https://www.twblogs.net/a/5b7e13012b717768385523f9/zh-cn)\n \n### 归纳\n  大多解决方案都是通过配置注入的RedisConfig来setPassword解决的，SpringBoot未注入密码的原因仍然不明。\n\n## 原因探究\n\n### 原因分析\n\n  由报错信息可以看出，最终抛出的异常是io.lettuce.core.RedisCommandExecutionException，其中lettuce不知道是什么。\n\n  通过查阅资料 [高级的 Redis Java 客户端 Lettuce](https://toutiao.io/posts/pknpcs/preview) 得知lettuce是springboot2.0中用来代替jedis的新的redis客户端。\n\n  那为何lettuce为何会报错呢？这是我最大的疑惑，我决定去spring.redis的自动配置类中看看到底发生了什么\n\n### 源码跟踪\n\n&gt; spring.redis的自动配置包：org.springframework.boot.autoconfigure.data.redis\n\n![](leanote://file/getImage?fileId=5d847766e1488a763c000011)\n\n看着这个目录结构，第一反应直奔LettuceConnectionConfiguration中去看源码。\n\n![](leanote://file/getImage?fileId=5d84778be1488a763c000012)\n\n在其构造方法处打断点发现是拿到了密码的，发现同类下有一方法createLettuceConnectionFactory();明显是创建连接工厂的方法，断点套上去。\n\n![](leanote://file/getImage?fileId=5d8477a7e1488a763c000013)\n\n这个方法中干了啥，它看了看配置文件中有没有包含${spring.redis.sentinel}和${spring.redis.cluster}的配置，如果有就拿对应的配置去创建连接工厂。但是yml中既没有配置哨兵模式也没有配置集群模式，所以进入独立模式getStandaloneConfig();\n\n![](leanote://file/getImage?fileId=5d8478d0e1488a763c000014)\n\n顺手计算一下，看看standaloneConfig长什么样子…..嗯???!!!……密码呢？……发生了啥？\n\n![](leanote://file/getImage?fileId=5d8478e8e1488a763c000015)\n\n问题找到了，感觉自己好蠢。\n\n## 解决问题\n\n### 修改配置\n\n```yml\nspring:\n  redis:\n    # REDIS_URL 中自己带上密码\n    # Connection URL. Overrides host, port, and password. User is ignored. Example:\n    # redis://user:password@example.com:6379\n    # url: redis://UserIsIgnored:testpassword123@192.168.1.233:6379\n    # HOST 和 PASSWORD 是一套配置\n    host: 192.168.1.233\n    # 如果有密码 （用于RedisTemplate ，Lettuce不会拿这个password）\n    password: testpassword123\n    # 存储到分区1\n    database: 1\n    # 默认超时2000\n    timeout: 3000\n```\n\n修改后启动：\n\n```log\n[20190828 03:15:04] ERROR 8564 --- [nio-8086-exec-2] c.z.v.d.a.c.mvc.GlobalExceptionHandler   : Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\norg.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1092)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1065)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:865)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:340)\n\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.execute(DefaultRedisCacheWriter.java:238)\n\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.get(DefaultRedisCacheWriter.java:109)\n\tat org.springframework.data.redis.cache.RedisCache.lookup(RedisCache.java:82)\n\tat org.springframework.cache.support.AbstractValueAdaptingCache.get(AbstractValueAdaptingCache.java:58)\n\tat org.springframework.cache.interceptor.AbstractCacheInvoker.doGet(AbstractCacheInvoker.java:73)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.findInCaches(CacheAspectSupport.java:554)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.findCachedItem(CacheAspectSupport.java:519)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:401)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345)\n\tat org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.zunchen.video.dmp.service.impl.onvif.OnvifDeviceCacheServiceImpl$EnhancerBySpringCGLIB$b001f767.connectOnvifDevice(<generated>)\n\tat com.zunchen.video.dmp.admin.api.ConnectDeviceApiController.connect(ConnectDeviceApiController.java:36)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142)\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:890)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:154)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:122)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:107)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\n仍然在报错，这下尴尬了。\n\n\n### 再次解决问题\n\n![](leanote://file/getImage?fileId=5d847965e1488a763c000016)\n\n径直来到报错信息提示的地方，估计是红框出出现了异常。此处调用的是接口方法，不知道进了那个方法，没关系，打个断点强制步入。\n\n![](leanote://file/getImage?fileId=5d847984e1488a763c000017)\n\n有点懒，不想解释了，直接画图，发现是redisURISupplier中的password仍然是空的。不想知道为什么了，我只想解决问题。源码点过去看下。\n\n![](leanote://file/getImage?fileId=5d847996e1488a763c000018)\n\n 查看该类的构造方法，这个东西正在解析RedisURI，那RedisURI哪儿来的呢？配置里配的呗。\n \n## 成功解决问题\n\n```yml\nspring:\n  redis:\n    # REDIS_URL 中自己带上密码\n    # Connection URL. Overrides host, port, and password. User is ignored. Example:\n    # redis://user:password@example.com:6379\n    url: redis://UserIsIgnored:testpassword123@192.168.1.233:6379\n    # HOST 和 PASSWORD 是一套配置\n    # host: 192.168.1.233\n    # 如果有密码 （用于RedisTemplate ，Lettuce不会拿这个password）\n    # password: testpassword123\n    # 存储到分区1\n    database: 1\n    # 默认超时2000\n    timeout: 3000\n```\n\n这次好了，redis成功连接。大功告成。\n\n\n\n\n\n\n","source":"_posts/SpringBoot中的redis密码问题.md","raw":"## 出现问题\n \n出问题的配置如下\n\n\n---\n\napplication.yml\n\n```yml\nspring:\n  redis:\n    # REDIS_URL\n    url: redis://192.168.1.233:6379\n    # 如果有密码\n    password: testpassword123\n    # 存储到分区1\n    database: 1\n    # 默认超时2000\n    timeout: 3000\n\n\n```\n\n报错的日志\n\n```log\n[20190827 20:42:53] ERROR 7900 --- [nio-8086-exec-2] c.z.v.d.a.c.mvc.GlobalExceptionHandler   : Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\norg.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1092)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1065)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:865)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:340)\n\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.execute(DefaultRedisCacheWriter.java:238)\n\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.get(DefaultRedisCacheWriter.java:109)\n\tat org.springframework.data.redis.cache.RedisCache.lookup(RedisCache.java:82)\n\tat org.springframework.cache.support.AbstractValueAdaptingCache.get(AbstractValueAdaptingCache.java:58)\n\tat org.springframework.cache.interceptor.AbstractCacheInvoker.doGet(AbstractCacheInvoker.java:73)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.findInCaches(CacheAspectSupport.java:554)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.findCachedItem(CacheAspectSupport.java:519)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:401)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345)\n\tat org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.zunchen.video.dmp.service.impl.onvif.OnvifDeviceCacheServiceImpl$EnhancerBySpringCGLIB$913f47a3.connectOnvifDevice(<generated>)\n\tat com.zunchen.video.dmp.admin.api.ConnectDeviceApiController.connect(ConnectDeviceApiController.java:36)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142)\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:890)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:154)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:122)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:107)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\tat java.lang.Thread.run(Thread.java:748)\nCaused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\tat io.lettuce.core.ExceptionFactory.createExecutionException(ExceptionFactory.java:135)\n\tat io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:122)\n\tat io.lettuce.core.AbstractRedisAsyncCommands.select(AbstractRedisAsyncCommands.java:1194)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat io.lettuce.core.FutureSyncInvocationHandler.handleInvocation(FutureSyncInvocationHandler.java:57)\n\tat io.lettuce.core.internal.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:80)\n\tat com.sun.proxy.$Proxy206.select(Unknown Source)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1087)\n\t... 69 common frames omitted\n```\n\n## 查询资料\n\n - [spring boot 配置redis 报错 NOAUTH Authentication required](https://bbs.csdn.net/topics/392009425)\n - [springboot整合redis报错NOAUTH Authentication required.解决方案](https://www.twblogs.net/a/5b7e13012b717768385523f9/zh-cn)\n \n### 归纳\n  大多解决方案都是通过配置注入的RedisConfig来setPassword解决的，SpringBoot未注入密码的原因仍然不明。\n\n## 原因探究\n\n### 原因分析\n\n  由报错信息可以看出，最终抛出的异常是io.lettuce.core.RedisCommandExecutionException，其中lettuce不知道是什么。\n\n  通过查阅资料 [高级的 Redis Java 客户端 Lettuce](https://toutiao.io/posts/pknpcs/preview) 得知lettuce是springboot2.0中用来代替jedis的新的redis客户端。\n\n  那为何lettuce为何会报错呢？这是我最大的疑惑，我决定去spring.redis的自动配置类中看看到底发生了什么\n\n### 源码跟踪\n\n&gt; spring.redis的自动配置包：org.springframework.boot.autoconfigure.data.redis\n\n![](leanote://file/getImage?fileId=5d847766e1488a763c000011)\n\n看着这个目录结构，第一反应直奔LettuceConnectionConfiguration中去看源码。\n\n![](leanote://file/getImage?fileId=5d84778be1488a763c000012)\n\n在其构造方法处打断点发现是拿到了密码的，发现同类下有一方法createLettuceConnectionFactory();明显是创建连接工厂的方法，断点套上去。\n\n![](leanote://file/getImage?fileId=5d8477a7e1488a763c000013)\n\n这个方法中干了啥，它看了看配置文件中有没有包含${spring.redis.sentinel}和${spring.redis.cluster}的配置，如果有就拿对应的配置去创建连接工厂。但是yml中既没有配置哨兵模式也没有配置集群模式，所以进入独立模式getStandaloneConfig();\n\n![](leanote://file/getImage?fileId=5d8478d0e1488a763c000014)\n\n顺手计算一下，看看standaloneConfig长什么样子…..嗯???!!!……密码呢？……发生了啥？\n\n![](leanote://file/getImage?fileId=5d8478e8e1488a763c000015)\n\n问题找到了，感觉自己好蠢。\n\n## 解决问题\n\n### 修改配置\n\n```yml\nspring:\n  redis:\n    # REDIS_URL 中自己带上密码\n    # Connection URL. Overrides host, port, and password. User is ignored. Example:\n    # redis://user:password@example.com:6379\n    # url: redis://UserIsIgnored:testpassword123@192.168.1.233:6379\n    # HOST 和 PASSWORD 是一套配置\n    host: 192.168.1.233\n    # 如果有密码 （用于RedisTemplate ，Lettuce不会拿这个password）\n    password: testpassword123\n    # 存储到分区1\n    database: 1\n    # 默认超时2000\n    timeout: 3000\n```\n\n修改后启动：\n\n```log\n[20190828 03:15:04] ERROR 8564 --- [nio-8086-exec-2] c.z.v.d.a.c.mvc.GlobalExceptionHandler   : Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\norg.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1092)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1065)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:865)\n\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:340)\n\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.execute(DefaultRedisCacheWriter.java:238)\n\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.get(DefaultRedisCacheWriter.java:109)\n\tat org.springframework.data.redis.cache.RedisCache.lookup(RedisCache.java:82)\n\tat org.springframework.cache.support.AbstractValueAdaptingCache.get(AbstractValueAdaptingCache.java:58)\n\tat org.springframework.cache.interceptor.AbstractCacheInvoker.doGet(AbstractCacheInvoker.java:73)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.findInCaches(CacheAspectSupport.java:554)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.findCachedItem(CacheAspectSupport.java:519)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:401)\n\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345)\n\tat org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)\n\tat com.zunchen.video.dmp.service.impl.onvif.OnvifDeviceCacheServiceImpl$EnhancerBySpringCGLIB$b001f767.connectOnvifDevice(<generated>)\n\tat com.zunchen.video.dmp.admin.api.ConnectDeviceApiController.connect(ConnectDeviceApiController.java:36)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142)\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:890)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:154)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:122)\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:107)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\tat java.lang.Thread.run(Thread.java:748)\n```\n\n仍然在报错，这下尴尬了。\n\n\n### 再次解决问题\n\n![](leanote://file/getImage?fileId=5d847965e1488a763c000016)\n\n径直来到报错信息提示的地方，估计是红框出出现了异常。此处调用的是接口方法，不知道进了那个方法，没关系，打个断点强制步入。\n\n![](leanote://file/getImage?fileId=5d847984e1488a763c000017)\n\n有点懒，不想解释了，直接画图，发现是redisURISupplier中的password仍然是空的。不想知道为什么了，我只想解决问题。源码点过去看下。\n\n![](leanote://file/getImage?fileId=5d847996e1488a763c000018)\n\n 查看该类的构造方法，这个东西正在解析RedisURI，那RedisURI哪儿来的呢？配置里配的呗。\n \n## 成功解决问题\n\n```yml\nspring:\n  redis:\n    # REDIS_URL 中自己带上密码\n    # Connection URL. Overrides host, port, and password. User is ignored. Example:\n    # redis://user:password@example.com:6379\n    url: redis://UserIsIgnored:testpassword123@192.168.1.233:6379\n    # HOST 和 PASSWORD 是一套配置\n    # host: 192.168.1.233\n    # 如果有密码 （用于RedisTemplate ，Lettuce不会拿这个password）\n    # password: testpassword123\n    # 存储到分区1\n    database: 1\n    # 默认超时2000\n    timeout: 3000\n```\n\n这次好了，redis成功连接。大功告成。\n\n\n\n\n\n\n","slug":"SpringBoot中的redis密码问题","published":1,"date":"2020-01-06T05:11:52.457Z","updated":"2019-06-01T13:04:00.929Z","title":"SpringBoot中的redis密码问题","comments":1,"layout":"post","photos":[],"link":"","_id":"ck520mlaf000c9cov2n9e81zb","content":"<h2 id=\"出现问题\"><a href=\"#出现问题\" class=\"headerlink\" title=\"出现问题\"></a>出现问题</h2><p>出问题的配置如下</p>\n<hr>\n<p>application.yml</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"comment\"># REDIS_URL</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">redis://192.168.1.233:6379</span></span><br><span class=\"line\">    <span class=\"comment\"># 如果有密码</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">testpassword123</span></span><br><span class=\"line\">    <span class=\"comment\"># 存储到分区1</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># 默认超时2000</span></span><br><span class=\"line\">    <span class=\"attr\">timeout:</span> <span class=\"number\">3000</span></span><br></pre></td></tr></table></figure>\n\n<p>报错的日志</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[20190827 20:42:53] ERROR 7900 --- [nio-8086-exec-2] c.z.v.d.a.c.mvc.GlobalExceptionHandler   : Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\"></span><br><span class=\"line\">org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1092)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1065)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:865)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:340)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.execute(DefaultRedisCacheWriter.java:238)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.get(DefaultRedisCacheWriter.java:109)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.RedisCache.lookup(RedisCache.java:82)</span><br><span class=\"line\">\tat org.springframework.cache.support.AbstractValueAdaptingCache.get(AbstractValueAdaptingCache.java:58)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.AbstractCacheInvoker.doGet(AbstractCacheInvoker.java:73)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.findInCaches(CacheAspectSupport.java:554)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.findCachedItem(CacheAspectSupport.java:519)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:401)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)</span><br><span class=\"line\">\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)</span><br><span class=\"line\">\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)</span><br><span class=\"line\">\tat com.zunchen.video.dmp.service.impl.onvif.OnvifDeviceCacheServiceImpl$EnhancerBySpringCGLIB$913f47a3.connectOnvifDevice(&lt;generated&gt;)</span><br><span class=\"line\">\tat com.zunchen.video.dmp.admin.api.ConnectDeviceApiController.connect(ConnectDeviceApiController.java:36)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class=\"line\">\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class=\"line\">\tat java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215)</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:890)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:154)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:122)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:107)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)</span><br><span class=\"line\">\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)</span><br><span class=\"line\">\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)</span><br><span class=\"line\">\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class=\"line\">\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br><span class=\"line\">Caused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\">\tat io.lettuce.core.ExceptionFactory.createExecutionException(ExceptionFactory.java:135)</span><br><span class=\"line\">\tat io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:122)</span><br><span class=\"line\">\tat io.lettuce.core.AbstractRedisAsyncCommands.select(AbstractRedisAsyncCommands.java:1194)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class=\"line\">\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class=\"line\">\tat java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class=\"line\">\tat io.lettuce.core.FutureSyncInvocationHandler.handleInvocation(FutureSyncInvocationHandler.java:57)</span><br><span class=\"line\">\tat io.lettuce.core.internal.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:80)</span><br><span class=\"line\">\tat com.sun.proxy.$Proxy206.select(Unknown Source)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1087)</span><br><span class=\"line\">\t... 69 common frames omitted</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查询资料\"><a href=\"#查询资料\" class=\"headerlink\" title=\"查询资料\"></a>查询资料</h2><ul>\n<li><a href=\"https://bbs.csdn.net/topics/392009425\" target=\"_blank\" rel=\"noopener\">spring boot 配置redis 报错 NOAUTH Authentication required</a></li>\n<li><a href=\"https://www.twblogs.net/a/5b7e13012b717768385523f9/zh-cn\" target=\"_blank\" rel=\"noopener\">springboot整合redis报错NOAUTH Authentication required.解决方案</a></li>\n</ul>\n<h3 id=\"归纳\"><a href=\"#归纳\" class=\"headerlink\" title=\"归纳\"></a>归纳</h3><p>  大多解决方案都是通过配置注入的RedisConfig来setPassword解决的，SpringBoot未注入密码的原因仍然不明。</p>\n<h2 id=\"原因探究\"><a href=\"#原因探究\" class=\"headerlink\" title=\"原因探究\"></a>原因探究</h2><h3 id=\"原因分析\"><a href=\"#原因分析\" class=\"headerlink\" title=\"原因分析\"></a>原因分析</h3><p>  由报错信息可以看出，最终抛出的异常是io.lettuce.core.RedisCommandExecutionException，其中lettuce不知道是什么。</p>\n<p>  通过查阅资料 <a href=\"https://toutiao.io/posts/pknpcs/preview\" target=\"_blank\" rel=\"noopener\">高级的 Redis Java 客户端 Lettuce</a> 得知lettuce是springboot2.0中用来代替jedis的新的redis客户端。</p>\n<p>  那为何lettuce为何会报错呢？这是我最大的疑惑，我决定去spring.redis的自动配置类中看看到底发生了什么</p>\n<h3 id=\"源码跟踪\"><a href=\"#源码跟踪\" class=\"headerlink\" title=\"源码跟踪\"></a>源码跟踪</h3><p>&gt; spring.redis的自动配置包：org.springframework.boot.autoconfigure.data.redis</p>\n<p><img src=\"leanote://file/getImage?fileId=5d847766e1488a763c000011\" alt=\"\"></p>\n<p>看着这个目录结构，第一反应直奔LettuceConnectionConfiguration中去看源码。</p>\n<p><img src=\"leanote://file/getImage?fileId=5d84778be1488a763c000012\" alt=\"\"></p>\n<p>在其构造方法处打断点发现是拿到了密码的，发现同类下有一方法createLettuceConnectionFactory();明显是创建连接工厂的方法，断点套上去。</p>\n<p><img src=\"leanote://file/getImage?fileId=5d8477a7e1488a763c000013\" alt=\"\"></p>\n<p>这个方法中干了啥，它看了看配置文件中有没有包含${spring.redis.sentinel}和${spring.redis.cluster}的配置，如果有就拿对应的配置去创建连接工厂。但是yml中既没有配置哨兵模式也没有配置集群模式，所以进入独立模式getStandaloneConfig();</p>\n<p><img src=\"leanote://file/getImage?fileId=5d8478d0e1488a763c000014\" alt=\"\"></p>\n<p>顺手计算一下，看看standaloneConfig长什么样子…..嗯???!!!……密码呢？……发生了啥？</p>\n<p><img src=\"leanote://file/getImage?fileId=5d8478e8e1488a763c000015\" alt=\"\"></p>\n<p>问题找到了，感觉自己好蠢。</p>\n<h2 id=\"解决问题\"><a href=\"#解决问题\" class=\"headerlink\" title=\"解决问题\"></a>解决问题</h2><h3 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h3><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"comment\"># REDIS_URL 中自己带上密码</span></span><br><span class=\"line\">    <span class=\"comment\"># Connection URL. Overrides host, port, and password. User is ignored. Example:</span></span><br><span class=\"line\">    <span class=\"comment\"># redis://user:password@example.com:6379</span></span><br><span class=\"line\">    <span class=\"comment\"># url: redis://UserIsIgnored:testpassword123@192.168.1.233:6379</span></span><br><span class=\"line\">    <span class=\"comment\"># HOST 和 PASSWORD 是一套配置</span></span><br><span class=\"line\">    <span class=\"attr\">host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.233</span></span><br><span class=\"line\">    <span class=\"comment\"># 如果有密码 （用于RedisTemplate ，Lettuce不会拿这个password）</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">testpassword123</span></span><br><span class=\"line\">    <span class=\"comment\"># 存储到分区1</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># 默认超时2000</span></span><br><span class=\"line\">    <span class=\"attr\">timeout:</span> <span class=\"number\">3000</span></span><br></pre></td></tr></table></figure>\n\n<p>修改后启动：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[20190828 03:15:04] ERROR 8564 --- [nio-8086-exec-2] c.z.v.d.a.c.mvc.GlobalExceptionHandler   : Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\"></span><br><span class=\"line\">org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1092)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1065)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:865)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:340)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.execute(DefaultRedisCacheWriter.java:238)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.get(DefaultRedisCacheWriter.java:109)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.RedisCache.lookup(RedisCache.java:82)</span><br><span class=\"line\">\tat org.springframework.cache.support.AbstractValueAdaptingCache.get(AbstractValueAdaptingCache.java:58)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.AbstractCacheInvoker.doGet(AbstractCacheInvoker.java:73)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.findInCaches(CacheAspectSupport.java:554)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.findCachedItem(CacheAspectSupport.java:519)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:401)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)</span><br><span class=\"line\">\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)</span><br><span class=\"line\">\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)</span><br><span class=\"line\">\tat com.zunchen.video.dmp.service.impl.onvif.OnvifDeviceCacheServiceImpl$EnhancerBySpringCGLIB$b001f767.connectOnvifDevice(&lt;generated&gt;)</span><br><span class=\"line\">\tat com.zunchen.video.dmp.admin.api.ConnectDeviceApiController.connect(ConnectDeviceApiController.java:36)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class=\"line\">\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class=\"line\">\tat java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215)</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:890)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:154)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:122)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:107)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)</span><br><span class=\"line\">\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)</span><br><span class=\"line\">\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)</span><br><span class=\"line\">\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class=\"line\">\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n\n<p>仍然在报错，这下尴尬了。</p>\n<h3 id=\"再次解决问题\"><a href=\"#再次解决问题\" class=\"headerlink\" title=\"再次解决问题\"></a>再次解决问题</h3><p><img src=\"leanote://file/getImage?fileId=5d847965e1488a763c000016\" alt=\"\"></p>\n<p>径直来到报错信息提示的地方，估计是红框出出现了异常。此处调用的是接口方法，不知道进了那个方法，没关系，打个断点强制步入。</p>\n<p><img src=\"leanote://file/getImage?fileId=5d847984e1488a763c000017\" alt=\"\"></p>\n<p>有点懒，不想解释了，直接画图，发现是redisURISupplier中的password仍然是空的。不想知道为什么了，我只想解决问题。源码点过去看下。</p>\n<p><img src=\"leanote://file/getImage?fileId=5d847996e1488a763c000018\" alt=\"\"></p>\n<p> 查看该类的构造方法，这个东西正在解析RedisURI，那RedisURI哪儿来的呢？配置里配的呗。\n </p>\n<h2 id=\"成功解决问题\"><a href=\"#成功解决问题\" class=\"headerlink\" title=\"成功解决问题\"></a>成功解决问题</h2><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"comment\"># REDIS_URL 中自己带上密码</span></span><br><span class=\"line\">    <span class=\"comment\"># Connection URL. Overrides host, port, and password. User is ignored. Example:</span></span><br><span class=\"line\">    <span class=\"comment\"># redis://user:password@example.com:6379</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">redis://UserIsIgnored:testpassword123@192.168.1.233:6379</span></span><br><span class=\"line\">    <span class=\"comment\"># HOST 和 PASSWORD 是一套配置</span></span><br><span class=\"line\">    <span class=\"comment\"># host: 192.168.1.233</span></span><br><span class=\"line\">    <span class=\"comment\"># 如果有密码 （用于RedisTemplate ，Lettuce不会拿这个password）</span></span><br><span class=\"line\">    <span class=\"comment\"># password: testpassword123</span></span><br><span class=\"line\">    <span class=\"comment\"># 存储到分区1</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># 默认超时2000</span></span><br><span class=\"line\">    <span class=\"attr\">timeout:</span> <span class=\"number\">3000</span></span><br></pre></td></tr></table></figure>\n\n<p>这次好了，redis成功连接。大功告成。</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"出现问题\"><a href=\"#出现问题\" class=\"headerlink\" title=\"出现问题\"></a>出现问题</h2><p>出问题的配置如下</p>\n<hr>\n<p>application.yml</p>\n<figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"comment\"># REDIS_URL</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">redis://192.168.1.233:6379</span></span><br><span class=\"line\">    <span class=\"comment\"># 如果有密码</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">testpassword123</span></span><br><span class=\"line\">    <span class=\"comment\"># 存储到分区1</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># 默认超时2000</span></span><br><span class=\"line\">    <span class=\"attr\">timeout:</span> <span class=\"number\">3000</span></span><br></pre></td></tr></table></figure>\n\n<p>报错的日志</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[20190827 20:42:53] ERROR 7900 --- [nio-8086-exec-2] c.z.v.d.a.c.mvc.GlobalExceptionHandler   : Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\"></span><br><span class=\"line\">org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1092)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1065)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:865)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:340)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.execute(DefaultRedisCacheWriter.java:238)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.get(DefaultRedisCacheWriter.java:109)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.RedisCache.lookup(RedisCache.java:82)</span><br><span class=\"line\">\tat org.springframework.cache.support.AbstractValueAdaptingCache.get(AbstractValueAdaptingCache.java:58)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.AbstractCacheInvoker.doGet(AbstractCacheInvoker.java:73)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.findInCaches(CacheAspectSupport.java:554)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.findCachedItem(CacheAspectSupport.java:519)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:401)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)</span><br><span class=\"line\">\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)</span><br><span class=\"line\">\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)</span><br><span class=\"line\">\tat com.zunchen.video.dmp.service.impl.onvif.OnvifDeviceCacheServiceImpl$EnhancerBySpringCGLIB$913f47a3.connectOnvifDevice(&lt;generated&gt;)</span><br><span class=\"line\">\tat com.zunchen.video.dmp.admin.api.ConnectDeviceApiController.connect(ConnectDeviceApiController.java:36)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class=\"line\">\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class=\"line\">\tat java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215)</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:890)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:154)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:122)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:107)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)</span><br><span class=\"line\">\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)</span><br><span class=\"line\">\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)</span><br><span class=\"line\">\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class=\"line\">\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br><span class=\"line\">Caused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\">\tat io.lettuce.core.ExceptionFactory.createExecutionException(ExceptionFactory.java:135)</span><br><span class=\"line\">\tat io.lettuce.core.LettuceFutures.awaitOrCancel(LettuceFutures.java:122)</span><br><span class=\"line\">\tat io.lettuce.core.AbstractRedisAsyncCommands.select(AbstractRedisAsyncCommands.java:1194)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class=\"line\">\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class=\"line\">\tat java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class=\"line\">\tat io.lettuce.core.FutureSyncInvocationHandler.handleInvocation(FutureSyncInvocationHandler.java:57)</span><br><span class=\"line\">\tat io.lettuce.core.internal.AbstractInvocationHandler.invoke(AbstractInvocationHandler.java:80)</span><br><span class=\"line\">\tat com.sun.proxy.$Proxy206.select(Unknown Source)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1087)</span><br><span class=\"line\">\t... 69 common frames omitted</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"查询资料\"><a href=\"#查询资料\" class=\"headerlink\" title=\"查询资料\"></a>查询资料</h2><ul>\n<li><a href=\"https://bbs.csdn.net/topics/392009425\" target=\"_blank\" rel=\"noopener\">spring boot 配置redis 报错 NOAUTH Authentication required</a></li>\n<li><a href=\"https://www.twblogs.net/a/5b7e13012b717768385523f9/zh-cn\" target=\"_blank\" rel=\"noopener\">springboot整合redis报错NOAUTH Authentication required.解决方案</a></li>\n</ul>\n<h3 id=\"归纳\"><a href=\"#归纳\" class=\"headerlink\" title=\"归纳\"></a>归纳</h3><p>  大多解决方案都是通过配置注入的RedisConfig来setPassword解决的，SpringBoot未注入密码的原因仍然不明。</p>\n<h2 id=\"原因探究\"><a href=\"#原因探究\" class=\"headerlink\" title=\"原因探究\"></a>原因探究</h2><h3 id=\"原因分析\"><a href=\"#原因分析\" class=\"headerlink\" title=\"原因分析\"></a>原因分析</h3><p>  由报错信息可以看出，最终抛出的异常是io.lettuce.core.RedisCommandExecutionException，其中lettuce不知道是什么。</p>\n<p>  通过查阅资料 <a href=\"https://toutiao.io/posts/pknpcs/preview\" target=\"_blank\" rel=\"noopener\">高级的 Redis Java 客户端 Lettuce</a> 得知lettuce是springboot2.0中用来代替jedis的新的redis客户端。</p>\n<p>  那为何lettuce为何会报错呢？这是我最大的疑惑，我决定去spring.redis的自动配置类中看看到底发生了什么</p>\n<h3 id=\"源码跟踪\"><a href=\"#源码跟踪\" class=\"headerlink\" title=\"源码跟踪\"></a>源码跟踪</h3><p>&gt; spring.redis的自动配置包：org.springframework.boot.autoconfigure.data.redis</p>\n<p><img src=\"leanote://file/getImage?fileId=5d847766e1488a763c000011\" alt=\"\"></p>\n<p>看着这个目录结构，第一反应直奔LettuceConnectionConfiguration中去看源码。</p>\n<p><img src=\"leanote://file/getImage?fileId=5d84778be1488a763c000012\" alt=\"\"></p>\n<p>在其构造方法处打断点发现是拿到了密码的，发现同类下有一方法createLettuceConnectionFactory();明显是创建连接工厂的方法，断点套上去。</p>\n<p><img src=\"leanote://file/getImage?fileId=5d8477a7e1488a763c000013\" alt=\"\"></p>\n<p>这个方法中干了啥，它看了看配置文件中有没有包含${spring.redis.sentinel}和${spring.redis.cluster}的配置，如果有就拿对应的配置去创建连接工厂。但是yml中既没有配置哨兵模式也没有配置集群模式，所以进入独立模式getStandaloneConfig();</p>\n<p><img src=\"leanote://file/getImage?fileId=5d8478d0e1488a763c000014\" alt=\"\"></p>\n<p>顺手计算一下，看看standaloneConfig长什么样子…..嗯???!!!……密码呢？……发生了啥？</p>\n<p><img src=\"leanote://file/getImage?fileId=5d8478e8e1488a763c000015\" alt=\"\"></p>\n<p>问题找到了，感觉自己好蠢。</p>\n<h2 id=\"解决问题\"><a href=\"#解决问题\" class=\"headerlink\" title=\"解决问题\"></a>解决问题</h2><h3 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h3><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"comment\"># REDIS_URL 中自己带上密码</span></span><br><span class=\"line\">    <span class=\"comment\"># Connection URL. Overrides host, port, and password. User is ignored. Example:</span></span><br><span class=\"line\">    <span class=\"comment\"># redis://user:password@example.com:6379</span></span><br><span class=\"line\">    <span class=\"comment\"># url: redis://UserIsIgnored:testpassword123@192.168.1.233:6379</span></span><br><span class=\"line\">    <span class=\"comment\"># HOST 和 PASSWORD 是一套配置</span></span><br><span class=\"line\">    <span class=\"attr\">host:</span> <span class=\"number\">192.168</span><span class=\"number\">.1</span><span class=\"number\">.233</span></span><br><span class=\"line\">    <span class=\"comment\"># 如果有密码 （用于RedisTemplate ，Lettuce不会拿这个password）</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">testpassword123</span></span><br><span class=\"line\">    <span class=\"comment\"># 存储到分区1</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># 默认超时2000</span></span><br><span class=\"line\">    <span class=\"attr\">timeout:</span> <span class=\"number\">3000</span></span><br></pre></td></tr></table></figure>\n\n<p>修改后启动：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[20190828 03:15:04] ERROR 8564 --- [nio-8086-exec-2] c.z.v.d.a.c.mvc.GlobalExceptionHandler   : Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\"></span><br><span class=\"line\">org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisCommandExecutionException: NOAUTH Authentication required.</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1092)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1065)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedConnection(LettuceConnectionFactory.java:865)</span><br><span class=\"line\">\tat org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getConnection(LettuceConnectionFactory.java:340)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.execute(DefaultRedisCacheWriter.java:238)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.DefaultRedisCacheWriter.get(DefaultRedisCacheWriter.java:109)</span><br><span class=\"line\">\tat org.springframework.data.redis.cache.RedisCache.lookup(RedisCache.java:82)</span><br><span class=\"line\">\tat org.springframework.cache.support.AbstractValueAdaptingCache.get(AbstractValueAdaptingCache.java:58)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.AbstractCacheInvoker.doGet(AbstractCacheInvoker.java:73)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.findInCaches(CacheAspectSupport.java:554)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.findCachedItem(CacheAspectSupport.java:519)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:401)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheAspectSupport.execute(CacheAspectSupport.java:345)</span><br><span class=\"line\">\tat org.springframework.cache.interceptor.CacheInterceptor.invoke(CacheInterceptor.java:61)</span><br><span class=\"line\">\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)</span><br><span class=\"line\">\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688)</span><br><span class=\"line\">\tat com.zunchen.video.dmp.service.impl.onvif.OnvifDeviceCacheServiceImpl$EnhancerBySpringCGLIB$b001f767.connectOnvifDevice(&lt;generated&gt;)</span><br><span class=\"line\">\tat com.zunchen.video.dmp.admin.api.ConnectDeviceApiController.connect(ConnectDeviceApiController.java:36)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class=\"line\">\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class=\"line\">\tat java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215)</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800)</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038)</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:890)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634)</span><br><span class=\"line\">\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875)</span><br><span class=\"line\">\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.web.trace.servlet.HttpTraceFilter.doFilterInternal(HttpTraceFilter.java:90)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:154)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.filterAndRecordMetrics(WebMvcMetricsFilter.java:122)</span><br><span class=\"line\">\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:107)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)</span><br><span class=\"line\">\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)</span><br><span class=\"line\">\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)</span><br><span class=\"line\">\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139)</span><br><span class=\"line\">\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)</span><br><span class=\"line\">\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)</span><br><span class=\"line\">\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)</span><br><span class=\"line\">\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)</span><br><span class=\"line\">\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415)</span><br><span class=\"line\">\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)</span><br><span class=\"line\">\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)</span><br><span class=\"line\">\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)</span><br><span class=\"line\">\tat java.lang.Thread.run(Thread.java:748)</span><br></pre></td></tr></table></figure>\n\n<p>仍然在报错，这下尴尬了。</p>\n<h3 id=\"再次解决问题\"><a href=\"#再次解决问题\" class=\"headerlink\" title=\"再次解决问题\"></a>再次解决问题</h3><p><img src=\"leanote://file/getImage?fileId=5d847965e1488a763c000016\" alt=\"\"></p>\n<p>径直来到报错信息提示的地方，估计是红框出出现了异常。此处调用的是接口方法，不知道进了那个方法，没关系，打个断点强制步入。</p>\n<p><img src=\"leanote://file/getImage?fileId=5d847984e1488a763c000017\" alt=\"\"></p>\n<p>有点懒，不想解释了，直接画图，发现是redisURISupplier中的password仍然是空的。不想知道为什么了，我只想解决问题。源码点过去看下。</p>\n<p><img src=\"leanote://file/getImage?fileId=5d847996e1488a763c000018\" alt=\"\"></p>\n<p> 查看该类的构造方法，这个东西正在解析RedisURI，那RedisURI哪儿来的呢？配置里配的呗。\n </p>\n<h2 id=\"成功解决问题\"><a href=\"#成功解决问题\" class=\"headerlink\" title=\"成功解决问题\"></a>成功解决问题</h2><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">redis:</span></span><br><span class=\"line\">    <span class=\"comment\"># REDIS_URL 中自己带上密码</span></span><br><span class=\"line\">    <span class=\"comment\"># Connection URL. Overrides host, port, and password. User is ignored. Example:</span></span><br><span class=\"line\">    <span class=\"comment\"># redis://user:password@example.com:6379</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">redis://UserIsIgnored:testpassword123@192.168.1.233:6379</span></span><br><span class=\"line\">    <span class=\"comment\"># HOST 和 PASSWORD 是一套配置</span></span><br><span class=\"line\">    <span class=\"comment\"># host: 192.168.1.233</span></span><br><span class=\"line\">    <span class=\"comment\"># 如果有密码 （用于RedisTemplate ，Lettuce不会拿这个password）</span></span><br><span class=\"line\">    <span class=\"comment\"># password: testpassword123</span></span><br><span class=\"line\">    <span class=\"comment\"># 存储到分区1</span></span><br><span class=\"line\">    <span class=\"attr\">database:</span> <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"comment\"># 默认超时2000</span></span><br><span class=\"line\">    <span class=\"attr\">timeout:</span> <span class=\"number\">3000</span></span><br></pre></td></tr></table></figure>\n\n<p>这次好了，redis成功连接。大功告成。</p>\n"},{"title":"[Centos]yum仓库配置及常用操作","date":"2019-01-02T12:46:25.000Z","updated":"2020-01-06T05:31:00.000Z","comments":1,"_content":"\n## 常用的储存库\n\n \n\n## 要注意的坑\n\n- 储存库要启用了才有效\n- `yum repo` 只能显示已启用的储存库 显示全部需要`yum repolist all`\n- 如果使用`yum-config-manager`配置仓库一定要记得保存\n- 配置完后记得要`yum makecache`建立缓存，如果不放心可以先`yum clean all `清除所有缓存\n\n&gt; 上面的坑我全部踩了\n\n## 命令 yum repolist all\n\n```text\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: mirror.scalabledns.com\n * elrepo: repos.lax-noc.com\n * elrepo-extras: repos.lax-noc.com\n * elrepo-kernel: repos.lax-noc.com\n * extras: repos-lax.psychz.net\n * updates: repos-lax.psychz.net\nrepo id                       repo name                        status\n// 这些仓库应该是系统升级时留下来的\nC7.0.1406-base/x86_64         CentOS-7.0.1406 - Base           disabled\nC7.0.1406-centosplus/x86_64   CentOS-7.0.1406 - CentOSPlus     disabled\nC7.0.1406-extras/x86_64       CentOS-7.0.1406 - Extras         disabled\nC7.0.1406-fasttrack/x86_64    CentOS-7.0.1406 - Fasttrack      disabled\nC7.0.1406-updates/x86_64      CentOS-7.0.1406 - Updates        disabled\nC7.1.1503-base/x86_64         CentOS-7.1.1503 - Base           disabled\nC7.1.1503-centosplus/x86_64   CentOS-7.1.1503 - CentOSPlus     disabled\nC7.1.1503-extras/x86_64       CentOS-7.1.1503 - Extras         disabled\nC7.1.1503-fasttrack/x86_64    CentOS-7.1.1503 - Fasttrack      disabled\nC7.1.1503-updates/x86_64      CentOS-7.1.1503 - Updates        disabled\nC7.2.1511-base/x86_64         CentOS-7.2.1511 - Base           disabled\nC7.2.1511-centosplus/x86_64   CentOS-7.2.1511 - CentOSPlus     disabled\nC7.2.1511-extras/x86_64       CentOS-7.2.1511 - Extras         disabled\nC7.2.1511-fasttrack/x86_64    CentOS-7.2.1511 - Fasttrack      disabled\nC7.2.1511-updates/x86_64      CentOS-7.2.1511 - Updates        disabled\nC7.3.1611-base/x86_64         CentOS-7.3.1611 - Base           disabled\nC7.3.1611-centosplus/x86_64   CentOS-7.3.1611 - CentOSPlus     disabled\nC7.3.1611-extras/x86_64       CentOS-7.3.1611 - Extras         disabled\nC7.3.1611-fasttrack/x86_64    CentOS-7.3.1611 - Fasttrack      disabled\nC7.3.1611-updates/x86_64      CentOS-7.3.1611 - Updates        disabled\nC7.4.1708-base/x86_64         CentOS-7.4.1708 - Base           disabled\nC7.4.1708-centosplus/x86_64   CentOS-7.4.1708 - CentOSPlus     disabled\nC7.4.1708-extras/x86_64       CentOS-7.4.1708 - Extras         disabled\nC7.4.1708-fasttrack/x86_64    CentOS-7.4.1708 - Fasttrack      disabled\nC7.4.1708-updates/x86_64      CentOS-7.4.1708 - Updates        disabled\nC7.5.1804-base/x86_64         CentOS-7.5.1804 - Base           disabled\nC7.5.1804-centosplus/x86_64   CentOS-7.5.1804 - CentOSPlus     disabled\nC7.5.1804-extras/x86_64       CentOS-7.5.1804 - Extras         disabled\nC7.5.1804-fasttrack/x86_64    CentOS-7.5.1804 - Fasttrack      disabled\nC7.5.1804-updates/x86_64      CentOS-7.5.1804 - Updates        disabled\nC7.6.1810-base/x86_64         CentOS-7.6.1810 - Base           disabled\nC7.6.1810-centosplus/x86_64   CentOS-7.6.1810 - CentOSPlus     disabled\nC7.6.1810-extras/x86_64       CentOS-7.6.1810 - Extras         disabled\nC7.6.1810-fasttrack/x86_64    CentOS-7.6.1810 - Fasttrack      disabled\nC7.6.1810-updates/x86_64      CentOS-7.6.1810 - Updates        disabled\n// centos7核心库 源码库和开发库的源就不开了\nbase/7/x86_64                 CentOS-7 - Base                  enabled: 10,096+1\nbase-debuginfo/x86_64         CentOS-7 - Debuginfo             disabled\nbase-source/7                 CentOS-7 - Base Sources          disabled\n// 看上去是多媒体相关的库 没桌面环境应该是用不上了\nc7-media                      CentOS-7 - Media                 disabled\n// 这个源主要是用来替换base源的，其中有不少包是base源的增强版\n// 但是如果开启这个源部分包可能会于base冲突 \n// 需要在base源中exclude 或者使用yum-plugin-priorities插件来保证兼容性\n// 引用WIKI: https://wiki.centos.org/zh/AdditionalResources/Repositories/CentOSPlus\ncentosplus/7/x86_64           CentOS-7 - Plus                  disabled\ncentosplus-source/7           CentOS-7 - Plus Sources          disabled\n// cr = Continuous Release 下次发布内容 相当于beta版了\ncr/7/x86_64                   CentOS-7 - cr                    disabled\n// elrepo = The Community Enterprise Linux Repository\n// http://elrepo.org 从描述中可以看出是驱动包 如果有UI可能要开\nelrepo                        ELRepo.org Community Enterprise  enabled:      147\nelrepo-extras                 ELRepo.org Community Enterprise  enabled:       19\nelrepo-kernel                 ELRepo.org Community Enterprise  enabled:       37\nelrepo-testing                ELRepo.org Community Enterprise  disabled\n// 这个源要开啊 EPEL仓库 相当多常用的软件都在里面\n// https://fedoraproject.org/\nepel/x86_64                   Extra Packages for Enterprise Li disabled\nepel-debuginfo/x86_64         Extra Packages for Enterprise Li disabled\nepel-source/x86_64            Extra Packages for Enterprise Li disabled\nepel-testing/x86_64           Extra Packages for Enterprise Li disabled\nepel-testing-debuginfo/x86_64 Extra Packages for Enterprise Li disabled\nepel-testing-source/x86_64    Extra Packages for Enterprise Li disabled\nextras/7/x86_64               CentOS-7 - Extras                enabled:      305\nextras-source/7               CentOS-7 - Extras Sources        disabled\nfasttrack/7/x86_64            CentOS-7 - fasttrack             disabled\nupdates/7/x86_64              CentOS-7 - Updates               enabled:    733+5\nupdates-source/7              CentOS-7 - Updates Sources       disabled\nrepolist: 11,337\n```\n\n## 命令 yum-config-manager [yum配置管理器]\n```text\nLoaded plugins: fastestmirror\nUsage: yum-config-manager [options] [section ...]\n\nOptions:\n  Plugin Options:\n\n  Yum Base Options:\n    -h, --help          show this help message and exit\n    -t, --tolerant      be tolerant of errors\n    // 完全从系统缓存运行，不更新缓存\n    -C, --cacheonly     run entirely from system cache, don't update cache\n    -c [config file], --config=[config file]\n                        config file location\n    -R [minutes], --randomwait=[minutes]\n                        maximum command wait time\n    -d [debug level], --debuglevel=[debug level]\n                        debugging output level\n    --showduplicates    show duplicates, in repos, in list/search commands\n    -e [error level], --errorlevel=[error level]\n                        error output level\n    --rpmverbosity=[debug level name]\n                        debugging output level for rpm\n    -q, --quiet         quiet operation\n    -v, --verbose       verbose operation\n    -y, --assumeyes     answer yes for all questions\n    --assumeno          answer no for all questions\n    --version           show Yum version and exit\n    --installroot=[path]\n                        set install root\n    --enablerepo=[repo]\n                        // 启用储存库\n                        enable one or more repositories (wildcards allowed)\n    --disablerepo=[repo]\n                        disable one or more repositories (wildcards allowed)\n    -x [package], --exclude=[package]\n                        exclude package(s) by name or glob\n    --disableexcludes=[repo]\n                        disable exclude from main, for a repo or for\n                        everything\n    --disableincludes=[repo]\n                        disable includepkgs for a repo or for everything\n    --obsoletes         enable obsoletes processing during updates\n    --noplugins         disable Yum plugins\n    --nogpgcheck        disable gpg signature checking\n    --disableplugin=[plugin]\n                        disable plugins by name\n    --enableplugin=[plugin]\n                        enable plugins by name\n    --skip-broken       skip packages with depsolving problems\n    --color=COLOR       control whether color is used\n    --releasever=RELEASEVER\n                        set value of $releasever in yum config and repo files\n    --downloadonly      don't update, just download\n    --downloaddir=DLDIR\n                        specifies an alternate directory to store packages\n    --setopt=SETOPTS    set arbitrary config and repo options\n    --bugfix            Include bugfix relevant packages, in updates\n    --security          Include security relevant packages, in updates\n    --advisory=ADVS, --advisories=ADVS\n                        Include packages needed to fix the given advisory, in\n                        updates\n    --bzs=BZS           Include packages needed to fix the given BZ, in\n                        updates\n    --cves=CVES         Include packages needed to fix the given CVE, in\n                        updates\n    --sec-severity=SEVS, --secseverity=SEVS\n                        Include security relevant packages matching the\n                        severity, in updates\n\n  yum-config-manager options:\n    // 保存当前设置\n    --save              save the current options (useful with --setopt)\n    // 启用仓库 (自动保存)\n    --enable            enable the specified repos (automatically saves)\n    // 禁用仓库 (自动保存)\n    --disable           disable the specified repos (automatically saves)\n    // 从文件或URL添加仓库 (并启用)\n    --add-repo=ADDREPO  add (and enable) the repo from the specified file or\n                        url\n\n```\n\n## 命令 yum\n\n```text\nLoaded plugins: fastestmirror\nUsage: yum [options] COMMAND\n\nList of Commands:\n\ncheck          Check for problems in the rpmdb\ncheck-update   Check for available package updates\nclean          Remove cached data\ndeplist        List a package's dependencies\ndistribution-synchronization Synchronize installed packages to the latest available versions\ndowngrade      downgrade a package\nerase          Remove a package or packages from your system\nfs             Acts on the filesystem data of the host, mainly for removing docs/lanuages for minimal hosts.\nfssnapshot     Creates filesystem snapshots, or lists/deletes current snapshots.\ngroups         Display, or use, the groups information\nhelp           Display a helpful usage message\nhistory        Display, or use, the transaction history\ninfo           Display details about a package or group of packages\ninstall        Install a package or packages on your system\nlist           List a package or groups of packages\nload-transaction load a saved transaction from filename\nmakecache      Generate the metadata cache\nprovides       Find what package provides the given value\nreinstall      reinstall a package\nrepo-pkgs      Treat a repo. as a group of packages, so we can install/remove all of them\nrepolist       Display the configured software repositories\nsearch         Search package details for the given string\nshell          Run an interactive yum shell\nswap           Simple way to swap packages, instead of using shell\nupdate         Update a package or packages on your system\nupdate-minimal Works like upgrade, but goes to the 'newest' package match which fixes a problem that affects your system\nupdateinfo     Acts on repository update information\nupgrade        Update packages taking obsoletes into account\nversion        Display a version for the machine and/or available repos.\n\n\nOptions:\n  -h, --help            show this help message and exit\n  -t, --tolerant        be tolerant of errors\n  -C, --cacheonly       run entirely from system cache, don't update cache\n  -c [config file], --config=[config file]\n                        config file location\n  -R [minutes], --randomwait=[minutes]\n                        maximum command wait time\n  -d [debug level], --debuglevel=[debug level]\n                        debugging output level\n  --showduplicates      show duplicates, in repos, in list/search commands\n  -e [error level], --errorlevel=[error level]\n                        error output level\n  --rpmverbosity=[debug level name]\n                        debugging output level for rpm\n  -q, --quiet           quiet operation\n  -v, --verbose         verbose operation\n  -y, --assumeyes       answer yes for all questions\n  --assumeno            answer no for all questions\n  --version             show Yum version and exit\n  --installroot=[path]  set install root\n  --enablerepo=[repo]   enable one or more repositories (wildcards allowed)\n  --disablerepo=[repo]  disable one or more repositories (wildcards allowed)\n  -x [package], --exclude=[package]\n                        exclude package(s) by name or glob\n  --disableexcludes=[repo]\n                        disable exclude from main, for a repo or for\n                        everything\n  --disableincludes=[repo]\n                        disable includepkgs for a repo or for everything\n  --obsoletes           enable obsoletes processing during updates\n  --noplugins           disable Yum plugins\n  --nogpgcheck          disable gpg signature checking\n  --disableplugin=[plugin]\n                        disable plugins by name\n  --enableplugin=[plugin]\n                        enable plugins by name\n  --skip-broken         skip packages with depsolving problems\n  --color=COLOR         control whether color is used\n  --releasever=RELEASEVER\n                        set value of $releasever in yum config and repo files\n  --downloadonly        don't update, just download\n  --downloaddir=DLDIR   specifies an alternate directory to store packages\n  --setopt=SETOPTS      set arbitrary config and repo options\n  --bugfix              Include bugfix relevant packages, in updates\n  --security            Include security relevant packages, in updates\n  --advisory=ADVS, --advisories=ADVS\n                        Include packages needed to fix the given advisory, in\n                        updates\n  --bzs=BZS             Include packages needed to fix the given BZ, in\n                        updates\n  --cves=CVES           Include packages needed to fix the given CVE, in\n                        updates\n  --sec-severity=SEVS, --secseverity=SEVS\n                        Include security relevant packages matching the\n                        severity, in updates\n\n  Plugin Options:\n\n```\n","source":"_posts/[Centos]yum仓库配置及常用操作.md","raw":"---\ntitle: '[Centos]yum仓库配置及常用操作'\ndate: 2019/1/2 20:46:25\nupdated: 2020/1/6 13:31\ncomments: true\ntags: \n    - linux\ncategories: \n    - [Study, OperationAndMaintenance]\n---\n\n## 常用的储存库\n\n \n\n## 要注意的坑\n\n- 储存库要启用了才有效\n- `yum repo` 只能显示已启用的储存库 显示全部需要`yum repolist all`\n- 如果使用`yum-config-manager`配置仓库一定要记得保存\n- 配置完后记得要`yum makecache`建立缓存，如果不放心可以先`yum clean all `清除所有缓存\n\n&gt; 上面的坑我全部踩了\n\n## 命令 yum repolist all\n\n```text\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: mirror.scalabledns.com\n * elrepo: repos.lax-noc.com\n * elrepo-extras: repos.lax-noc.com\n * elrepo-kernel: repos.lax-noc.com\n * extras: repos-lax.psychz.net\n * updates: repos-lax.psychz.net\nrepo id                       repo name                        status\n// 这些仓库应该是系统升级时留下来的\nC7.0.1406-base/x86_64         CentOS-7.0.1406 - Base           disabled\nC7.0.1406-centosplus/x86_64   CentOS-7.0.1406 - CentOSPlus     disabled\nC7.0.1406-extras/x86_64       CentOS-7.0.1406 - Extras         disabled\nC7.0.1406-fasttrack/x86_64    CentOS-7.0.1406 - Fasttrack      disabled\nC7.0.1406-updates/x86_64      CentOS-7.0.1406 - Updates        disabled\nC7.1.1503-base/x86_64         CentOS-7.1.1503 - Base           disabled\nC7.1.1503-centosplus/x86_64   CentOS-7.1.1503 - CentOSPlus     disabled\nC7.1.1503-extras/x86_64       CentOS-7.1.1503 - Extras         disabled\nC7.1.1503-fasttrack/x86_64    CentOS-7.1.1503 - Fasttrack      disabled\nC7.1.1503-updates/x86_64      CentOS-7.1.1503 - Updates        disabled\nC7.2.1511-base/x86_64         CentOS-7.2.1511 - Base           disabled\nC7.2.1511-centosplus/x86_64   CentOS-7.2.1511 - CentOSPlus     disabled\nC7.2.1511-extras/x86_64       CentOS-7.2.1511 - Extras         disabled\nC7.2.1511-fasttrack/x86_64    CentOS-7.2.1511 - Fasttrack      disabled\nC7.2.1511-updates/x86_64      CentOS-7.2.1511 - Updates        disabled\nC7.3.1611-base/x86_64         CentOS-7.3.1611 - Base           disabled\nC7.3.1611-centosplus/x86_64   CentOS-7.3.1611 - CentOSPlus     disabled\nC7.3.1611-extras/x86_64       CentOS-7.3.1611 - Extras         disabled\nC7.3.1611-fasttrack/x86_64    CentOS-7.3.1611 - Fasttrack      disabled\nC7.3.1611-updates/x86_64      CentOS-7.3.1611 - Updates        disabled\nC7.4.1708-base/x86_64         CentOS-7.4.1708 - Base           disabled\nC7.4.1708-centosplus/x86_64   CentOS-7.4.1708 - CentOSPlus     disabled\nC7.4.1708-extras/x86_64       CentOS-7.4.1708 - Extras         disabled\nC7.4.1708-fasttrack/x86_64    CentOS-7.4.1708 - Fasttrack      disabled\nC7.4.1708-updates/x86_64      CentOS-7.4.1708 - Updates        disabled\nC7.5.1804-base/x86_64         CentOS-7.5.1804 - Base           disabled\nC7.5.1804-centosplus/x86_64   CentOS-7.5.1804 - CentOSPlus     disabled\nC7.5.1804-extras/x86_64       CentOS-7.5.1804 - Extras         disabled\nC7.5.1804-fasttrack/x86_64    CentOS-7.5.1804 - Fasttrack      disabled\nC7.5.1804-updates/x86_64      CentOS-7.5.1804 - Updates        disabled\nC7.6.1810-base/x86_64         CentOS-7.6.1810 - Base           disabled\nC7.6.1810-centosplus/x86_64   CentOS-7.6.1810 - CentOSPlus     disabled\nC7.6.1810-extras/x86_64       CentOS-7.6.1810 - Extras         disabled\nC7.6.1810-fasttrack/x86_64    CentOS-7.6.1810 - Fasttrack      disabled\nC7.6.1810-updates/x86_64      CentOS-7.6.1810 - Updates        disabled\n// centos7核心库 源码库和开发库的源就不开了\nbase/7/x86_64                 CentOS-7 - Base                  enabled: 10,096+1\nbase-debuginfo/x86_64         CentOS-7 - Debuginfo             disabled\nbase-source/7                 CentOS-7 - Base Sources          disabled\n// 看上去是多媒体相关的库 没桌面环境应该是用不上了\nc7-media                      CentOS-7 - Media                 disabled\n// 这个源主要是用来替换base源的，其中有不少包是base源的增强版\n// 但是如果开启这个源部分包可能会于base冲突 \n// 需要在base源中exclude 或者使用yum-plugin-priorities插件来保证兼容性\n// 引用WIKI: https://wiki.centos.org/zh/AdditionalResources/Repositories/CentOSPlus\ncentosplus/7/x86_64           CentOS-7 - Plus                  disabled\ncentosplus-source/7           CentOS-7 - Plus Sources          disabled\n// cr = Continuous Release 下次发布内容 相当于beta版了\ncr/7/x86_64                   CentOS-7 - cr                    disabled\n// elrepo = The Community Enterprise Linux Repository\n// http://elrepo.org 从描述中可以看出是驱动包 如果有UI可能要开\nelrepo                        ELRepo.org Community Enterprise  enabled:      147\nelrepo-extras                 ELRepo.org Community Enterprise  enabled:       19\nelrepo-kernel                 ELRepo.org Community Enterprise  enabled:       37\nelrepo-testing                ELRepo.org Community Enterprise  disabled\n// 这个源要开啊 EPEL仓库 相当多常用的软件都在里面\n// https://fedoraproject.org/\nepel/x86_64                   Extra Packages for Enterprise Li disabled\nepel-debuginfo/x86_64         Extra Packages for Enterprise Li disabled\nepel-source/x86_64            Extra Packages for Enterprise Li disabled\nepel-testing/x86_64           Extra Packages for Enterprise Li disabled\nepel-testing-debuginfo/x86_64 Extra Packages for Enterprise Li disabled\nepel-testing-source/x86_64    Extra Packages for Enterprise Li disabled\nextras/7/x86_64               CentOS-7 - Extras                enabled:      305\nextras-source/7               CentOS-7 - Extras Sources        disabled\nfasttrack/7/x86_64            CentOS-7 - fasttrack             disabled\nupdates/7/x86_64              CentOS-7 - Updates               enabled:    733+5\nupdates-source/7              CentOS-7 - Updates Sources       disabled\nrepolist: 11,337\n```\n\n## 命令 yum-config-manager [yum配置管理器]\n```text\nLoaded plugins: fastestmirror\nUsage: yum-config-manager [options] [section ...]\n\nOptions:\n  Plugin Options:\n\n  Yum Base Options:\n    -h, --help          show this help message and exit\n    -t, --tolerant      be tolerant of errors\n    // 完全从系统缓存运行，不更新缓存\n    -C, --cacheonly     run entirely from system cache, don't update cache\n    -c [config file], --config=[config file]\n                        config file location\n    -R [minutes], --randomwait=[minutes]\n                        maximum command wait time\n    -d [debug level], --debuglevel=[debug level]\n                        debugging output level\n    --showduplicates    show duplicates, in repos, in list/search commands\n    -e [error level], --errorlevel=[error level]\n                        error output level\n    --rpmverbosity=[debug level name]\n                        debugging output level for rpm\n    -q, --quiet         quiet operation\n    -v, --verbose       verbose operation\n    -y, --assumeyes     answer yes for all questions\n    --assumeno          answer no for all questions\n    --version           show Yum version and exit\n    --installroot=[path]\n                        set install root\n    --enablerepo=[repo]\n                        // 启用储存库\n                        enable one or more repositories (wildcards allowed)\n    --disablerepo=[repo]\n                        disable one or more repositories (wildcards allowed)\n    -x [package], --exclude=[package]\n                        exclude package(s) by name or glob\n    --disableexcludes=[repo]\n                        disable exclude from main, for a repo or for\n                        everything\n    --disableincludes=[repo]\n                        disable includepkgs for a repo or for everything\n    --obsoletes         enable obsoletes processing during updates\n    --noplugins         disable Yum plugins\n    --nogpgcheck        disable gpg signature checking\n    --disableplugin=[plugin]\n                        disable plugins by name\n    --enableplugin=[plugin]\n                        enable plugins by name\n    --skip-broken       skip packages with depsolving problems\n    --color=COLOR       control whether color is used\n    --releasever=RELEASEVER\n                        set value of $releasever in yum config and repo files\n    --downloadonly      don't update, just download\n    --downloaddir=DLDIR\n                        specifies an alternate directory to store packages\n    --setopt=SETOPTS    set arbitrary config and repo options\n    --bugfix            Include bugfix relevant packages, in updates\n    --security          Include security relevant packages, in updates\n    --advisory=ADVS, --advisories=ADVS\n                        Include packages needed to fix the given advisory, in\n                        updates\n    --bzs=BZS           Include packages needed to fix the given BZ, in\n                        updates\n    --cves=CVES         Include packages needed to fix the given CVE, in\n                        updates\n    --sec-severity=SEVS, --secseverity=SEVS\n                        Include security relevant packages matching the\n                        severity, in updates\n\n  yum-config-manager options:\n    // 保存当前设置\n    --save              save the current options (useful with --setopt)\n    // 启用仓库 (自动保存)\n    --enable            enable the specified repos (automatically saves)\n    // 禁用仓库 (自动保存)\n    --disable           disable the specified repos (automatically saves)\n    // 从文件或URL添加仓库 (并启用)\n    --add-repo=ADDREPO  add (and enable) the repo from the specified file or\n                        url\n\n```\n\n## 命令 yum\n\n```text\nLoaded plugins: fastestmirror\nUsage: yum [options] COMMAND\n\nList of Commands:\n\ncheck          Check for problems in the rpmdb\ncheck-update   Check for available package updates\nclean          Remove cached data\ndeplist        List a package's dependencies\ndistribution-synchronization Synchronize installed packages to the latest available versions\ndowngrade      downgrade a package\nerase          Remove a package or packages from your system\nfs             Acts on the filesystem data of the host, mainly for removing docs/lanuages for minimal hosts.\nfssnapshot     Creates filesystem snapshots, or lists/deletes current snapshots.\ngroups         Display, or use, the groups information\nhelp           Display a helpful usage message\nhistory        Display, or use, the transaction history\ninfo           Display details about a package or group of packages\ninstall        Install a package or packages on your system\nlist           List a package or groups of packages\nload-transaction load a saved transaction from filename\nmakecache      Generate the metadata cache\nprovides       Find what package provides the given value\nreinstall      reinstall a package\nrepo-pkgs      Treat a repo. as a group of packages, so we can install/remove all of them\nrepolist       Display the configured software repositories\nsearch         Search package details for the given string\nshell          Run an interactive yum shell\nswap           Simple way to swap packages, instead of using shell\nupdate         Update a package or packages on your system\nupdate-minimal Works like upgrade, but goes to the 'newest' package match which fixes a problem that affects your system\nupdateinfo     Acts on repository update information\nupgrade        Update packages taking obsoletes into account\nversion        Display a version for the machine and/or available repos.\n\n\nOptions:\n  -h, --help            show this help message and exit\n  -t, --tolerant        be tolerant of errors\n  -C, --cacheonly       run entirely from system cache, don't update cache\n  -c [config file], --config=[config file]\n                        config file location\n  -R [minutes], --randomwait=[minutes]\n                        maximum command wait time\n  -d [debug level], --debuglevel=[debug level]\n                        debugging output level\n  --showduplicates      show duplicates, in repos, in list/search commands\n  -e [error level], --errorlevel=[error level]\n                        error output level\n  --rpmverbosity=[debug level name]\n                        debugging output level for rpm\n  -q, --quiet           quiet operation\n  -v, --verbose         verbose operation\n  -y, --assumeyes       answer yes for all questions\n  --assumeno            answer no for all questions\n  --version             show Yum version and exit\n  --installroot=[path]  set install root\n  --enablerepo=[repo]   enable one or more repositories (wildcards allowed)\n  --disablerepo=[repo]  disable one or more repositories (wildcards allowed)\n  -x [package], --exclude=[package]\n                        exclude package(s) by name or glob\n  --disableexcludes=[repo]\n                        disable exclude from main, for a repo or for\n                        everything\n  --disableincludes=[repo]\n                        disable includepkgs for a repo or for everything\n  --obsoletes           enable obsoletes processing during updates\n  --noplugins           disable Yum plugins\n  --nogpgcheck          disable gpg signature checking\n  --disableplugin=[plugin]\n                        disable plugins by name\n  --enableplugin=[plugin]\n                        enable plugins by name\n  --skip-broken         skip packages with depsolving problems\n  --color=COLOR         control whether color is used\n  --releasever=RELEASEVER\n                        set value of $releasever in yum config and repo files\n  --downloadonly        don't update, just download\n  --downloaddir=DLDIR   specifies an alternate directory to store packages\n  --setopt=SETOPTS      set arbitrary config and repo options\n  --bugfix              Include bugfix relevant packages, in updates\n  --security            Include security relevant packages, in updates\n  --advisory=ADVS, --advisories=ADVS\n                        Include packages needed to fix the given advisory, in\n                        updates\n  --bzs=BZS             Include packages needed to fix the given BZ, in\n                        updates\n  --cves=CVES           Include packages needed to fix the given CVE, in\n                        updates\n  --sec-severity=SEVS, --secseverity=SEVS\n                        Include security relevant packages matching the\n                        severity, in updates\n\n  Plugin Options:\n\n```\n","slug":"[Centos]yum仓库配置及常用操作","published":1,"layout":"post","photos":[],"link":"","_id":"ck520rgim0000tsova1gz0lx3","content":"<h2 id=\"常用的储存库\"><a href=\"#常用的储存库\" class=\"headerlink\" title=\"常用的储存库\"></a>常用的储存库</h2><h2 id=\"要注意的坑\"><a href=\"#要注意的坑\" class=\"headerlink\" title=\"要注意的坑\"></a>要注意的坑</h2><ul>\n<li>储存库要启用了才有效</li>\n<li><code>yum repo</code> 只能显示已启用的储存库 显示全部需要<code>yum repolist all</code></li>\n<li>如果使用<code>yum-config-manager</code>配置仓库一定要记得保存</li>\n<li>配置完后记得要<code>yum makecache</code>建立缓存，如果不放心可以先<code>yum clean all</code>清除所有缓存</li>\n</ul>\n<p>&gt; 上面的坑我全部踩了</p>\n<h2 id=\"命令-yum-repolist-all\"><a href=\"#命令-yum-repolist-all\" class=\"headerlink\" title=\"命令 yum repolist all\"></a>命令 yum repolist all</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Loading mirror speeds from cached hostfile</span><br><span class=\"line\"> * base: mirror.scalabledns.com</span><br><span class=\"line\"> * elrepo: repos.lax-noc.com</span><br><span class=\"line\"> * elrepo-extras: repos.lax-noc.com</span><br><span class=\"line\"> * elrepo-kernel: repos.lax-noc.com</span><br><span class=\"line\"> * extras: repos-lax.psychz.net</span><br><span class=\"line\"> * updates: repos-lax.psychz.net</span><br><span class=\"line\">repo id                       repo name                        status</span><br><span class=\"line\">&#x2F;&#x2F; 这些仓库应该是系统升级时留下来的</span><br><span class=\"line\">C7.0.1406-base&#x2F;x86_64         CentOS-7.0.1406 - Base           disabled</span><br><span class=\"line\">C7.0.1406-centosplus&#x2F;x86_64   CentOS-7.0.1406 - CentOSPlus     disabled</span><br><span class=\"line\">C7.0.1406-extras&#x2F;x86_64       CentOS-7.0.1406 - Extras         disabled</span><br><span class=\"line\">C7.0.1406-fasttrack&#x2F;x86_64    CentOS-7.0.1406 - Fasttrack      disabled</span><br><span class=\"line\">C7.0.1406-updates&#x2F;x86_64      CentOS-7.0.1406 - Updates        disabled</span><br><span class=\"line\">C7.1.1503-base&#x2F;x86_64         CentOS-7.1.1503 - Base           disabled</span><br><span class=\"line\">C7.1.1503-centosplus&#x2F;x86_64   CentOS-7.1.1503 - CentOSPlus     disabled</span><br><span class=\"line\">C7.1.1503-extras&#x2F;x86_64       CentOS-7.1.1503 - Extras         disabled</span><br><span class=\"line\">C7.1.1503-fasttrack&#x2F;x86_64    CentOS-7.1.1503 - Fasttrack      disabled</span><br><span class=\"line\">C7.1.1503-updates&#x2F;x86_64      CentOS-7.1.1503 - Updates        disabled</span><br><span class=\"line\">C7.2.1511-base&#x2F;x86_64         CentOS-7.2.1511 - Base           disabled</span><br><span class=\"line\">C7.2.1511-centosplus&#x2F;x86_64   CentOS-7.2.1511 - CentOSPlus     disabled</span><br><span class=\"line\">C7.2.1511-extras&#x2F;x86_64       CentOS-7.2.1511 - Extras         disabled</span><br><span class=\"line\">C7.2.1511-fasttrack&#x2F;x86_64    CentOS-7.2.1511 - Fasttrack      disabled</span><br><span class=\"line\">C7.2.1511-updates&#x2F;x86_64      CentOS-7.2.1511 - Updates        disabled</span><br><span class=\"line\">C7.3.1611-base&#x2F;x86_64         CentOS-7.3.1611 - Base           disabled</span><br><span class=\"line\">C7.3.1611-centosplus&#x2F;x86_64   CentOS-7.3.1611 - CentOSPlus     disabled</span><br><span class=\"line\">C7.3.1611-extras&#x2F;x86_64       CentOS-7.3.1611 - Extras         disabled</span><br><span class=\"line\">C7.3.1611-fasttrack&#x2F;x86_64    CentOS-7.3.1611 - Fasttrack      disabled</span><br><span class=\"line\">C7.3.1611-updates&#x2F;x86_64      CentOS-7.3.1611 - Updates        disabled</span><br><span class=\"line\">C7.4.1708-base&#x2F;x86_64         CentOS-7.4.1708 - Base           disabled</span><br><span class=\"line\">C7.4.1708-centosplus&#x2F;x86_64   CentOS-7.4.1708 - CentOSPlus     disabled</span><br><span class=\"line\">C7.4.1708-extras&#x2F;x86_64       CentOS-7.4.1708 - Extras         disabled</span><br><span class=\"line\">C7.4.1708-fasttrack&#x2F;x86_64    CentOS-7.4.1708 - Fasttrack      disabled</span><br><span class=\"line\">C7.4.1708-updates&#x2F;x86_64      CentOS-7.4.1708 - Updates        disabled</span><br><span class=\"line\">C7.5.1804-base&#x2F;x86_64         CentOS-7.5.1804 - Base           disabled</span><br><span class=\"line\">C7.5.1804-centosplus&#x2F;x86_64   CentOS-7.5.1804 - CentOSPlus     disabled</span><br><span class=\"line\">C7.5.1804-extras&#x2F;x86_64       CentOS-7.5.1804 - Extras         disabled</span><br><span class=\"line\">C7.5.1804-fasttrack&#x2F;x86_64    CentOS-7.5.1804 - Fasttrack      disabled</span><br><span class=\"line\">C7.5.1804-updates&#x2F;x86_64      CentOS-7.5.1804 - Updates        disabled</span><br><span class=\"line\">C7.6.1810-base&#x2F;x86_64         CentOS-7.6.1810 - Base           disabled</span><br><span class=\"line\">C7.6.1810-centosplus&#x2F;x86_64   CentOS-7.6.1810 - CentOSPlus     disabled</span><br><span class=\"line\">C7.6.1810-extras&#x2F;x86_64       CentOS-7.6.1810 - Extras         disabled</span><br><span class=\"line\">C7.6.1810-fasttrack&#x2F;x86_64    CentOS-7.6.1810 - Fasttrack      disabled</span><br><span class=\"line\">C7.6.1810-updates&#x2F;x86_64      CentOS-7.6.1810 - Updates        disabled</span><br><span class=\"line\">&#x2F;&#x2F; centos7核心库 源码库和开发库的源就不开了</span><br><span class=\"line\">base&#x2F;7&#x2F;x86_64                 CentOS-7 - Base                  enabled: 10,096+1</span><br><span class=\"line\">base-debuginfo&#x2F;x86_64         CentOS-7 - Debuginfo             disabled</span><br><span class=\"line\">base-source&#x2F;7                 CentOS-7 - Base Sources          disabled</span><br><span class=\"line\">&#x2F;&#x2F; 看上去是多媒体相关的库 没桌面环境应该是用不上了</span><br><span class=\"line\">c7-media                      CentOS-7 - Media                 disabled</span><br><span class=\"line\">&#x2F;&#x2F; 这个源主要是用来替换base源的，其中有不少包是base源的增强版</span><br><span class=\"line\">&#x2F;&#x2F; 但是如果开启这个源部分包可能会于base冲突 </span><br><span class=\"line\">&#x2F;&#x2F; 需要在base源中exclude 或者使用yum-plugin-priorities插件来保证兼容性</span><br><span class=\"line\">&#x2F;&#x2F; 引用WIKI: https:&#x2F;&#x2F;wiki.centos.org&#x2F;zh&#x2F;AdditionalResources&#x2F;Repositories&#x2F;CentOSPlus</span><br><span class=\"line\">centosplus&#x2F;7&#x2F;x86_64           CentOS-7 - Plus                  disabled</span><br><span class=\"line\">centosplus-source&#x2F;7           CentOS-7 - Plus Sources          disabled</span><br><span class=\"line\">&#x2F;&#x2F; cr &#x3D; Continuous Release 下次发布内容 相当于beta版了</span><br><span class=\"line\">cr&#x2F;7&#x2F;x86_64                   CentOS-7 - cr                    disabled</span><br><span class=\"line\">&#x2F;&#x2F; elrepo &#x3D; The Community Enterprise Linux Repository</span><br><span class=\"line\">&#x2F;&#x2F; http:&#x2F;&#x2F;elrepo.org 从描述中可以看出是驱动包 如果有UI可能要开</span><br><span class=\"line\">elrepo                        ELRepo.org Community Enterprise  enabled:      147</span><br><span class=\"line\">elrepo-extras                 ELRepo.org Community Enterprise  enabled:       19</span><br><span class=\"line\">elrepo-kernel                 ELRepo.org Community Enterprise  enabled:       37</span><br><span class=\"line\">elrepo-testing                ELRepo.org Community Enterprise  disabled</span><br><span class=\"line\">&#x2F;&#x2F; 这个源要开啊 EPEL仓库 相当多常用的软件都在里面</span><br><span class=\"line\">&#x2F;&#x2F; https:&#x2F;&#x2F;fedoraproject.org&#x2F;</span><br><span class=\"line\">epel&#x2F;x86_64                   Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-debuginfo&#x2F;x86_64         Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-source&#x2F;x86_64            Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-testing&#x2F;x86_64           Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-testing-debuginfo&#x2F;x86_64 Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-testing-source&#x2F;x86_64    Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">extras&#x2F;7&#x2F;x86_64               CentOS-7 - Extras                enabled:      305</span><br><span class=\"line\">extras-source&#x2F;7               CentOS-7 - Extras Sources        disabled</span><br><span class=\"line\">fasttrack&#x2F;7&#x2F;x86_64            CentOS-7 - fasttrack             disabled</span><br><span class=\"line\">updates&#x2F;7&#x2F;x86_64              CentOS-7 - Updates               enabled:    733+5</span><br><span class=\"line\">updates-source&#x2F;7              CentOS-7 - Updates Sources       disabled</span><br><span class=\"line\">repolist: 11,337</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"命令-yum-config-manager-yum配置管理器\"><a href=\"#命令-yum-config-manager-yum配置管理器\" class=\"headerlink\" title=\"命令 yum-config-manager [yum配置管理器]\"></a>命令 yum-config-manager [yum配置管理器]</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Usage: yum-config-manager [options] [section ...]</span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  Plugin Options:</span><br><span class=\"line\"></span><br><span class=\"line\">  Yum Base Options:</span><br><span class=\"line\">    -h, --help          show this help message and exit</span><br><span class=\"line\">    -t, --tolerant      be tolerant of errors</span><br><span class=\"line\">    &#x2F;&#x2F; 完全从系统缓存运行，不更新缓存</span><br><span class=\"line\">    -C, --cacheonly     run entirely from system cache, don&#39;t update cache</span><br><span class=\"line\">    -c [config file], --config&#x3D;[config file]</span><br><span class=\"line\">                        config file location</span><br><span class=\"line\">    -R [minutes], --randomwait&#x3D;[minutes]</span><br><span class=\"line\">                        maximum command wait time</span><br><span class=\"line\">    -d [debug level], --debuglevel&#x3D;[debug level]</span><br><span class=\"line\">                        debugging output level</span><br><span class=\"line\">    --showduplicates    show duplicates, in repos, in list&#x2F;search commands</span><br><span class=\"line\">    -e [error level], --errorlevel&#x3D;[error level]</span><br><span class=\"line\">                        error output level</span><br><span class=\"line\">    --rpmverbosity&#x3D;[debug level name]</span><br><span class=\"line\">                        debugging output level for rpm</span><br><span class=\"line\">    -q, --quiet         quiet operation</span><br><span class=\"line\">    -v, --verbose       verbose operation</span><br><span class=\"line\">    -y, --assumeyes     answer yes for all questions</span><br><span class=\"line\">    --assumeno          answer no for all questions</span><br><span class=\"line\">    --version           show Yum version and exit</span><br><span class=\"line\">    --installroot&#x3D;[path]</span><br><span class=\"line\">                        set install root</span><br><span class=\"line\">    --enablerepo&#x3D;[repo]</span><br><span class=\"line\">                        &#x2F;&#x2F; 启用储存库</span><br><span class=\"line\">                        enable one or more repositories (wildcards allowed)</span><br><span class=\"line\">    --disablerepo&#x3D;[repo]</span><br><span class=\"line\">                        disable one or more repositories (wildcards allowed)</span><br><span class=\"line\">    -x [package], --exclude&#x3D;[package]</span><br><span class=\"line\">                        exclude package(s) by name or glob</span><br><span class=\"line\">    --disableexcludes&#x3D;[repo]</span><br><span class=\"line\">                        disable exclude from main, for a repo or for</span><br><span class=\"line\">                        everything</span><br><span class=\"line\">    --disableincludes&#x3D;[repo]</span><br><span class=\"line\">                        disable includepkgs for a repo or for everything</span><br><span class=\"line\">    --obsoletes         enable obsoletes processing during updates</span><br><span class=\"line\">    --noplugins         disable Yum plugins</span><br><span class=\"line\">    --nogpgcheck        disable gpg signature checking</span><br><span class=\"line\">    --disableplugin&#x3D;[plugin]</span><br><span class=\"line\">                        disable plugins by name</span><br><span class=\"line\">    --enableplugin&#x3D;[plugin]</span><br><span class=\"line\">                        enable plugins by name</span><br><span class=\"line\">    --skip-broken       skip packages with depsolving problems</span><br><span class=\"line\">    --color&#x3D;COLOR       control whether color is used</span><br><span class=\"line\">    --releasever&#x3D;RELEASEVER</span><br><span class=\"line\">                        set value of $releasever in yum config and repo files</span><br><span class=\"line\">    --downloadonly      don&#39;t update, just download</span><br><span class=\"line\">    --downloaddir&#x3D;DLDIR</span><br><span class=\"line\">                        specifies an alternate directory to store packages</span><br><span class=\"line\">    --setopt&#x3D;SETOPTS    set arbitrary config and repo options</span><br><span class=\"line\">    --bugfix            Include bugfix relevant packages, in updates</span><br><span class=\"line\">    --security          Include security relevant packages, in updates</span><br><span class=\"line\">    --advisory&#x3D;ADVS, --advisories&#x3D;ADVS</span><br><span class=\"line\">                        Include packages needed to fix the given advisory, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">    --bzs&#x3D;BZS           Include packages needed to fix the given BZ, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">    --cves&#x3D;CVES         Include packages needed to fix the given CVE, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">    --sec-severity&#x3D;SEVS, --secseverity&#x3D;SEVS</span><br><span class=\"line\">                        Include security relevant packages matching the</span><br><span class=\"line\">                        severity, in updates</span><br><span class=\"line\"></span><br><span class=\"line\">  yum-config-manager options:</span><br><span class=\"line\">    &#x2F;&#x2F; 保存当前设置</span><br><span class=\"line\">    --save              save the current options (useful with --setopt)</span><br><span class=\"line\">    &#x2F;&#x2F; 启用仓库 (自动保存)</span><br><span class=\"line\">    --enable            enable the specified repos (automatically saves)</span><br><span class=\"line\">    &#x2F;&#x2F; 禁用仓库 (自动保存)</span><br><span class=\"line\">    --disable           disable the specified repos (automatically saves)</span><br><span class=\"line\">    &#x2F;&#x2F; 从文件或URL添加仓库 (并启用)</span><br><span class=\"line\">    --add-repo&#x3D;ADDREPO  add (and enable) the repo from the specified file or</span><br><span class=\"line\">                        url</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"命令-yum\"><a href=\"#命令-yum\" class=\"headerlink\" title=\"命令 yum\"></a>命令 yum</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Usage: yum [options] COMMAND</span><br><span class=\"line\"></span><br><span class=\"line\">List of Commands:</span><br><span class=\"line\"></span><br><span class=\"line\">check          Check for problems in the rpmdb</span><br><span class=\"line\">check-update   Check for available package updates</span><br><span class=\"line\">clean          Remove cached data</span><br><span class=\"line\">deplist        List a package&#39;s dependencies</span><br><span class=\"line\">distribution-synchronization Synchronize installed packages to the latest available versions</span><br><span class=\"line\">downgrade      downgrade a package</span><br><span class=\"line\">erase          Remove a package or packages from your system</span><br><span class=\"line\">fs             Acts on the filesystem data of the host, mainly for removing docs&#x2F;lanuages for minimal hosts.</span><br><span class=\"line\">fssnapshot     Creates filesystem snapshots, or lists&#x2F;deletes current snapshots.</span><br><span class=\"line\">groups         Display, or use, the groups information</span><br><span class=\"line\">help           Display a helpful usage message</span><br><span class=\"line\">history        Display, or use, the transaction history</span><br><span class=\"line\">info           Display details about a package or group of packages</span><br><span class=\"line\">install        Install a package or packages on your system</span><br><span class=\"line\">list           List a package or groups of packages</span><br><span class=\"line\">load-transaction load a saved transaction from filename</span><br><span class=\"line\">makecache      Generate the metadata cache</span><br><span class=\"line\">provides       Find what package provides the given value</span><br><span class=\"line\">reinstall      reinstall a package</span><br><span class=\"line\">repo-pkgs      Treat a repo. as a group of packages, so we can install&#x2F;remove all of them</span><br><span class=\"line\">repolist       Display the configured software repositories</span><br><span class=\"line\">search         Search package details for the given string</span><br><span class=\"line\">shell          Run an interactive yum shell</span><br><span class=\"line\">swap           Simple way to swap packages, instead of using shell</span><br><span class=\"line\">update         Update a package or packages on your system</span><br><span class=\"line\">update-minimal Works like upgrade, but goes to the &#39;newest&#39; package match which fixes a problem that affects your system</span><br><span class=\"line\">updateinfo     Acts on repository update information</span><br><span class=\"line\">upgrade        Update packages taking obsoletes into account</span><br><span class=\"line\">version        Display a version for the machine and&#x2F;or available repos.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  -h, --help            show this help message and exit</span><br><span class=\"line\">  -t, --tolerant        be tolerant of errors</span><br><span class=\"line\">  -C, --cacheonly       run entirely from system cache, don&#39;t update cache</span><br><span class=\"line\">  -c [config file], --config&#x3D;[config file]</span><br><span class=\"line\">                        config file location</span><br><span class=\"line\">  -R [minutes], --randomwait&#x3D;[minutes]</span><br><span class=\"line\">                        maximum command wait time</span><br><span class=\"line\">  -d [debug level], --debuglevel&#x3D;[debug level]</span><br><span class=\"line\">                        debugging output level</span><br><span class=\"line\">  --showduplicates      show duplicates, in repos, in list&#x2F;search commands</span><br><span class=\"line\">  -e [error level], --errorlevel&#x3D;[error level]</span><br><span class=\"line\">                        error output level</span><br><span class=\"line\">  --rpmverbosity&#x3D;[debug level name]</span><br><span class=\"line\">                        debugging output level for rpm</span><br><span class=\"line\">  -q, --quiet           quiet operation</span><br><span class=\"line\">  -v, --verbose         verbose operation</span><br><span class=\"line\">  -y, --assumeyes       answer yes for all questions</span><br><span class=\"line\">  --assumeno            answer no for all questions</span><br><span class=\"line\">  --version             show Yum version and exit</span><br><span class=\"line\">  --installroot&#x3D;[path]  set install root</span><br><span class=\"line\">  --enablerepo&#x3D;[repo]   enable one or more repositories (wildcards allowed)</span><br><span class=\"line\">  --disablerepo&#x3D;[repo]  disable one or more repositories (wildcards allowed)</span><br><span class=\"line\">  -x [package], --exclude&#x3D;[package]</span><br><span class=\"line\">                        exclude package(s) by name or glob</span><br><span class=\"line\">  --disableexcludes&#x3D;[repo]</span><br><span class=\"line\">                        disable exclude from main, for a repo or for</span><br><span class=\"line\">                        everything</span><br><span class=\"line\">  --disableincludes&#x3D;[repo]</span><br><span class=\"line\">                        disable includepkgs for a repo or for everything</span><br><span class=\"line\">  --obsoletes           enable obsoletes processing during updates</span><br><span class=\"line\">  --noplugins           disable Yum plugins</span><br><span class=\"line\">  --nogpgcheck          disable gpg signature checking</span><br><span class=\"line\">  --disableplugin&#x3D;[plugin]</span><br><span class=\"line\">                        disable plugins by name</span><br><span class=\"line\">  --enableplugin&#x3D;[plugin]</span><br><span class=\"line\">                        enable plugins by name</span><br><span class=\"line\">  --skip-broken         skip packages with depsolving problems</span><br><span class=\"line\">  --color&#x3D;COLOR         control whether color is used</span><br><span class=\"line\">  --releasever&#x3D;RELEASEVER</span><br><span class=\"line\">                        set value of $releasever in yum config and repo files</span><br><span class=\"line\">  --downloadonly        don&#39;t update, just download</span><br><span class=\"line\">  --downloaddir&#x3D;DLDIR   specifies an alternate directory to store packages</span><br><span class=\"line\">  --setopt&#x3D;SETOPTS      set arbitrary config and repo options</span><br><span class=\"line\">  --bugfix              Include bugfix relevant packages, in updates</span><br><span class=\"line\">  --security            Include security relevant packages, in updates</span><br><span class=\"line\">  --advisory&#x3D;ADVS, --advisories&#x3D;ADVS</span><br><span class=\"line\">                        Include packages needed to fix the given advisory, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">  --bzs&#x3D;BZS             Include packages needed to fix the given BZ, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">  --cves&#x3D;CVES           Include packages needed to fix the given CVE, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">  --sec-severity&#x3D;SEVS, --secseverity&#x3D;SEVS</span><br><span class=\"line\">                        Include security relevant packages matching the</span><br><span class=\"line\">                        severity, in updates</span><br><span class=\"line\"></span><br><span class=\"line\">  Plugin Options:</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"常用的储存库\"><a href=\"#常用的储存库\" class=\"headerlink\" title=\"常用的储存库\"></a>常用的储存库</h2><h2 id=\"要注意的坑\"><a href=\"#要注意的坑\" class=\"headerlink\" title=\"要注意的坑\"></a>要注意的坑</h2><ul>\n<li>储存库要启用了才有效</li>\n<li><code>yum repo</code> 只能显示已启用的储存库 显示全部需要<code>yum repolist all</code></li>\n<li>如果使用<code>yum-config-manager</code>配置仓库一定要记得保存</li>\n<li>配置完后记得要<code>yum makecache</code>建立缓存，如果不放心可以先<code>yum clean all</code>清除所有缓存</li>\n</ul>\n<p>&gt; 上面的坑我全部踩了</p>\n<h2 id=\"命令-yum-repolist-all\"><a href=\"#命令-yum-repolist-all\" class=\"headerlink\" title=\"命令 yum repolist all\"></a>命令 yum repolist all</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Loading mirror speeds from cached hostfile</span><br><span class=\"line\"> * base: mirror.scalabledns.com</span><br><span class=\"line\"> * elrepo: repos.lax-noc.com</span><br><span class=\"line\"> * elrepo-extras: repos.lax-noc.com</span><br><span class=\"line\"> * elrepo-kernel: repos.lax-noc.com</span><br><span class=\"line\"> * extras: repos-lax.psychz.net</span><br><span class=\"line\"> * updates: repos-lax.psychz.net</span><br><span class=\"line\">repo id                       repo name                        status</span><br><span class=\"line\">&#x2F;&#x2F; 这些仓库应该是系统升级时留下来的</span><br><span class=\"line\">C7.0.1406-base&#x2F;x86_64         CentOS-7.0.1406 - Base           disabled</span><br><span class=\"line\">C7.0.1406-centosplus&#x2F;x86_64   CentOS-7.0.1406 - CentOSPlus     disabled</span><br><span class=\"line\">C7.0.1406-extras&#x2F;x86_64       CentOS-7.0.1406 - Extras         disabled</span><br><span class=\"line\">C7.0.1406-fasttrack&#x2F;x86_64    CentOS-7.0.1406 - Fasttrack      disabled</span><br><span class=\"line\">C7.0.1406-updates&#x2F;x86_64      CentOS-7.0.1406 - Updates        disabled</span><br><span class=\"line\">C7.1.1503-base&#x2F;x86_64         CentOS-7.1.1503 - Base           disabled</span><br><span class=\"line\">C7.1.1503-centosplus&#x2F;x86_64   CentOS-7.1.1503 - CentOSPlus     disabled</span><br><span class=\"line\">C7.1.1503-extras&#x2F;x86_64       CentOS-7.1.1503 - Extras         disabled</span><br><span class=\"line\">C7.1.1503-fasttrack&#x2F;x86_64    CentOS-7.1.1503 - Fasttrack      disabled</span><br><span class=\"line\">C7.1.1503-updates&#x2F;x86_64      CentOS-7.1.1503 - Updates        disabled</span><br><span class=\"line\">C7.2.1511-base&#x2F;x86_64         CentOS-7.2.1511 - Base           disabled</span><br><span class=\"line\">C7.2.1511-centosplus&#x2F;x86_64   CentOS-7.2.1511 - CentOSPlus     disabled</span><br><span class=\"line\">C7.2.1511-extras&#x2F;x86_64       CentOS-7.2.1511 - Extras         disabled</span><br><span class=\"line\">C7.2.1511-fasttrack&#x2F;x86_64    CentOS-7.2.1511 - Fasttrack      disabled</span><br><span class=\"line\">C7.2.1511-updates&#x2F;x86_64      CentOS-7.2.1511 - Updates        disabled</span><br><span class=\"line\">C7.3.1611-base&#x2F;x86_64         CentOS-7.3.1611 - Base           disabled</span><br><span class=\"line\">C7.3.1611-centosplus&#x2F;x86_64   CentOS-7.3.1611 - CentOSPlus     disabled</span><br><span class=\"line\">C7.3.1611-extras&#x2F;x86_64       CentOS-7.3.1611 - Extras         disabled</span><br><span class=\"line\">C7.3.1611-fasttrack&#x2F;x86_64    CentOS-7.3.1611 - Fasttrack      disabled</span><br><span class=\"line\">C7.3.1611-updates&#x2F;x86_64      CentOS-7.3.1611 - Updates        disabled</span><br><span class=\"line\">C7.4.1708-base&#x2F;x86_64         CentOS-7.4.1708 - Base           disabled</span><br><span class=\"line\">C7.4.1708-centosplus&#x2F;x86_64   CentOS-7.4.1708 - CentOSPlus     disabled</span><br><span class=\"line\">C7.4.1708-extras&#x2F;x86_64       CentOS-7.4.1708 - Extras         disabled</span><br><span class=\"line\">C7.4.1708-fasttrack&#x2F;x86_64    CentOS-7.4.1708 - Fasttrack      disabled</span><br><span class=\"line\">C7.4.1708-updates&#x2F;x86_64      CentOS-7.4.1708 - Updates        disabled</span><br><span class=\"line\">C7.5.1804-base&#x2F;x86_64         CentOS-7.5.1804 - Base           disabled</span><br><span class=\"line\">C7.5.1804-centosplus&#x2F;x86_64   CentOS-7.5.1804 - CentOSPlus     disabled</span><br><span class=\"line\">C7.5.1804-extras&#x2F;x86_64       CentOS-7.5.1804 - Extras         disabled</span><br><span class=\"line\">C7.5.1804-fasttrack&#x2F;x86_64    CentOS-7.5.1804 - Fasttrack      disabled</span><br><span class=\"line\">C7.5.1804-updates&#x2F;x86_64      CentOS-7.5.1804 - Updates        disabled</span><br><span class=\"line\">C7.6.1810-base&#x2F;x86_64         CentOS-7.6.1810 - Base           disabled</span><br><span class=\"line\">C7.6.1810-centosplus&#x2F;x86_64   CentOS-7.6.1810 - CentOSPlus     disabled</span><br><span class=\"line\">C7.6.1810-extras&#x2F;x86_64       CentOS-7.6.1810 - Extras         disabled</span><br><span class=\"line\">C7.6.1810-fasttrack&#x2F;x86_64    CentOS-7.6.1810 - Fasttrack      disabled</span><br><span class=\"line\">C7.6.1810-updates&#x2F;x86_64      CentOS-7.6.1810 - Updates        disabled</span><br><span class=\"line\">&#x2F;&#x2F; centos7核心库 源码库和开发库的源就不开了</span><br><span class=\"line\">base&#x2F;7&#x2F;x86_64                 CentOS-7 - Base                  enabled: 10,096+1</span><br><span class=\"line\">base-debuginfo&#x2F;x86_64         CentOS-7 - Debuginfo             disabled</span><br><span class=\"line\">base-source&#x2F;7                 CentOS-7 - Base Sources          disabled</span><br><span class=\"line\">&#x2F;&#x2F; 看上去是多媒体相关的库 没桌面环境应该是用不上了</span><br><span class=\"line\">c7-media                      CentOS-7 - Media                 disabled</span><br><span class=\"line\">&#x2F;&#x2F; 这个源主要是用来替换base源的，其中有不少包是base源的增强版</span><br><span class=\"line\">&#x2F;&#x2F; 但是如果开启这个源部分包可能会于base冲突 </span><br><span class=\"line\">&#x2F;&#x2F; 需要在base源中exclude 或者使用yum-plugin-priorities插件来保证兼容性</span><br><span class=\"line\">&#x2F;&#x2F; 引用WIKI: https:&#x2F;&#x2F;wiki.centos.org&#x2F;zh&#x2F;AdditionalResources&#x2F;Repositories&#x2F;CentOSPlus</span><br><span class=\"line\">centosplus&#x2F;7&#x2F;x86_64           CentOS-7 - Plus                  disabled</span><br><span class=\"line\">centosplus-source&#x2F;7           CentOS-7 - Plus Sources          disabled</span><br><span class=\"line\">&#x2F;&#x2F; cr &#x3D; Continuous Release 下次发布内容 相当于beta版了</span><br><span class=\"line\">cr&#x2F;7&#x2F;x86_64                   CentOS-7 - cr                    disabled</span><br><span class=\"line\">&#x2F;&#x2F; elrepo &#x3D; The Community Enterprise Linux Repository</span><br><span class=\"line\">&#x2F;&#x2F; http:&#x2F;&#x2F;elrepo.org 从描述中可以看出是驱动包 如果有UI可能要开</span><br><span class=\"line\">elrepo                        ELRepo.org Community Enterprise  enabled:      147</span><br><span class=\"line\">elrepo-extras                 ELRepo.org Community Enterprise  enabled:       19</span><br><span class=\"line\">elrepo-kernel                 ELRepo.org Community Enterprise  enabled:       37</span><br><span class=\"line\">elrepo-testing                ELRepo.org Community Enterprise  disabled</span><br><span class=\"line\">&#x2F;&#x2F; 这个源要开啊 EPEL仓库 相当多常用的软件都在里面</span><br><span class=\"line\">&#x2F;&#x2F; https:&#x2F;&#x2F;fedoraproject.org&#x2F;</span><br><span class=\"line\">epel&#x2F;x86_64                   Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-debuginfo&#x2F;x86_64         Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-source&#x2F;x86_64            Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-testing&#x2F;x86_64           Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-testing-debuginfo&#x2F;x86_64 Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">epel-testing-source&#x2F;x86_64    Extra Packages for Enterprise Li disabled</span><br><span class=\"line\">extras&#x2F;7&#x2F;x86_64               CentOS-7 - Extras                enabled:      305</span><br><span class=\"line\">extras-source&#x2F;7               CentOS-7 - Extras Sources        disabled</span><br><span class=\"line\">fasttrack&#x2F;7&#x2F;x86_64            CentOS-7 - fasttrack             disabled</span><br><span class=\"line\">updates&#x2F;7&#x2F;x86_64              CentOS-7 - Updates               enabled:    733+5</span><br><span class=\"line\">updates-source&#x2F;7              CentOS-7 - Updates Sources       disabled</span><br><span class=\"line\">repolist: 11,337</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"命令-yum-config-manager-yum配置管理器\"><a href=\"#命令-yum-config-manager-yum配置管理器\" class=\"headerlink\" title=\"命令 yum-config-manager [yum配置管理器]\"></a>命令 yum-config-manager [yum配置管理器]</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Usage: yum-config-manager [options] [section ...]</span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  Plugin Options:</span><br><span class=\"line\"></span><br><span class=\"line\">  Yum Base Options:</span><br><span class=\"line\">    -h, --help          show this help message and exit</span><br><span class=\"line\">    -t, --tolerant      be tolerant of errors</span><br><span class=\"line\">    &#x2F;&#x2F; 完全从系统缓存运行，不更新缓存</span><br><span class=\"line\">    -C, --cacheonly     run entirely from system cache, don&#39;t update cache</span><br><span class=\"line\">    -c [config file], --config&#x3D;[config file]</span><br><span class=\"line\">                        config file location</span><br><span class=\"line\">    -R [minutes], --randomwait&#x3D;[minutes]</span><br><span class=\"line\">                        maximum command wait time</span><br><span class=\"line\">    -d [debug level], --debuglevel&#x3D;[debug level]</span><br><span class=\"line\">                        debugging output level</span><br><span class=\"line\">    --showduplicates    show duplicates, in repos, in list&#x2F;search commands</span><br><span class=\"line\">    -e [error level], --errorlevel&#x3D;[error level]</span><br><span class=\"line\">                        error output level</span><br><span class=\"line\">    --rpmverbosity&#x3D;[debug level name]</span><br><span class=\"line\">                        debugging output level for rpm</span><br><span class=\"line\">    -q, --quiet         quiet operation</span><br><span class=\"line\">    -v, --verbose       verbose operation</span><br><span class=\"line\">    -y, --assumeyes     answer yes for all questions</span><br><span class=\"line\">    --assumeno          answer no for all questions</span><br><span class=\"line\">    --version           show Yum version and exit</span><br><span class=\"line\">    --installroot&#x3D;[path]</span><br><span class=\"line\">                        set install root</span><br><span class=\"line\">    --enablerepo&#x3D;[repo]</span><br><span class=\"line\">                        &#x2F;&#x2F; 启用储存库</span><br><span class=\"line\">                        enable one or more repositories (wildcards allowed)</span><br><span class=\"line\">    --disablerepo&#x3D;[repo]</span><br><span class=\"line\">                        disable one or more repositories (wildcards allowed)</span><br><span class=\"line\">    -x [package], --exclude&#x3D;[package]</span><br><span class=\"line\">                        exclude package(s) by name or glob</span><br><span class=\"line\">    --disableexcludes&#x3D;[repo]</span><br><span class=\"line\">                        disable exclude from main, for a repo or for</span><br><span class=\"line\">                        everything</span><br><span class=\"line\">    --disableincludes&#x3D;[repo]</span><br><span class=\"line\">                        disable includepkgs for a repo or for everything</span><br><span class=\"line\">    --obsoletes         enable obsoletes processing during updates</span><br><span class=\"line\">    --noplugins         disable Yum plugins</span><br><span class=\"line\">    --nogpgcheck        disable gpg signature checking</span><br><span class=\"line\">    --disableplugin&#x3D;[plugin]</span><br><span class=\"line\">                        disable plugins by name</span><br><span class=\"line\">    --enableplugin&#x3D;[plugin]</span><br><span class=\"line\">                        enable plugins by name</span><br><span class=\"line\">    --skip-broken       skip packages with depsolving problems</span><br><span class=\"line\">    --color&#x3D;COLOR       control whether color is used</span><br><span class=\"line\">    --releasever&#x3D;RELEASEVER</span><br><span class=\"line\">                        set value of $releasever in yum config and repo files</span><br><span class=\"line\">    --downloadonly      don&#39;t update, just download</span><br><span class=\"line\">    --downloaddir&#x3D;DLDIR</span><br><span class=\"line\">                        specifies an alternate directory to store packages</span><br><span class=\"line\">    --setopt&#x3D;SETOPTS    set arbitrary config and repo options</span><br><span class=\"line\">    --bugfix            Include bugfix relevant packages, in updates</span><br><span class=\"line\">    --security          Include security relevant packages, in updates</span><br><span class=\"line\">    --advisory&#x3D;ADVS, --advisories&#x3D;ADVS</span><br><span class=\"line\">                        Include packages needed to fix the given advisory, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">    --bzs&#x3D;BZS           Include packages needed to fix the given BZ, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">    --cves&#x3D;CVES         Include packages needed to fix the given CVE, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">    --sec-severity&#x3D;SEVS, --secseverity&#x3D;SEVS</span><br><span class=\"line\">                        Include security relevant packages matching the</span><br><span class=\"line\">                        severity, in updates</span><br><span class=\"line\"></span><br><span class=\"line\">  yum-config-manager options:</span><br><span class=\"line\">    &#x2F;&#x2F; 保存当前设置</span><br><span class=\"line\">    --save              save the current options (useful with --setopt)</span><br><span class=\"line\">    &#x2F;&#x2F; 启用仓库 (自动保存)</span><br><span class=\"line\">    --enable            enable the specified repos (automatically saves)</span><br><span class=\"line\">    &#x2F;&#x2F; 禁用仓库 (自动保存)</span><br><span class=\"line\">    --disable           disable the specified repos (automatically saves)</span><br><span class=\"line\">    &#x2F;&#x2F; 从文件或URL添加仓库 (并启用)</span><br><span class=\"line\">    --add-repo&#x3D;ADDREPO  add (and enable) the repo from the specified file or</span><br><span class=\"line\">                        url</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"命令-yum\"><a href=\"#命令-yum\" class=\"headerlink\" title=\"命令 yum\"></a>命令 yum</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Usage: yum [options] COMMAND</span><br><span class=\"line\"></span><br><span class=\"line\">List of Commands:</span><br><span class=\"line\"></span><br><span class=\"line\">check          Check for problems in the rpmdb</span><br><span class=\"line\">check-update   Check for available package updates</span><br><span class=\"line\">clean          Remove cached data</span><br><span class=\"line\">deplist        List a package&#39;s dependencies</span><br><span class=\"line\">distribution-synchronization Synchronize installed packages to the latest available versions</span><br><span class=\"line\">downgrade      downgrade a package</span><br><span class=\"line\">erase          Remove a package or packages from your system</span><br><span class=\"line\">fs             Acts on the filesystem data of the host, mainly for removing docs&#x2F;lanuages for minimal hosts.</span><br><span class=\"line\">fssnapshot     Creates filesystem snapshots, or lists&#x2F;deletes current snapshots.</span><br><span class=\"line\">groups         Display, or use, the groups information</span><br><span class=\"line\">help           Display a helpful usage message</span><br><span class=\"line\">history        Display, or use, the transaction history</span><br><span class=\"line\">info           Display details about a package or group of packages</span><br><span class=\"line\">install        Install a package or packages on your system</span><br><span class=\"line\">list           List a package or groups of packages</span><br><span class=\"line\">load-transaction load a saved transaction from filename</span><br><span class=\"line\">makecache      Generate the metadata cache</span><br><span class=\"line\">provides       Find what package provides the given value</span><br><span class=\"line\">reinstall      reinstall a package</span><br><span class=\"line\">repo-pkgs      Treat a repo. as a group of packages, so we can install&#x2F;remove all of them</span><br><span class=\"line\">repolist       Display the configured software repositories</span><br><span class=\"line\">search         Search package details for the given string</span><br><span class=\"line\">shell          Run an interactive yum shell</span><br><span class=\"line\">swap           Simple way to swap packages, instead of using shell</span><br><span class=\"line\">update         Update a package or packages on your system</span><br><span class=\"line\">update-minimal Works like upgrade, but goes to the &#39;newest&#39; package match which fixes a problem that affects your system</span><br><span class=\"line\">updateinfo     Acts on repository update information</span><br><span class=\"line\">upgrade        Update packages taking obsoletes into account</span><br><span class=\"line\">version        Display a version for the machine and&#x2F;or available repos.</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">Options:</span><br><span class=\"line\">  -h, --help            show this help message and exit</span><br><span class=\"line\">  -t, --tolerant        be tolerant of errors</span><br><span class=\"line\">  -C, --cacheonly       run entirely from system cache, don&#39;t update cache</span><br><span class=\"line\">  -c [config file], --config&#x3D;[config file]</span><br><span class=\"line\">                        config file location</span><br><span class=\"line\">  -R [minutes], --randomwait&#x3D;[minutes]</span><br><span class=\"line\">                        maximum command wait time</span><br><span class=\"line\">  -d [debug level], --debuglevel&#x3D;[debug level]</span><br><span class=\"line\">                        debugging output level</span><br><span class=\"line\">  --showduplicates      show duplicates, in repos, in list&#x2F;search commands</span><br><span class=\"line\">  -e [error level], --errorlevel&#x3D;[error level]</span><br><span class=\"line\">                        error output level</span><br><span class=\"line\">  --rpmverbosity&#x3D;[debug level name]</span><br><span class=\"line\">                        debugging output level for rpm</span><br><span class=\"line\">  -q, --quiet           quiet operation</span><br><span class=\"line\">  -v, --verbose         verbose operation</span><br><span class=\"line\">  -y, --assumeyes       answer yes for all questions</span><br><span class=\"line\">  --assumeno            answer no for all questions</span><br><span class=\"line\">  --version             show Yum version and exit</span><br><span class=\"line\">  --installroot&#x3D;[path]  set install root</span><br><span class=\"line\">  --enablerepo&#x3D;[repo]   enable one or more repositories (wildcards allowed)</span><br><span class=\"line\">  --disablerepo&#x3D;[repo]  disable one or more repositories (wildcards allowed)</span><br><span class=\"line\">  -x [package], --exclude&#x3D;[package]</span><br><span class=\"line\">                        exclude package(s) by name or glob</span><br><span class=\"line\">  --disableexcludes&#x3D;[repo]</span><br><span class=\"line\">                        disable exclude from main, for a repo or for</span><br><span class=\"line\">                        everything</span><br><span class=\"line\">  --disableincludes&#x3D;[repo]</span><br><span class=\"line\">                        disable includepkgs for a repo or for everything</span><br><span class=\"line\">  --obsoletes           enable obsoletes processing during updates</span><br><span class=\"line\">  --noplugins           disable Yum plugins</span><br><span class=\"line\">  --nogpgcheck          disable gpg signature checking</span><br><span class=\"line\">  --disableplugin&#x3D;[plugin]</span><br><span class=\"line\">                        disable plugins by name</span><br><span class=\"line\">  --enableplugin&#x3D;[plugin]</span><br><span class=\"line\">                        enable plugins by name</span><br><span class=\"line\">  --skip-broken         skip packages with depsolving problems</span><br><span class=\"line\">  --color&#x3D;COLOR         control whether color is used</span><br><span class=\"line\">  --releasever&#x3D;RELEASEVER</span><br><span class=\"line\">                        set value of $releasever in yum config and repo files</span><br><span class=\"line\">  --downloadonly        don&#39;t update, just download</span><br><span class=\"line\">  --downloaddir&#x3D;DLDIR   specifies an alternate directory to store packages</span><br><span class=\"line\">  --setopt&#x3D;SETOPTS      set arbitrary config and repo options</span><br><span class=\"line\">  --bugfix              Include bugfix relevant packages, in updates</span><br><span class=\"line\">  --security            Include security relevant packages, in updates</span><br><span class=\"line\">  --advisory&#x3D;ADVS, --advisories&#x3D;ADVS</span><br><span class=\"line\">                        Include packages needed to fix the given advisory, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">  --bzs&#x3D;BZS             Include packages needed to fix the given BZ, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">  --cves&#x3D;CVES           Include packages needed to fix the given CVE, in</span><br><span class=\"line\">                        updates</span><br><span class=\"line\">  --sec-severity&#x3D;SEVS, --secseverity&#x3D;SEVS</span><br><span class=\"line\">                        Include security relevant packages matching the</span><br><span class=\"line\">                        severity, in updates</span><br><span class=\"line\"></span><br><span class=\"line\">  Plugin Options:</span><br></pre></td></tr></table></figure>\n"},{"title":"[WSL2]子系统ubuntu安装jdk8","date":"2019-01-04T07:42:01.000Z","updated":"2020-01-06T05:31:00.000Z","comments":1,"_content":"\n### 安装环境\n```\n适用于 Linux 的 Windows 子系统:\nUbuntu-18.04 (默认)\n```\n\n### \n\n以前都是用的centos,直接`yum localinstall ./jdk-???-linux-x64.rpm`就可以安装本地的RPM包了。 \n但是现在使用的Ubuntu，只能安装DEB包，查询了一下有三种安装方式：\n\n- RPM包转制为DEB包\n- 使用开箱即用的tar.gz并配置环境变量\n- 使用ppa源安装\n \n### 开始安装\n\n很明显使用ppa源安装更稳定不容易遇到问题，参考了此文章 \n[Install Oracle Java 8 (JDK8 and JRE8) in Ubuntu or Linux Mint](http://www.webupd8.org/2012/09/install-oracle-java-8-in-ubuntu-via-ppa.html)\n\n```\nsudo add-apt-repository ppa:webupd8team/java    //添加PPA源\nsudo apt-get update                             //更新本地包\nsudo apt-get install oracle-java8-installer     //安装JDK\n\n// 很遗憾报错了\n\nroot@DESKTOP-UFOJIL7:/wsl_share# apt-get install oracle-java8-installer\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nPackage oracle-java8-installer is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Package 'oracle-java8-installer' has no installation candidate\n```\n\n### \n\n在这里找到了答案\n[Oracle-Java8-Installer: No installation candidate](https://askubuntu.com/questions/790671/oracle-java8-installer-no-installation-candidate)\n\n&gt; NOTE: This answer no longer works, as the WebUpd8 PPA has been deprecated since Oracle has changed licensing and access restrictions to the Oracle Java codebase. Details at http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html\n\n翻译一下\n\n&gt;注意：此答案不再有效，因为WebUpd8 PPA已被弃用，因为Oracle已将许可和访问限制更改为Oracle Java代码库。 有关详细信息， 请访问http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html\n\n既然如此，那没啥办法只能手动安装一个了\n\n### 手动配置\n\n首先下载一个`jdk-8u221-linux-x64.tar.gz`,拷贝到wsl_share中\n\n```\nroot@DESKTOP-UFOJIL7:/wsl_share# tar -zxvf ./jdk-8u221-linux-x64.tar.gz      //首先解压\nroot@DESKTOP-UFOJIL7:/wsl_share# vim ~/.bashrc                              //配置环境变量\n```\n\n```\n// bashrc中追加以下内容\nexport JAVA_HOME=/app/jdk1.8.0_221\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n```\n\n```\nroot@DESKTOP-UFOJIL7:/wsl_share# source ~/.bashrc    //重新加载环境变量\n\nroot@DESKTOP-UFOJIL7:/wsl_share# java -version\njava version \"1.8.0_221\"\nJava(TM) SE Runtime Environment (build 1.8.0_221-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 25.221-b11, mixed mode)\n\n\n```\n","source":"_posts/[WSL2]子系统ubuntu安装jdk8.md","raw":"---\ntitle: '[WSL2]子系统ubuntu安装jdk8'\ndate: 2019/1/4 15:42:01\nupdated: 2020/1/6 13:31\ncomments: true\ntags: \n    - linux\ncategories: \n    - [Study, OperationAndMaintenance]\n---\n\n### 安装环境\n```\n适用于 Linux 的 Windows 子系统:\nUbuntu-18.04 (默认)\n```\n\n### \n\n以前都是用的centos,直接`yum localinstall ./jdk-???-linux-x64.rpm`就可以安装本地的RPM包了。 \n但是现在使用的Ubuntu，只能安装DEB包，查询了一下有三种安装方式：\n\n- RPM包转制为DEB包\n- 使用开箱即用的tar.gz并配置环境变量\n- 使用ppa源安装\n \n### 开始安装\n\n很明显使用ppa源安装更稳定不容易遇到问题，参考了此文章 \n[Install Oracle Java 8 (JDK8 and JRE8) in Ubuntu or Linux Mint](http://www.webupd8.org/2012/09/install-oracle-java-8-in-ubuntu-via-ppa.html)\n\n```\nsudo add-apt-repository ppa:webupd8team/java    //添加PPA源\nsudo apt-get update                             //更新本地包\nsudo apt-get install oracle-java8-installer     //安装JDK\n\n// 很遗憾报错了\n\nroot@DESKTOP-UFOJIL7:/wsl_share# apt-get install oracle-java8-installer\nReading package lists... Done\nBuilding dependency tree\nReading state information... Done\nPackage oracle-java8-installer is not available, but is referred to by another package.\nThis may mean that the package is missing, has been obsoleted, or\nis only available from another source\n\nE: Package 'oracle-java8-installer' has no installation candidate\n```\n\n### \n\n在这里找到了答案\n[Oracle-Java8-Installer: No installation candidate](https://askubuntu.com/questions/790671/oracle-java8-installer-no-installation-candidate)\n\n&gt; NOTE: This answer no longer works, as the WebUpd8 PPA has been deprecated since Oracle has changed licensing and access restrictions to the Oracle Java codebase. Details at http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html\n\n翻译一下\n\n&gt;注意：此答案不再有效，因为WebUpd8 PPA已被弃用，因为Oracle已将许可和访问限制更改为Oracle Java代码库。 有关详细信息， 请访问http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html\n\n既然如此，那没啥办法只能手动安装一个了\n\n### 手动配置\n\n首先下载一个`jdk-8u221-linux-x64.tar.gz`,拷贝到wsl_share中\n\n```\nroot@DESKTOP-UFOJIL7:/wsl_share# tar -zxvf ./jdk-8u221-linux-x64.tar.gz      //首先解压\nroot@DESKTOP-UFOJIL7:/wsl_share# vim ~/.bashrc                              //配置环境变量\n```\n\n```\n// bashrc中追加以下内容\nexport JAVA_HOME=/app/jdk1.8.0_221\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib\nexport PATH=${JAVA_HOME}/bin:$PATH\n```\n\n```\nroot@DESKTOP-UFOJIL7:/wsl_share# source ~/.bashrc    //重新加载环境变量\n\nroot@DESKTOP-UFOJIL7:/wsl_share# java -version\njava version \"1.8.0_221\"\nJava(TM) SE Runtime Environment (build 1.8.0_221-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 25.221-b11, mixed mode)\n\n\n```\n","slug":"[WSL2]子系统ubuntu安装jdk8","published":1,"layout":"post","photos":[],"link":"","_id":"ck520s6ov00004wovf13pcpm3","content":"<h3 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境\"></a>安装环境</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">适用于 Linux 的 Windows 子系统:</span><br><span class=\"line\">Ubuntu-18.04 (默认)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>以前都是用的centos,直接<code>yum localinstall ./jdk-???-linux-x64.rpm</code>就可以安装本地的RPM包了。<br>但是现在使用的Ubuntu，只能安装DEB包，查询了一下有三种安装方式：</p>\n<ul>\n<li>RPM包转制为DEB包</li>\n<li>使用开箱即用的tar.gz并配置环境变量</li>\n<li>使用ppa源安装</li>\n</ul>\n<h3 id=\"开始安装\"><a href=\"#开始安装\" class=\"headerlink\" title=\"开始安装\"></a>开始安装</h3><p>很明显使用ppa源安装更稳定不容易遇到问题，参考了此文章<br><a href=\"http://www.webupd8.org/2012/09/install-oracle-java-8-in-ubuntu-via-ppa.html\" target=\"_blank\" rel=\"noopener\">Install Oracle Java 8 (JDK8 and JRE8) in Ubuntu or Linux Mint</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository ppa:webupd8team&#x2F;java    &#x2F;&#x2F;添加PPA源</span><br><span class=\"line\">sudo apt-get update                             &#x2F;&#x2F;更新本地包</span><br><span class=\"line\">sudo apt-get install oracle-java8-installer     &#x2F;&#x2F;安装JDK</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; 很遗憾报错了</span><br><span class=\"line\"></span><br><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# apt-get install oracle-java8-installer</span><br><span class=\"line\">Reading package lists... Done</span><br><span class=\"line\">Building dependency tree</span><br><span class=\"line\">Reading state information... Done</span><br><span class=\"line\">Package oracle-java8-installer is not available, but is referred to by another package.</span><br><span class=\"line\">This may mean that the package is missing, has been obsoleted, or</span><br><span class=\"line\">is only available from another source</span><br><span class=\"line\"></span><br><span class=\"line\">E: Package &#39;oracle-java8-installer&#39; has no installation candidate</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p>在这里找到了答案<br><a href=\"https://askubuntu.com/questions/790671/oracle-java8-installer-no-installation-candidate\" target=\"_blank\" rel=\"noopener\">Oracle-Java8-Installer: No installation candidate</a></p>\n<p>&gt; NOTE: This answer no longer works, as the WebUpd8 PPA has been deprecated since Oracle has changed licensing and access restrictions to the Oracle Java codebase. Details at <a href=\"http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html\" target=\"_blank\" rel=\"noopener\">http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html</a></p>\n<p>翻译一下</p>\n<p>&gt;注意：此答案不再有效，因为WebUpd8 PPA已被弃用，因为Oracle已将许可和访问限制更改为Oracle Java代码库。 有关详细信息， 请访问<a href=\"http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html\" target=\"_blank\" rel=\"noopener\">http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html</a></p>\n<p>既然如此，那没啥办法只能手动安装一个了</p>\n<h3 id=\"手动配置\"><a href=\"#手动配置\" class=\"headerlink\" title=\"手动配置\"></a>手动配置</h3><p>首先下载一个<code>jdk-8u221-linux-x64.tar.gz</code>,拷贝到wsl_share中</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# tar -zxvf .&#x2F;jdk-8u221-linux-x64.tar.gz      &#x2F;&#x2F;首先解压</span><br><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# vim ~&#x2F;.bashrc                              &#x2F;&#x2F;配置环境变量</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; bashrc中追加以下内容</span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;app&#x2F;jdk1.8.0_221</span><br><span class=\"line\">export JRE_HOME&#x3D;$&#123;JAVA_HOME&#125;&#x2F;jre</span><br><span class=\"line\">export CLASSPATH&#x3D;.:$&#123;JAVA_HOME&#125;&#x2F;lib:$&#123;JRE_HOME&#125;&#x2F;lib</span><br><span class=\"line\">export PATH&#x3D;$&#123;JAVA_HOME&#125;&#x2F;bin:$PATH</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# source ~&#x2F;.bashrc    &#x2F;&#x2F;重新加载环境变量</span><br><span class=\"line\"></span><br><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# java -version</span><br><span class=\"line\">java version &quot;1.8.0_221&quot;</span><br><span class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_221-b11)</span><br><span class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.221-b11, mixed mode)</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"安装环境\"><a href=\"#安装环境\" class=\"headerlink\" title=\"安装环境\"></a>安装环境</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">适用于 Linux 的 Windows 子系统:</span><br><span class=\"line\">Ubuntu-18.04 (默认)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>以前都是用的centos,直接<code>yum localinstall ./jdk-???-linux-x64.rpm</code>就可以安装本地的RPM包了。<br>但是现在使用的Ubuntu，只能安装DEB包，查询了一下有三种安装方式：</p>\n<ul>\n<li>RPM包转制为DEB包</li>\n<li>使用开箱即用的tar.gz并配置环境变量</li>\n<li>使用ppa源安装</li>\n</ul>\n<h3 id=\"开始安装\"><a href=\"#开始安装\" class=\"headerlink\" title=\"开始安装\"></a>开始安装</h3><p>很明显使用ppa源安装更稳定不容易遇到问题，参考了此文章<br><a href=\"http://www.webupd8.org/2012/09/install-oracle-java-8-in-ubuntu-via-ppa.html\" target=\"_blank\" rel=\"noopener\">Install Oracle Java 8 (JDK8 and JRE8) in Ubuntu or Linux Mint</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository ppa:webupd8team&#x2F;java    &#x2F;&#x2F;添加PPA源</span><br><span class=\"line\">sudo apt-get update                             &#x2F;&#x2F;更新本地包</span><br><span class=\"line\">sudo apt-get install oracle-java8-installer     &#x2F;&#x2F;安装JDK</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; 很遗憾报错了</span><br><span class=\"line\"></span><br><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# apt-get install oracle-java8-installer</span><br><span class=\"line\">Reading package lists... Done</span><br><span class=\"line\">Building dependency tree</span><br><span class=\"line\">Reading state information... Done</span><br><span class=\"line\">Package oracle-java8-installer is not available, but is referred to by another package.</span><br><span class=\"line\">This may mean that the package is missing, has been obsoleted, or</span><br><span class=\"line\">is only available from another source</span><br><span class=\"line\"></span><br><span class=\"line\">E: Package &#39;oracle-java8-installer&#39; has no installation candidate</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p>在这里找到了答案<br><a href=\"https://askubuntu.com/questions/790671/oracle-java8-installer-no-installation-candidate\" target=\"_blank\" rel=\"noopener\">Oracle-Java8-Installer: No installation candidate</a></p>\n<p>&gt; NOTE: This answer no longer works, as the WebUpd8 PPA has been deprecated since Oracle has changed licensing and access restrictions to the Oracle Java codebase. Details at <a href=\"http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html\" target=\"_blank\" rel=\"noopener\">http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html</a></p>\n<p>翻译一下</p>\n<p>&gt;注意：此答案不再有效，因为WebUpd8 PPA已被弃用，因为Oracle已将许可和访问限制更改为Oracle Java代码库。 有关详细信息， 请访问<a href=\"http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html\" target=\"_blank\" rel=\"noopener\">http://www.webupd8.org/2014/03/how-to-install-oracle-java-8-in-debian.html</a></p>\n<p>既然如此，那没啥办法只能手动安装一个了</p>\n<h3 id=\"手动配置\"><a href=\"#手动配置\" class=\"headerlink\" title=\"手动配置\"></a>手动配置</h3><p>首先下载一个<code>jdk-8u221-linux-x64.tar.gz</code>,拷贝到wsl_share中</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# tar -zxvf .&#x2F;jdk-8u221-linux-x64.tar.gz      &#x2F;&#x2F;首先解压</span><br><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# vim ~&#x2F;.bashrc                              &#x2F;&#x2F;配置环境变量</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; bashrc中追加以下内容</span><br><span class=\"line\">export JAVA_HOME&#x3D;&#x2F;app&#x2F;jdk1.8.0_221</span><br><span class=\"line\">export JRE_HOME&#x3D;$&#123;JAVA_HOME&#125;&#x2F;jre</span><br><span class=\"line\">export CLASSPATH&#x3D;.:$&#123;JAVA_HOME&#125;&#x2F;lib:$&#123;JRE_HOME&#125;&#x2F;lib</span><br><span class=\"line\">export PATH&#x3D;$&#123;JAVA_HOME&#125;&#x2F;bin:$PATH</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# source ~&#x2F;.bashrc    &#x2F;&#x2F;重新加载环境变量</span><br><span class=\"line\"></span><br><span class=\"line\">root@DESKTOP-UFOJIL7:&#x2F;wsl_share# java -version</span><br><span class=\"line\">java version &quot;1.8.0_221&quot;</span><br><span class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_221-b11)</span><br><span class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.221-b11, mixed mode)</span><br></pre></td></tr></table></figure>\n"},{"title":"[Zookeeper学习-第一章]zk环境搭建[单机+控制台]","date":"2019-07-01T07:53:24.000Z","updated":"2020-01-06T05:31:00.000Z","comments":1,"_content":"\n&gt; 环境为 Centos + OracleJAVA ，准备搭建 zookeeper-3.5.5 + 用于方便展示节点的zookeeperAdmin\n\n## zookeeper-3.5.5\n\n### 下载\n\n前往开源项目[下载页面](http://zookeeper.apache.org/releases.html#download)根据需要下载对应的版本（注意要下载文件名后面带\"-bin\"的包）<br/>\n[懒人链接](https://archive.apache.org/dist/zookeeper/)\n\n```bash\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# tar -zxvf ./apache-zookeeper-3.5.5-bin.tar.gz\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# cd ./apache-zookeeper-3.5.5-bin.tar.gz\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# ll\ntotal 44\ndrwxr-xr-x 2 2002 2002  4096 Apr  9 19:13 bin\ndrwxr-xr-x 2 2002 2002  4096 Sep 20 14:00 conf\ndrwxr-xr-x 5 2002 2002  4096 May  3 20:07 docs\ndrwxr-xr-x 2 root root  4096 Sep 20 13:40 lib\n-rw-r--r-- 1 2002 2002 11358 Feb 15  2019 LICENSE.txt\ndrwxr-xr-x 2 root root  4096 Sep 20 13:43 logs\n-rw-r--r-- 1 2002 2002   432 Apr  9 19:13 NOTICE.txt\n-rw-r--r-- 1 2002 2002  1560 May  3 19:41 README.md\n-rw-r--r-- 1 2002 2002  1347 Apr  2 21:05 README_packaging.txt\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# ll\n[root@iZuf6imeqt5e7fo9jw7918Z apache-zookeeper-3.5.5-bin]# cd conf\n[root@iZuf6imeqt5e7fo9jw7918Z conf]# ll\ntotal 16\n-rw-r--r-- 1 2002 2002  535 Feb 15  2019 configuration.xsl\n-rw-r--r-- 1 2002 2002 2712 Apr  2 21:05 log4j.properties\n-rw-r--r-- 1 2002 2002  922 Feb 15  2019 zoo_sample.cfg\n[root@iZuf6imeqt5e7fo9jw7918Z conf]# cp ./zoo_sample.cfg ./zoo.cfg\n[root@iZuf6imeqt5e7fo9jw7918Z conf]# cd ../bin/\n[root@iZuf6imeqt5e7fo9jw7918Z conf]# \n\n```\n\n### 需要留意的\n如果在这里直接启动的话可能会启动不成功，因为apache-zookeeper默认监听了8080端口作为自己的`zookeeper-server`的服务端。最好是自己在./conf/zoo.cfg中配置一下`admin.serverPort=[自己随便改个端口]`，对的，配置文件里默认是没有这行的，这个比较坑。\n\n### 启动\n```bash\n[root@iZuf6imeqt5e7fo9jw7918Z bin]# ./zkServer.sh start\n/usr/bin/java\nZooKeeper JMX enabled by default\nUsing config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg\nStarting zookeeper ... STARTED\n[root@iZuf6imeqt5e7fo9jw7918Z bin]# ./zkServer.sh start\n/usr/bin/java\nZooKeeper JMX enabled by default\nUsing config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg\nStarting zookeeper ... already running as process 29414.\n[root@iZuf6imeqt5e7fo9jw7918Z bin]# ./zkServer.sh status\n/usr/bin/java\nZooKeeper JMX enabled by default\nUsing config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg\nClient port found: 2181. Client address: localhost.\nMode: standalone\n```\n\n\n\n##  zookeeper-admin\n这是一个github上的小[项目](https://github.com/Ahoo-Wang/ZooKeeper-Admin)<br/>\n功能不多，刚刚够用就行，不整那些花里胡哨的，支持直接使用docker构建，非常方便\n\n```bash\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker run --name zookeeper-admin -p 80:2182 docker.io/ahoowang/zookeeper.admin\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker container ls\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\n56bf5522f4fe        4232addbc345        \"dotnet ZooKeeper....\"   About an hour ago   Up 2 minutes        0.0.0.0:2182-&gt;80/tcp   zookeeper-admin\n\n```\n![zookeeper-admin](leanote://file/getImage?fileId=5d84827ce1488a763c000019)\n\n界面看上去还不错。\n\n然而好景不长，跑了一阵发现无法访问了。\n```bash\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker container ls\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n```\n??? 怎么停止了，看看日志怎么说\n```\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker logs 56bf5522f4fe\nHosting environment: Production\nContent root path: /app\nNow listening on: http://+:80\nApplication started. Press Ctrl+C to shut down.\nApplication is shutting down...\nHosting environment: Production\nContent root path: /app\nNow listening on: http://+:80\nApplication started. Press Ctrl+C to shut down.\nUnhandled Exception: System.InvalidOperationException: Collection was modified; enumeration operation may not execute.\n   at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)\n   at System.Collections.Generic.Dictionary`2.ValueCollection.Enumerator.MoveNext()\n   at ZooKeeper.Admin.ZooKeeperManager.<dispose>d__9.MoveNext() in E:\\ZooKeeper-Admin\\ZooKeeper.Admin\\ZooKeeperManager.cs:line 55\n--- End of stack trace from previous location where exception was thrown ---\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()\n   at System.Threading.ThreadPoolWorkQueue.Dispatch()\n\n```\n\n\n\n","source":"_posts/[Zookeeper学习-第一章]zk环境搭建[单机+控制台].md","raw":"---\ntitle: '[Zookeeper学习-第一章]zk环境搭建[单机+控制台]'\ndate: 2019/7/1 15:53:24\nupdated: 2020/1/6 13:31\ncomments: true\ntags: \n    - java\n    - zookeeper\ncategories: \n    - [Study, Java]\n---\n\n&gt; 环境为 Centos + OracleJAVA ，准备搭建 zookeeper-3.5.5 + 用于方便展示节点的zookeeperAdmin\n\n## zookeeper-3.5.5\n\n### 下载\n\n前往开源项目[下载页面](http://zookeeper.apache.org/releases.html#download)根据需要下载对应的版本（注意要下载文件名后面带\"-bin\"的包）<br/>\n[懒人链接](https://archive.apache.org/dist/zookeeper/)\n\n```bash\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# tar -zxvf ./apache-zookeeper-3.5.5-bin.tar.gz\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# cd ./apache-zookeeper-3.5.5-bin.tar.gz\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# ll\ntotal 44\ndrwxr-xr-x 2 2002 2002  4096 Apr  9 19:13 bin\ndrwxr-xr-x 2 2002 2002  4096 Sep 20 14:00 conf\ndrwxr-xr-x 5 2002 2002  4096 May  3 20:07 docs\ndrwxr-xr-x 2 root root  4096 Sep 20 13:40 lib\n-rw-r--r-- 1 2002 2002 11358 Feb 15  2019 LICENSE.txt\ndrwxr-xr-x 2 root root  4096 Sep 20 13:43 logs\n-rw-r--r-- 1 2002 2002   432 Apr  9 19:13 NOTICE.txt\n-rw-r--r-- 1 2002 2002  1560 May  3 19:41 README.md\n-rw-r--r-- 1 2002 2002  1347 Apr  2 21:05 README_packaging.txt\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# ll\n[root@iZuf6imeqt5e7fo9jw7918Z apache-zookeeper-3.5.5-bin]# cd conf\n[root@iZuf6imeqt5e7fo9jw7918Z conf]# ll\ntotal 16\n-rw-r--r-- 1 2002 2002  535 Feb 15  2019 configuration.xsl\n-rw-r--r-- 1 2002 2002 2712 Apr  2 21:05 log4j.properties\n-rw-r--r-- 1 2002 2002  922 Feb 15  2019 zoo_sample.cfg\n[root@iZuf6imeqt5e7fo9jw7918Z conf]# cp ./zoo_sample.cfg ./zoo.cfg\n[root@iZuf6imeqt5e7fo9jw7918Z conf]# cd ../bin/\n[root@iZuf6imeqt5e7fo9jw7918Z conf]# \n\n```\n\n### 需要留意的\n如果在这里直接启动的话可能会启动不成功，因为apache-zookeeper默认监听了8080端口作为自己的`zookeeper-server`的服务端。最好是自己在./conf/zoo.cfg中配置一下`admin.serverPort=[自己随便改个端口]`，对的，配置文件里默认是没有这行的，这个比较坑。\n\n### 启动\n```bash\n[root@iZuf6imeqt5e7fo9jw7918Z bin]# ./zkServer.sh start\n/usr/bin/java\nZooKeeper JMX enabled by default\nUsing config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg\nStarting zookeeper ... STARTED\n[root@iZuf6imeqt5e7fo9jw7918Z bin]# ./zkServer.sh start\n/usr/bin/java\nZooKeeper JMX enabled by default\nUsing config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg\nStarting zookeeper ... already running as process 29414.\n[root@iZuf6imeqt5e7fo9jw7918Z bin]# ./zkServer.sh status\n/usr/bin/java\nZooKeeper JMX enabled by default\nUsing config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg\nClient port found: 2181. Client address: localhost.\nMode: standalone\n```\n\n\n\n##  zookeeper-admin\n这是一个github上的小[项目](https://github.com/Ahoo-Wang/ZooKeeper-Admin)<br/>\n功能不多，刚刚够用就行，不整那些花里胡哨的，支持直接使用docker构建，非常方便\n\n```bash\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker run --name zookeeper-admin -p 80:2182 docker.io/ahoowang/zookeeper.admin\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker container ls\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES\n56bf5522f4fe        4232addbc345        \"dotnet ZooKeeper....\"   About an hour ago   Up 2 minutes        0.0.0.0:2182-&gt;80/tcp   zookeeper-admin\n\n```\n![zookeeper-admin](leanote://file/getImage?fileId=5d84827ce1488a763c000019)\n\n界面看上去还不错。\n\n然而好景不长，跑了一阵发现无法访问了。\n```bash\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker container ls\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n```\n??? 怎么停止了，看看日志怎么说\n```\n[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker logs 56bf5522f4fe\nHosting environment: Production\nContent root path: /app\nNow listening on: http://+:80\nApplication started. Press Ctrl+C to shut down.\nApplication is shutting down...\nHosting environment: Production\nContent root path: /app\nNow listening on: http://+:80\nApplication started. Press Ctrl+C to shut down.\nUnhandled Exception: System.InvalidOperationException: Collection was modified; enumeration operation may not execute.\n   at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)\n   at System.Collections.Generic.Dictionary`2.ValueCollection.Enumerator.MoveNext()\n   at ZooKeeper.Admin.ZooKeeperManager.<dispose>d__9.MoveNext() in E:\\ZooKeeper-Admin\\ZooKeeper.Admin\\ZooKeeperManager.cs:line 55\n--- End of stack trace from previous location where exception was thrown ---\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()\n   at System.Threading.ThreadPoolWorkQueue.Dispatch()\n\n```\n\n\n\n","slug":"[Zookeeper学习-第一章]zk环境搭建[单机+控制台]","published":1,"layout":"post","photos":[],"link":"","_id":"ck520s6oy00014wovg2qc5fuh","content":"<p>&gt; 环境为 Centos + OracleJAVA ，准备搭建 zookeeper-3.5.5 + 用于方便展示节点的zookeeperAdmin</p>\n<h2 id=\"zookeeper-3-5-5\"><a href=\"#zookeeper-3-5-5\" class=\"headerlink\" title=\"zookeeper-3.5.5\"></a>zookeeper-3.5.5</h2><h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><p>前往开源项目<a href=\"http://zookeeper.apache.org/releases.html#download\" target=\"_blank\" rel=\"noopener\">下载页面</a>根据需要下载对应的版本（注意要下载文件名后面带”-bin”的包）<br/><br><a href=\"https://archive.apache.org/dist/zookeeper/\" target=\"_blank\" rel=\"noopener\">懒人链接</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># tar -zxvf ./apache-zookeeper-3.5.5-bin.tar.gz</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># cd ./apache-zookeeper-3.5.5-bin.tar.gz</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 44</span><br><span class=\"line\">drwxr-xr-x 2 2002 2002  4096 Apr  9 19:13 bin</span><br><span class=\"line\">drwxr-xr-x 2 2002 2002  4096 Sep 20 14:00 conf</span><br><span class=\"line\">drwxr-xr-x 5 2002 2002  4096 May  3 20:07 docs</span><br><span class=\"line\">drwxr-xr-x 2 root root  4096 Sep 20 13:40 lib</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002 11358 Feb 15  2019 LICENSE.txt</span><br><span class=\"line\">drwxr-xr-x 2 root root  4096 Sep 20 13:43 logs</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002   432 Apr  9 19:13 NOTICE.txt</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002  1560 May  3 19:41 README.md</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002  1347 Apr  2 21:05 README_packaging.txt</span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># ll</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z apache-zookeeper-3.5.5-bin]<span class=\"comment\"># cd conf</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z conf]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 16</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002  535 Feb 15  2019 configuration.xsl</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002 2712 Apr  2 21:05 log4j.properties</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002  922 Feb 15  2019 zoo_sample.cfg</span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z conf]<span class=\"comment\"># cp ./zoo_sample.cfg ./zoo.cfg</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z conf]<span class=\"comment\"># cd ../bin/</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z conf]<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"需要留意的\"><a href=\"#需要留意的\" class=\"headerlink\" title=\"需要留意的\"></a>需要留意的</h3><p>如果在这里直接启动的话可能会启动不成功，因为apache-zookeeper默认监听了8080端口作为自己的<code>zookeeper-server</code>的服务端。最好是自己在./conf/zoo.cfg中配置一下<code>admin.serverPort=[自己随便改个端口]</code>，对的，配置文件里默认是没有这行的，这个比较坑。</p>\n<h3 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z bin]<span class=\"comment\"># ./zkServer.sh start</span></span><br><span class=\"line\">/usr/bin/java</span><br><span class=\"line\">ZooKeeper JMX enabled by default</span><br><span class=\"line\">Using config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg</span><br><span class=\"line\">Starting zookeeper ... STARTED</span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z bin]<span class=\"comment\"># ./zkServer.sh start</span></span><br><span class=\"line\">/usr/bin/java</span><br><span class=\"line\">ZooKeeper JMX enabled by default</span><br><span class=\"line\">Using config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg</span><br><span class=\"line\">Starting zookeeper ... already running as process 29414.</span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z bin]<span class=\"comment\"># ./zkServer.sh status</span></span><br><span class=\"line\">/usr/bin/java</span><br><span class=\"line\">ZooKeeper JMX enabled by default</span><br><span class=\"line\">Using config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg</span><br><span class=\"line\">Client port found: 2181. Client address: localhost.</span><br><span class=\"line\">Mode: standalone</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"zookeeper-admin\"><a href=\"#zookeeper-admin\" class=\"headerlink\" title=\"zookeeper-admin\"></a>zookeeper-admin</h2><p>这是一个github上的小<a href=\"https://github.com/Ahoo-Wang/ZooKeeper-Admin\" target=\"_blank\" rel=\"noopener\">项目</a><br/><br>功能不多，刚刚够用就行，不整那些花里胡哨的，支持直接使用docker构建，非常方便</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># docker run --name zookeeper-admin -p 80:2182 docker.io/ahoowang/zookeeper.admin</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># docker container ls</span></span><br><span class=\"line\">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class=\"line\">56bf5522f4fe        4232addbc345        <span class=\"string\">\"dotnet ZooKeeper....\"</span>   About an hour ago   Up 2 minutes        0.0.0.0:2182-&amp;gt;80/tcp   zookeeper-admin</span><br></pre></td></tr></table></figure>\n<p><img src=\"leanote://file/getImage?fileId=5d84827ce1488a763c000019\" alt=\"zookeeper-admin\"></p>\n<p>界面看上去还不错。</p>\n<p>然而好景不长，跑了一阵发现无法访问了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># docker container ls</span></span><br><span class=\"line\">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure>\n<p>??? 怎么停止了，看看日志怎么说</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker logs 56bf5522f4fe</span><br><span class=\"line\">Hosting environment: Production</span><br><span class=\"line\">Content root path: &#x2F;app</span><br><span class=\"line\">Now listening on: http:&#x2F;&#x2F;+:80</span><br><span class=\"line\">Application started. Press Ctrl+C to shut down.</span><br><span class=\"line\">Application is shutting down...</span><br><span class=\"line\">Hosting environment: Production</span><br><span class=\"line\">Content root path: &#x2F;app</span><br><span class=\"line\">Now listening on: http:&#x2F;&#x2F;+:80</span><br><span class=\"line\">Application started. Press Ctrl+C to shut down.</span><br><span class=\"line\">Unhandled Exception: System.InvalidOperationException: Collection was modified; enumeration operation may not execute.</span><br><span class=\"line\">   at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)</span><br><span class=\"line\">   at System.Collections.Generic.Dictionary&#96;2.ValueCollection.Enumerator.MoveNext()</span><br><span class=\"line\">   at ZooKeeper.Admin.ZooKeeperManager.&lt;dispose&gt;d__9.MoveNext() in E:\\ZooKeeper-Admin\\ZooKeeper.Admin\\ZooKeeperManager.cs:line 55</span><br><span class=\"line\">--- End of stack trace from previous location where exception was thrown ---</span><br><span class=\"line\">   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()</span><br><span class=\"line\">   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)</span><br><span class=\"line\">   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()</span><br><span class=\"line\">   at System.Threading.ThreadPoolWorkQueue.Dispatch()</span><br></pre></td></tr></table></figure>\n\n\n\n","site":{"data":{}},"excerpt":"","more":"<p>&gt; 环境为 Centos + OracleJAVA ，准备搭建 zookeeper-3.5.5 + 用于方便展示节点的zookeeperAdmin</p>\n<h2 id=\"zookeeper-3-5-5\"><a href=\"#zookeeper-3-5-5\" class=\"headerlink\" title=\"zookeeper-3.5.5\"></a>zookeeper-3.5.5</h2><h3 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h3><p>前往开源项目<a href=\"http://zookeeper.apache.org/releases.html#download\" target=\"_blank\" rel=\"noopener\">下载页面</a>根据需要下载对应的版本（注意要下载文件名后面带”-bin”的包）<br/><br><a href=\"https://archive.apache.org/dist/zookeeper/\" target=\"_blank\" rel=\"noopener\">懒人链接</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># tar -zxvf ./apache-zookeeper-3.5.5-bin.tar.gz</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># cd ./apache-zookeeper-3.5.5-bin.tar.gz</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 44</span><br><span class=\"line\">drwxr-xr-x 2 2002 2002  4096 Apr  9 19:13 bin</span><br><span class=\"line\">drwxr-xr-x 2 2002 2002  4096 Sep 20 14:00 conf</span><br><span class=\"line\">drwxr-xr-x 5 2002 2002  4096 May  3 20:07 docs</span><br><span class=\"line\">drwxr-xr-x 2 root root  4096 Sep 20 13:40 lib</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002 11358 Feb 15  2019 LICENSE.txt</span><br><span class=\"line\">drwxr-xr-x 2 root root  4096 Sep 20 13:43 logs</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002   432 Apr  9 19:13 NOTICE.txt</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002  1560 May  3 19:41 README.md</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002  1347 Apr  2 21:05 README_packaging.txt</span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># ll</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z apache-zookeeper-3.5.5-bin]<span class=\"comment\"># cd conf</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z conf]<span class=\"comment\"># ll</span></span><br><span class=\"line\">total 16</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002  535 Feb 15  2019 configuration.xsl</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002 2712 Apr  2 21:05 log4j.properties</span><br><span class=\"line\">-rw-r--r-- 1 2002 2002  922 Feb 15  2019 zoo_sample.cfg</span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z conf]<span class=\"comment\"># cp ./zoo_sample.cfg ./zoo.cfg</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z conf]<span class=\"comment\"># cd ../bin/</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z conf]<span class=\"comment\">#</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"需要留意的\"><a href=\"#需要留意的\" class=\"headerlink\" title=\"需要留意的\"></a>需要留意的</h3><p>如果在这里直接启动的话可能会启动不成功，因为apache-zookeeper默认监听了8080端口作为自己的<code>zookeeper-server</code>的服务端。最好是自己在./conf/zoo.cfg中配置一下<code>admin.serverPort=[自己随便改个端口]</code>，对的，配置文件里默认是没有这行的，这个比较坑。</p>\n<h3 id=\"启动\"><a href=\"#启动\" class=\"headerlink\" title=\"启动\"></a>启动</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z bin]<span class=\"comment\"># ./zkServer.sh start</span></span><br><span class=\"line\">/usr/bin/java</span><br><span class=\"line\">ZooKeeper JMX enabled by default</span><br><span class=\"line\">Using config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg</span><br><span class=\"line\">Starting zookeeper ... STARTED</span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z bin]<span class=\"comment\"># ./zkServer.sh start</span></span><br><span class=\"line\">/usr/bin/java</span><br><span class=\"line\">ZooKeeper JMX enabled by default</span><br><span class=\"line\">Using config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg</span><br><span class=\"line\">Starting zookeeper ... already running as process 29414.</span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z bin]<span class=\"comment\"># ./zkServer.sh status</span></span><br><span class=\"line\">/usr/bin/java</span><br><span class=\"line\">ZooKeeper JMX enabled by default</span><br><span class=\"line\">Using config: /app/zookeeper/apache-zookeeper-3.5.5-bin/bin/../conf/zoo.cfg</span><br><span class=\"line\">Client port found: 2181. Client address: localhost.</span><br><span class=\"line\">Mode: standalone</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"zookeeper-admin\"><a href=\"#zookeeper-admin\" class=\"headerlink\" title=\"zookeeper-admin\"></a>zookeeper-admin</h2><p>这是一个github上的小<a href=\"https://github.com/Ahoo-Wang/ZooKeeper-Admin\" target=\"_blank\" rel=\"noopener\">项目</a><br/><br>功能不多，刚刚够用就行，不整那些花里胡哨的，支持直接使用docker构建，非常方便</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># docker run --name zookeeper-admin -p 80:2182 docker.io/ahoowang/zookeeper.admin</span></span><br><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># docker container ls</span></span><br><span class=\"line\">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES</span><br><span class=\"line\">56bf5522f4fe        4232addbc345        <span class=\"string\">\"dotnet ZooKeeper....\"</span>   About an hour ago   Up 2 minutes        0.0.0.0:2182-&amp;gt;80/tcp   zookeeper-admin</span><br></pre></td></tr></table></figure>\n<p><img src=\"leanote://file/getImage?fileId=5d84827ce1488a763c000019\" alt=\"zookeeper-admin\"></p>\n<p>界面看上去还不错。</p>\n<p>然而好景不长，跑了一阵发现无法访问了。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]<span class=\"comment\"># docker container ls</span></span><br><span class=\"line\">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure>\n<p>??? 怎么停止了，看看日志怎么说</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZuf6imeqt5e7fo9jw7918Z zookeeper]# docker logs 56bf5522f4fe</span><br><span class=\"line\">Hosting environment: Production</span><br><span class=\"line\">Content root path: &#x2F;app</span><br><span class=\"line\">Now listening on: http:&#x2F;&#x2F;+:80</span><br><span class=\"line\">Application started. Press Ctrl+C to shut down.</span><br><span class=\"line\">Application is shutting down...</span><br><span class=\"line\">Hosting environment: Production</span><br><span class=\"line\">Content root path: &#x2F;app</span><br><span class=\"line\">Now listening on: http:&#x2F;&#x2F;+:80</span><br><span class=\"line\">Application started. Press Ctrl+C to shut down.</span><br><span class=\"line\">Unhandled Exception: System.InvalidOperationException: Collection was modified; enumeration operation may not execute.</span><br><span class=\"line\">   at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)</span><br><span class=\"line\">   at System.Collections.Generic.Dictionary&#96;2.ValueCollection.Enumerator.MoveNext()</span><br><span class=\"line\">   at ZooKeeper.Admin.ZooKeeperManager.&lt;dispose&gt;d__9.MoveNext() in E:\\ZooKeeper-Admin\\ZooKeeper.Admin\\ZooKeeperManager.cs:line 55</span><br><span class=\"line\">--- End of stack trace from previous location where exception was thrown ---</span><br><span class=\"line\">   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()</span><br><span class=\"line\">   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)</span><br><span class=\"line\">   at System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem()</span><br><span class=\"line\">   at System.Threading.ThreadPoolWorkQueue.Dispatch()</span><br></pre></td></tr></table></figure>\n\n\n\n"},{"title":"[Zookeeper学习-第二章]用作SpringCloud的注册中心","date":"2019-07-01T07:53:24.000Z","updated":"2020-01-06T05:31:00.000Z","comments":1,"_content":"\n# 弃坑换了eureka\n","source":"_posts/[Zookeeper学习-第二章]用作SpringCloud的注册中心.md","raw":"---\ntitle: '[Zookeeper学习-第二章]用作SpringCloud的注册中心'\ndate: 2019/7/1 15:53:24\nupdated: 2020/1/6 13:31\ncomments: true\ntags: \n    - java\n    - zookeeper\ncategories: \n    - [Study, Java]\n---\n\n# 弃坑换了eureka\n","slug":"[Zookeeper学习-第二章]用作SpringCloud的注册中心","published":1,"layout":"post","photos":[],"link":"","_id":"ck520s6p100034woveqkofpv7","content":"<h1 id=\"弃坑换了eureka\"><a href=\"#弃坑换了eureka\" class=\"headerlink\" title=\"弃坑换了eureka\"></a>弃坑换了eureka</h1>","site":{"data":{}},"excerpt":"","more":"<h1 id=\"弃坑换了eureka\"><a href=\"#弃坑换了eureka\" class=\"headerlink\" title=\"弃坑换了eureka\"></a>弃坑换了eureka</h1>"}],"PostAsset":[],"PostCategory":[{"post_id":"ck520ml8j00009cov9idcfmg6","category_id":"ck520ml9600049cov5jzt22s8","_id":"ck520ml9k000a9covcribb4z4"},{"post_id":"ck520ml8j00009cov9idcfmg6","category_id":"ck520ml9b00099covdesicbea","_id":"ck520ml9k000b9covc15i48ij"},{"post_id":"ck520rgim0000tsova1gz0lx3","category_id":"ck520ml9600049cov5jzt22s8","_id":"ck520rgjg0004tsov2oc20mli"},{"post_id":"ck520rgim0000tsova1gz0lx3","category_id":"ck520rgjc0002tsov9gller4u","_id":"ck520rgjh0005tsov4ejt0vry"},{"post_id":"ck520s6ov00004wovf13pcpm3","category_id":"ck520ml9600049cov5jzt22s8","_id":"ck520s6p800064wov398w7iia"},{"post_id":"ck520s6ov00004wovf13pcpm3","category_id":"ck520rgjc0002tsov9gller4u","_id":"ck520s6p800084wov031zdlfs"},{"post_id":"ck520s6oy00014wovg2qc5fuh","category_id":"ck520ml9600049cov5jzt22s8","_id":"ck520s6pb000c4wov3tom14yj"},{"post_id":"ck520s6oy00014wovg2qc5fuh","category_id":"ck520s6p700054wov91uiaeoi","_id":"ck520s6pb000e4wov5wg76a5p"},{"post_id":"ck520s6p100034woveqkofpv7","category_id":"ck520ml9600049cov5jzt22s8","_id":"ck520s6pc000g4wov34k14smb"},{"post_id":"ck520s6p100034woveqkofpv7","category_id":"ck520s6p700054wov91uiaeoi","_id":"ck520s6pc000h4wovc8xa096w"}],"PostTag":[{"post_id":"ck520ml8j00009cov9idcfmg6","tag_id":"ck520ml9300029covcb6v4bli","_id":"ck520ml9a00079covhikc2m2d"},{"post_id":"ck520rgim0000tsova1gz0lx3","tag_id":"ck520rgj50001tsovc5m212ca","_id":"ck520rgjf0003tsovg60b0ayt"},{"post_id":"ck520s6ov00004wovf13pcpm3","tag_id":"ck520rgj50001tsovc5m212ca","_id":"ck520s6p100024wova126gklq"},{"post_id":"ck520s6oy00014wovg2qc5fuh","tag_id":"ck520s6p200044wov3su904jp","_id":"ck520s6pb000b4wove6cy97u6"},{"post_id":"ck520s6oy00014wovg2qc5fuh","tag_id":"ck520s6p800074wov2tf04gqm","_id":"ck520s6pb000d4wov0s5jddng"},{"post_id":"ck520s6p100034woveqkofpv7","tag_id":"ck520s6p200044wov3su904jp","_id":"ck520s6pc000i4wov5scx34zx"},{"post_id":"ck520s6p100034woveqkofpv7","tag_id":"ck520s6p800074wov2tf04gqm","_id":"ck520s6pc000j4wov3wovfo3z"}],"Tag":[{"name":"blog","_id":"ck520ml9300029covcb6v4bli"},{"name":"linux","_id":"ck520rgj50001tsovc5m212ca"},{"name":"java","_id":"ck520s6p200044wov3su904jp"},{"name":"zookeeper","_id":"ck520s6p800074wov2tf04gqm"}]}}